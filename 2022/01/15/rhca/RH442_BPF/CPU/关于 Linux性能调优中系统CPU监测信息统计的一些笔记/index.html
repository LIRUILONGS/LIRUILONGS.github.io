<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>关于Linux性能调优中系统CPU监测信息统计的一些笔记 - 山河已无恙</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="山河已无恙"><meta name="msapplication-TileImage" content="https://cdn.jsdelivr.net/gh/removeif/removeif-demo@latest/img/favicon.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="山河已无恙"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta description="人总是害怕去追求自己最重要的梦想，因为他们觉得自己不配拥有，或者觉得自己没有能力去完成。  ——保罗.柯艾略《牧羊少年奇幻之旅》"><meta property="og:type" content="blog"><meta property="og:title" content="山河已无恙"><meta property="og:url" content="https://mp.weixin.qq.com/s?__biz=MzkyNjIxNTYwMw==&amp;mid=2247496480&amp;idx=1&amp;sn=a9971fed3962ef2a1aeda1f0bda65f86&amp;chksm=c2380ffcf54f86eaba8daac6caca72a70f38e61a8d25dc2a66d3a17b87c02530e326dcaea14b#rd"><meta property="og:site_name" content="山河已无恙"><meta property="og:description" content="人总是害怕去追求自己最重要的梦想，因为他们觉得自己不配拥有，或者觉得自己没有能力去完成。  ——保罗.柯艾略《牧羊少年奇幻之旅》"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://mp.weixin.qq.com/img/头像.jpg"><meta property="article:published_time" content="2022-01-15T10:37:59.000Z"><meta property="article:modified_time" content="2024-08-16T01:54:42.542Z"><meta property="article:author" content="LIRUILONGS"><meta property="article:tag" content="Linux"><meta property="article:tag" content="CPU"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/头像.jpg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://liruilongs.github.io/2022/01/15/rhca/RH442_BPF/CPU/%E5%85%B3%E4%BA%8E%20Linux%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98%E4%B8%AD%E7%B3%BB%E7%BB%9FCPU%E7%9B%91%E6%B5%8B%E4%BF%A1%E6%81%AF%E7%BB%9F%E8%AE%A1%E7%9A%84%E4%B8%80%E4%BA%9B%E7%AC%94%E8%AE%B0/"},"headline":"山河已无恙","image":["https://img-blog.csdnimg.cn/cab20b15858d411784b20260cac58851.png","https://img-blog.csdnimg.cn/9ed5b50d459b46cfad57e32bc8eb417a.png","https://img-blog.csdnimg.cn/cb95a5a7bd2c4abfb57a28e3d02f03e5.png","https://img-blog.csdnimg.cn/b038f4ed3706400a8a01adb35ec26f3e.png","https://img-blog.csdnimg.cn/5911bab348f34e7e9b1b3eccbfa8e710.png","https://img-blog.csdnimg.cn/764ddf0e6bd940ccb97a9cedc2e2f21f.png","https://img-blog.csdnimg.cn/9c66abfe6b57493daf9a6f468f0b8422.png","https://img-blog.csdnimg.cn/6a2231f374f5491e9e4a16bd61bba23c.png","https://img-blog.csdnimg.cn/eece517f17664fc18928e2233ab5acd5.png","https://img-blog.csdnimg.cn/7b73246a5fc74509a58de3705af9bd16.png"],"datePublished":"2022-01-15T10:37:59.000Z","dateModified":"2024-08-16T01:54:42.542Z","author":{"@type":"Person","name":"山河已无恙"},"description":"人总是害怕去追求自己最重要的梦想，因为他们觉得自己不配拥有，或者觉得自己没有能力去完成。  ——保罗.柯艾略《牧羊少年奇幻之旅》"}</script><link rel="canonical" href="https://liruilongs.github.io/2022/01/15/rhca/RH442_BPF/CPU/%E5%85%B3%E4%BA%8E%20Linux%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98%E4%B8%AD%E7%B3%BB%E7%BB%9FCPU%E7%9B%91%E6%B5%8B%E4%BF%A1%E6%81%AF%E7%BB%9F%E8%AE%A1%E7%9A%84%E4%B8%80%E4%BA%9B%E7%AC%94%E8%AE%B0/"><link rel="alternate" href="/path/to/atom.xml" title="山河已无恙" type="application/atom+xml"><link rel="icon" href="https://cdn.jsdelivr.net/gh/removeif/removeif-demo@latest/img/favicon.png"><meta name="referrer" content="no-referrer-when-downgrade"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.12.0/css/all.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/highlight.js/9.12.0/styles/dracula.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.12.0/css/all.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css?family=Ubuntu:400,600|Source+Code+Pro|Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Microsoft YaHei:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&amp;amp;subset=latin,latin-ext|Inconsolata|Itim|Lobster.css"><script src="https://cdnjs.loli.net/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="/js/globalUtils.js"></script><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?3f06f2b732a5b1034c989f74e28d0eea";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css"><script src="https://cdnjs.loli.net/ajax/libs/pace/1.0.2/pace.min.js"></script><link rel="stylesheet" href="/live2d/waifu.css"><script type="text/javascript" async src="/live2d/autoload.js"></script><meta name="generator" content="Hexo 5.4.2"></head><body class="is-3-column has-navbar-fixed-top"><nav class="navbar navbar-main is-fixed-top"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.png" alt="山河已无恙" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/media">影音</a><a class="navbar-item" href="/album">相册</a><a class="navbar-item" href="/friend">友链</a><a class="navbar-item" href="/self-talking">生活小记</a><a class="navbar-item" href="/message">留言墙</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Gitee" href="https://gitee.com/liruilonger"><i class="fab fa-git-square fa-1x"></i></a><a class="navbar-item" target="_blank" rel="noopener" title="GitHub" href="https://github.com/LIRUILONGS"><i class="fab fa-github fa-1x"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul fa-1x"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search fa-1x"></i></a><a class="navbar-item" id="night-nav" title="Night Mode" href="javascript:;"><i class="fas fa-moon fa-1x" id="night-icon"></i></a></div></div></div></nav><script type="text/javascript" src="/js/theme-setting.js"></script><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-9-widescreen"><!--!--><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2022-01-15  <a class="commentCountImg" href="/2022/01/15/rhca/RH442_BPF/CPU/%E5%85%B3%E4%BA%8E%20Linux%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98%E4%B8%AD%E7%B3%BB%E7%BB%9FCPU%E7%9B%91%E6%B5%8B%E4%BF%A1%E6%81%AF%E7%BB%9F%E8%AE%A1%E7%9A%84%E4%B8%80%E4%BA%9B%E7%AC%94%E8%AE%B0/#comment-container"><span class="display-none-class">b3b1e6bdc76b5349736f90f4a0ecbcb3</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="b3b1e6bdc76b5349736f90f4a0ecbcb3">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>1 小时  <i class="fas fa-pencil-alt"> </i>6.9 k</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">关于Linux性能调优中系统CPU监测信息统计的一些笔记</h1><div class="content"><p><strong><font color="009688"> 人总是害怕去追求自己最重要的梦想，因为他们觉得自己不配拥有，或者觉得自己没有能力去完成。  ——保罗.柯艾略《牧羊少年奇幻之旅》</strong></font></p>
<span id="more"></span>
<h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><hr>
<ul>
<li>博文内容部分参考于<code>《Linux性能优化》</code>中文版一书，学习后记录，感兴趣小伙伴可以支持下译者</li>
<li>博文涉及内容：<ul>
<li><code>CPU</code>相关的基础指标的解释：<code>运行队列，平均负载，上下文切换，中断，CPU使用率</code></li>
<li><code>CPU</code>监控信息统计的常用工具中关于CPU信息的统计方式：<ul>
<li><code>vmstat</code></li>
<li><code>mpstat</code></li>
<li><code>sar</code></li>
<li><code>top(3.0)</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong><font color="009688"> 人总是害怕去追求自己最重要的梦想，因为他们觉得自己不配拥有，或者觉得自己没有能力去完成。  ——保罗.柯艾略《牧羊少年奇幻之旅》</strong></font></p>
<hr>
<h2 id="CPU相关的基础指标"><a href="#CPU相关的基础指标" class="headerlink" title="CPU相关的基础指标"></a><font color=seagreen><code>CPU</code>相关的基础指标</font></h2><h3 id="运行队列统计"><a href="#运行队列统计" class="headerlink" title="运行队列统计"></a><font color=seagreen>运行队列统计</font></h3><blockquote>
<p>在Linux中,一个进程有可运行的,阻塞的(正在等待一个事件的完成)两种情况。阻塞进程可能在等待的是从I&#x2F;O设备来的数据,或者是系统调用的结果。</p>
</blockquote>
<p>如果进程是可运行的,那就意味着它要和其他也是可运行的进程竞争CPU时间。一个可运行的进程不一定会使用CPU,但是当<code>Linux调度器决定下一个要运行的进程时,它会从可运行进程队列中挑选</code>。</p>
<p><strong><font color=red>如果进程是可运行的,同时又在等待使用处理器,这些进程就构成了运行队列。运行队列越长,处于等待状态的进程就越多</font></strong> 性能工具通常会给出可运行的进程个数和等待I&#x2F;O的阻塞进程个数。</p>
<h4 id="平均负载"><a href="#平均负载" class="headerlink" title="平均负载"></a><font color=brown>平均负载</font></h4><p>**<font color=blue>系统的负载是指正在运行和可运行的进程总数</font>**。比如,如果正在运行的进程为两个,而可运行的进程为三个,那么系统负载就是5,平均负载是给定时间内的负载量。</p>
<h3 id="上下文切换"><a href="#上下文切换" class="headerlink" title="上下文切换"></a><font color=blue>上下文切换</font></h3><p>制造出给定单处理器同时运行多个任务的假象, <strong><font color=purple>Linux内核就要不断地在不同的进程间切换。这种不同进程间的切换称为上下文切换</font></strong> </p>
<p>上下文切换时, CPU要保存旧进程的所有上下文信息,并取出新进程的所有上下文信息。上下文中包含了Linux跟踪新进程的大量信息,其中包括: <strong><font color=yellowgreen>进程正在执行的指令,分配给进程的内存,进程打开的文件等</font></strong></p>
<p>上下文切换涉及大量信息的移动,**<font color=tomato>上下文切换的开销可以是相当大的</font>**。</p>
<p><strong><font color=amber>上下文切换可以是内核调度的结果。为了保证公平地给每个进程分配处理器时间,内核周期性地中断正在运行的进程,</font></strong> 在适当的情况下,内核调度器会决定开始另一个进程,而不是让当前进程继续执行。每次这种<code>周期性中断或定时发生时</code>,系统都可能进行上下文切换。<code>每秒定时中断的次数与架构和内核版本有关</code>。</p>
<p><strong><font color=royalblue>一个检查中断频率的简单方法是用<code>/proc/interrupts</code>文件,它可以确定<code>已知时长内发生的中断次数</code>。</font></strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">┌──[root@vms81.liruilongs.github.io]-[~]</span><br><span class="line">└─<span class="variable">$cat</span> /proc/interrupts  | grep time; sleep 5 ;cat /proc/interrupts | grep time</span><br><span class="line">   0:        337          0   IO-APIC-edge      timer</span><br><span class="line"> LOC:    9896498    9871317   Local timer interrupts</span><br><span class="line">   0:        337          0   IO-APIC-edge      timer</span><br><span class="line"> LOC:    9901529    9876213   Local timer interrupts</span><br><span class="line">┌──[root@vms81.liruilongs.github.io]-[~]</span><br><span class="line">└─$</span><br></pre></td></tr></table></figure>
<p><strong><font color=red>上面定时器的启动频率为(9896498-9901529)&#x2F;5 &#x3D;1000,即每秒要终端1000次，同时也可以理解为内核为sleep进程分配了1000次CPU，</font></strong></p>
<blockquote>
<p>如果你的上下文切换明显多于定时器中断,那么这些切换极有可能是由I&#x2F;O请求或其他长时间运行的系统调用(如休眠)造成的。当应用请求的操作不能立即完成时,内核启动该操作,保存请求进程,并尝试切换到另一个已就绪进程。这能让处理器尽量保持忙状态。</p>
</blockquote>
<h3 id="中断"><a href="#中断" class="headerlink" title=" 中断"></a><font color=camel> 中断</font></h3><p><strong><font color=yellowgreen>处理器还周期性地从硬件设备接收中断。当设备有事件需要内核处理时,它通常就会触发这些中断。</font></strong></p>
<blockquote>
<p>比如,如果磁盘控制器刚刚完成从驱动器取数据块的操作,并准备好提供给内核,那么磁盘控制器就会触发一个中断。对内核收到的每个中断,如果已经有相应的已注册的中断处理程序,就运行该程序,否则将忽略这个中断。</p>
</blockquote>
<p>**<font color=camel>中断处理程序在系统中具有很高的运行优先级,并且通常执行速度也很快</font>**。查看<code>/proc/interrupts</code>文件可以显示出哪些CPU上触发了哪些中断。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">┌──[root@vms81.liruilongs.github.io]-[~]</span><br><span class="line">└─<span class="variable">$cat</span> /proc/interrupts</span><br><span class="line">            CPU0       CPU1</span><br><span class="line">   0:        337          0   IO-APIC-edge      timer</span><br><span class="line">   1:         10          0   IO-APIC-edge      i8042</span><br><span class="line">   8:          1          0   IO-APIC-edge      rtc0</span><br><span class="line">   9:          0          0   IO-APIC-fasteoi   acpi</span><br><span class="line">  12:         16          0   IO-APIC-edge      i8042</span><br><span class="line">  14:          0          0   IO-APIC-edge      ata_piix</span><br><span class="line">  15:          0          0   IO-APIC-edge      ata_piix</span><br><span class="line">  17:      57939          0   IO-APIC-fasteoi   ioc0</span><br><span class="line">  18:         14       9800   IO-APIC-fasteoi   ens32</span><br><span class="line">  24:          0          0   PCI-MSI-edge      PCIe PME, pciehp</span><br><span class="line">  25:          0          0   PCI-MSI-edge      PCIe PME, pciehp</span><br><span class="line">  26:          0          0   PCI-MSI-edge      PCIe PME, pciehp</span><br><span class="line">  27:          0          0   PCI-MSI-edge      PCIe PME, pciehp</span><br><span class="line">.......................</span><br><span class="line"> THR:          0          0   Threshold APIC interrupts</span><br><span class="line"> DFR:          0          0   Deferred Error APIC interrupts</span><br><span class="line"> MCE:          0          0   Machine check exceptions</span><br><span class="line"> MCP:         37         37   Machine check polls</span><br><span class="line"> ERR:          0</span><br><span class="line"> MIS:          0</span><br><span class="line"> PIN:          0          0   Posted-interrupt notification event</span><br><span class="line"> PIW:          0          0   Posted-interrupt wakeup event</span><br><span class="line">┌──[root@vms81.liruilongs.github.io]-[~]</span><br><span class="line">└─$</span><br></pre></td></tr></table></figure>
<h3 id="CPU使用率"><a href="#CPU使用率" class="headerlink" title=" CPU使用率"></a><font color=orange> CPU使用率</font></h3><table>
<thead>
<tr>
<th align="left"><font color=chocolate>在任何给定的时间, CPU可以执行以下七件事情中的一个</font></th>
</tr>
</thead>
<tbody><tr>
<td align="left">CPU可以是<code>空闲的</code>,这意味着处理器实际上没有做任何工作,并且等待有任务可以执行。</td>
</tr>
<tr>
<td align="left">CPU可以<code>运行用户代码</code>,即指定的“用户”时间。</td>
</tr>
<tr>
<td align="left">CPU可以<code>执行Linux内核中的应用程序代码</code>,这就是“系统”时间。</td>
</tr>
<tr>
<td align="left">CPU可以<code>执行“比较友好”的或者优先级被设置为低于一般进程的用户代码</code>。</td>
</tr>
<tr>
<td align="left">CPU可以<code>处于iowait状态</code>,即系统正在等待10 (如磁盘或网络)完成。</td>
</tr>
<tr>
<td align="left">CPU可以<code>处于irq状态</code>,即它正在用高优先级代码处理硬件中断。</td>
</tr>
<tr>
<td align="left">CPU可以<code>处于softirq模式</code>,即系统正在执行同样由中断触发的内核代码,只不过其运行于较低优先级(下半部代码)</td>
</tr>
</tbody></table>
<blockquote>
<p>一个具有 <strong><font color=purple>高“系统”百分比</font></strong> 的系统表明其大部分时间都消耗在了内核上。像oprofile一样的工具可以帮助确定时间都消耗在了哪里。具有 <strong><font color=camel>高“用户”时间</font></strong> 的系统则将其大部分时间都用来运行应用程序。</p>
</blockquote>
<h2 id="CPU监控信息统计"><a href="#CPU监控信息统计" class="headerlink" title="CPU监控信息统计 "></a><font color=royalblue><code>CPU</code>监控信息统计 </font></h2><h3 id="vmstat-虚拟内存统计"><a href="#vmstat-虚拟内存统计" class="headerlink" title="vmstat (虚拟内存统计)"></a><font color=amber>vmstat (虚拟内存统计)</font></h3><p><code>vmstat</code>是一个很有用的命令,它能获取整个系统性能的粗略信息,包括:</p>
<ul>
<li><strong><font color=orange>正在运行的进程个数</font></strong></li>
<li><strong><font color=seagreen>CPU的使用情况</font></strong></li>
<li><strong><font color=camel>CPU接收的中断个数</font></strong></li>
<li><strong><font color=purple>调度器执行的上下文切换次数</font></strong></li>
</ul>
<h4 id="语法"><a href="#语法" class="headerlink" title="语法"></a><font color=royalblue>语法</font></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">┌──(liruilong㉿Liruilong)-[/mnt/c/Users/lenovo]</span><br><span class="line">└─$ vmstat -<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line">Usage:</span><br><span class="line"> vmstat [options] [delay [count]]</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line"> -a, --active           active/inactive memory</span><br><span class="line"> -f, --forks            number of forks since boot</span><br><span class="line"> -m, --slabs            slabinfo</span><br><span class="line"> -n, --one-header       <span class="keyword">do</span> not redisplay header</span><br><span class="line"> -s, --stats            event counter statistics</span><br><span class="line"> -d, --disk             disk statistics</span><br><span class="line"> -D, --disk-sum         summarize disk statistics</span><br><span class="line"> -p, --partition &lt;dev&gt;  partition specific statistics</span><br><span class="line"> -S, --unit &lt;char&gt;      define display unit</span><br><span class="line"> -w, --wide             wide output</span><br><span class="line"> -t, --timestamp        show timestamp</span><br><span class="line"></span><br><span class="line"> -h, --<span class="built_in">help</span>     display this <span class="built_in">help</span> and <span class="built_in">exit</span></span><br><span class="line"> -V, --version  output version information and <span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line">For more details see vmstat(8).</span><br><span class="line"></span><br><span class="line">┌──(liruilong㉿Liruilong)-[/mnt/c/Users/lenovo]</span><br><span class="line">└─$</span><br></pre></td></tr></table></figure>

<h4 id="CPU性能相关的选项"><a href="#CPU性能相关的选项" class="headerlink" title="CPU性能相关的选项"></a><font color=seagreen>CPU性能相关的选项</font></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$vmstat</span> [-n] [-s] [delay [count ]]</span><br></pre></td></tr></table></figure>
<p><code>vmstat</code>运行于两种模式:<code>采样模式</code>和<code>平均模式</code>。如果<code>不指定参数</code>,则vmstat统计运行于<code>平均模式</code>下.</p>
<blockquote>
<p>vmstat显示从系统启动以来所有统计数据的均值。但是,如果指定了延迟,那么第一个采样仍然是系统启动以来的均值,但之后vmstat按延迟秒数采样系统并显示统计数据。</p>
</blockquote>
<table>
<thead>
<tr>
<th align="left">参数</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><img src="https://img-blog.csdnimg.cn/cab20b15858d411784b20260cac58851.png" alt="《Linux性能优化_[美] 菲利普G.伊佐特》"></td>
</tr>
</tbody></table>
<p><strong><font color=purple>-n 参数的区别</font></strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">┌──[root@vms81.liruilongs.github.io]-[~]</span><br><span class="line">└─<span class="variable">$vmstat</span> 1</span><br><span class="line">procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----</span><br><span class="line"> r  b   swpd   free   buff  cache   si   so    bi    bo   <span class="keyword">in</span>   cs us sy id wa st</span><br><span class="line"> 2  0      0 1064772   2072 1764796    0    0    60    26 1501  832  8  4 87  1  0</span><br><span class="line"> 0  0      0 1064964   2072 1764800    0    0     0    70 2993 4939 19  8 73  0  0</span><br><span class="line"> 0  0      0 1064400   2072 1764800    0    0     0     0 2832 6916 24 10 66  0  0</span><br><span class="line">..............</span><br><span class="line"> 0  0      0 1064156   2072 1764952    0    0     0    32 2449 3900  3  2 95  0  0</span><br><span class="line"> 0  0      0 1064196   2072 1764860    0    0     0    16 2647 4124  6  2 91  0  0</span><br><span class="line">procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----</span><br><span class="line"> r  b   swpd   free   buff  cache   si   so    bi    bo   <span class="keyword">in</span>   cs us sy id wa st</span><br><span class="line"> 4  0      0 1058828   2072 1764860    0    0     0    24 3121 5182  8  4 88  0  0</span><br><span class="line"> 1  0      0 1064608   2072 1764820    0    0     0     0 3070 5297 10  6 83  0  0</span><br><span class="line"> 0  0      0 1064608   2072 1764820    0    0     0    32 2674 4136  3  2 95  0  0</span><br><span class="line"> 0  0      0 1064296   2072 1764820    0    0     0     0 2560 3943  3  1 95  0  0</span><br><span class="line">^C</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">┌──[root@vms81.liruilongs.github.io]-[~]</span><br><span class="line">└─<span class="variable">$vmstat</span> -n  1</span><br><span class="line">procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----</span><br><span class="line"> r  b   swpd   free   buff  cache   si   so    bi    bo   <span class="keyword">in</span>   cs us sy id wa st</span><br><span class="line"> 1  0      0 1063952   2072 1764808    0    0    59    26 1501  838  8  4 87  1  0</span><br><span class="line"> 7  0      0 1064472   2072 1764812    0    0     0    38 2869 4611  9  4 87  0  0</span><br><span class="line"> 2  0      0 1063476   2072 1764876    0    0     0    28 3467 8176 31 15 54  0  0</span><br><span class="line"> 0  0      0 1063476   2072 1764876    0    0     0     0 2482 3629 14  2 84  0  0</span><br><span class="line"> 0  0      0 1063476   2072 1764876    0    0     0    28 2459 3691  3  2 96  0  0</span><br><span class="line"> 0  0      0 1063368   2072 1764864    0    0     0    36 2691 4061  5  1 94  0  0</span><br><span class="line"> 0  0      0 1062864   2072 1764864    0    0     0    44 2714 4420  6  2 92  0  0</span><br><span class="line"> 0  0      0 1063104   2072 1764864    0    0     0    32 2963 4514  8  3 88  0  0</span><br><span class="line">............</span><br><span class="line"> 1  0      0 1063868   2072 1765000    0    0     0   107 2657 6989 33 14 52  0  0</span><br><span class="line"> 0  0      0 1063868   2072 1765000    0    0     0     0 2830 4315  6  3 91  0  0</span><br><span class="line"> 0  0      0 1063868   2072 1765000    0    0     0    28 2430 3908  5  3 92  0  0</span><br><span class="line"> 0  0      0 1063868   2072 1765000    0    0     0     0 2358 3551  2  2 96  0  0</span><br><span class="line">.........</span><br><span class="line"> 1  0      0 1064136   2072 1765112    0    0     0     0 2736 4000  6  3 91  0  0</span><br><span class="line"> 4  0      0 1063764   2072 1765112    0    0     0    48 2492 3779  5  2 93  1  0</span><br><span class="line"> 0  0      0 1063484   2072 1765112    0    0     0     0 2650 4071  4  2 94  0  0</span><br><span class="line"> 0  0      0 1063304   2072 1765116    0    0     0    99 2727 4430  7  3 90  0  0</span><br><span class="line"> 0  0      0 1063392   2072 1765116    0    0     0    12 2554 3811  2  1 97  0  0</span><br><span class="line"> 0  0      0 1064012   2072 1765120    0    0     0    48 2585 4291 14  5 81  0  0</span><br><span class="line"> 0  0      0 1064136   2072 1765120    0    0     0     0 2576 4057  4  2 94  0  0</span><br><span class="line">^C</span><br><span class="line">┌──[root@vms81.liruilongs.github.io]-[~]</span><br><span class="line">└─$</span><br></pre></td></tr></table></figure>
<p><strong><font color=chocolate>-s 的统计</font></strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">┌──[root@vms81.liruilongs.github.io]-[~]</span><br><span class="line">└─<span class="variable">$vmstat</span> -s</span><br><span class="line">      4030172 K total memory</span><br><span class="line">      1199020 K used memory</span><br><span class="line">      1277200 K active memory</span><br><span class="line">      1428408 K inactive memory</span><br><span class="line">      1064028 K free memory</span><br><span class="line">         2072 K buffer memory</span><br><span class="line">      1765052 K swap cache</span><br><span class="line">            0 K total swap</span><br><span class="line">            0 K used swap</span><br><span class="line">            0 K free swap</span><br><span class="line">       206387 non-nice user cpu ticks</span><br><span class="line">            3 nice user cpu ticks</span><br><span class="line">       100381 system cpu ticks</span><br><span class="line">      2184710 idle cpu ticks</span><br><span class="line">        12604 IO-wait cpu ticks</span><br><span class="line">            0 IRQ cpu ticks</span><br><span class="line">         4699 softirq cpu ticks</span><br><span class="line">            0 stolen cpu ticks</span><br><span class="line">      1473622 pages paged <span class="keyword">in</span></span><br><span class="line">       652550 pages paged out</span><br><span class="line">            0 pages swapped <span class="keyword">in</span></span><br><span class="line">            0 pages swapped out</span><br><span class="line">     37633050 interrupts</span><br><span class="line">     64361523 CPU context switches</span><br><span class="line">   1642162657 boot time</span><br><span class="line">       210962 forks</span><br><span class="line">┌──[root@vms81.liruilongs.github.io]-[~]</span><br><span class="line">└─$</span><br></pre></td></tr></table></figure>
<p><strong><font color=brown>CPU相关的列名含义</font></strong></p>
<table>
<thead>
<tr>
<th align="left">CPU相关的列名含义</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><img src="https://img-blog.csdnimg.cn/9ed5b50d459b46cfad57e32bc8eb417a.png" alt="《Linux性能优化_[美] 菲利普G.伊佐特》"></td>
</tr>
</tbody></table>
<blockquote>
<p><code>vmstat</code>的开销很低,可以让它在控制台上或窗口中持续运行,甚至是在负载非常重的服务器上是很实用的。</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">┌──[root@vms81.liruilongs.github.io]-[~]</span><br><span class="line">└─<span class="variable">$vmstat</span></span><br><span class="line">procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----</span><br><span class="line"> r  b   swpd   free   buff  cache   si   so    bi    bo   <span class="keyword">in</span>   cs us sy id wa st</span><br><span class="line"> 2  0      0 1057540   2072 1761012    0    0    68    27 1501  595  8  4 87  1  0</span><br><span class="line">┌──[root@vms81.liruilongs.github.io]-[~]</span><br><span class="line">└─$</span><br></pre></td></tr></table></figure>
<p><strong><font color=tomato>查看CPU平均值，当前系统中，可运行进程为2(r)，被阻塞的进程为0(b)，系统发生中断次数1501(in),系统发生上下文切换次数为595(cs)，系统代码消耗CPU为4%(sy)，用户代码消耗CPU为8%(us)，系统空闲占比87%(id),剩余1%属于等待IO消耗的CPU空闲状态(wa)，</font></strong></p>
<blockquote>
<p><strong><font color=blue>上下文切换的数量小于中断的数量。调度器切换进程的次数少于定时器中断触发的次数</font></strong> 。这很可能是因为系统基本上是空闲的,<strong><font color=green>在定时器中断触发的大多数时候,调度器没有任何工作要做,因此它也不需要从空闲进程切换出去。</font></strong></p>
</blockquote>
<p><strong><font color=brown>CPU 统计的含义</font></strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">┌──[root@vms81.liruilongs.github.io]-[~]</span><br><span class="line">└─<span class="variable">$vmstat</span> -s</span><br><span class="line">    ..........</span><br><span class="line">       206387 non-nice user cpu ticks</span><br><span class="line">            3 nice user cpu ticks</span><br><span class="line">       100381 system cpu ticks</span><br><span class="line">      2184710 idle cpu ticks</span><br><span class="line">        12604 IO-wait cpu ticks</span><br><span class="line">            0 IRQ cpu ticks</span><br><span class="line">         4699 softirq cpu ticks</span><br><span class="line">            0 stolen cpu ticks</span><br><span class="line">    ............</span><br><span class="line">     37633050 interrupts</span><br><span class="line">     64361523 CPU context switches</span><br><span class="line">    ...........</span><br><span class="line">       210962 forks</span><br></pre></td></tr></table></figure>
<p>这里的ticks为一个时间单位，相关数据为自系统启动时间以来的数据。<code>forks</code>表示系统创建以来的进程数，<code>CPU context switches</code>表示上下文文切换次数，<code>interrupts</code>即中断次数，剩下的参数对应上面的列理解即可，stolen cpu 这个不太理解</p>
<h3 id="top-3-0-X-版本"><a href="#top-3-0-X-版本" class="headerlink" title="top(3.0.X 版本)"></a><font color=brown>top(3.0.X 版本)</font></h3><p><strong><font color=seagreen><code>top</code> 小伙伴应该不陌生，不多讲，直接看语法</font></strong></p>
<h4 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a><font color=orange>语法</font></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">┌──[root@vms81.liruilongs.github.io]-[~]</span><br><span class="line">└─<span class="variable">$top</span> -<span class="built_in">help</span></span><br><span class="line">  procps-ng version 3.3.10</span><br><span class="line">Usage:</span><br><span class="line">  top -hv | -bcHiOSs -d secs -n max -u|U user -p pid(s) -o field -w [cols]</span><br><span class="line">┌──[root@vms81.liruilongs.github.io]-[~]</span><br><span class="line">└─$</span><br></pre></td></tr></table></figure>
<p><strong><font color=yellowgreen>top呈现为一个降序列表,排在最前面的是最占用CPU的进程。</font></strong></p>
<h4 id="CPU性能相关的选项-1"><a href="#CPU性能相关的选项-1" class="headerlink" title="CPU性能相关的选项"></a><font color=tomato>CPU性能相关的选项</font></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$top</span> [-d delay] [-n iter] [-i] [-b]</span><br></pre></td></tr></table></figure>
<blockquote>
<p>top实际有两种模式的选项:<code>命令行选项</code>和<code>运行时选项</code>。</p>
</blockquote>
<h5 id="命令行选项"><a href="#命令行选项" class="headerlink" title="命令行选项"></a><font color=brown>命令行选项</font></h5><blockquote>
<p>命令行选项决定top如何显示其信息。</p>
</blockquote>
<table>
<thead>
<tr>
<th align="left">命令行选项</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><img src="https://img-blog.csdnimg.cn/cb95a5a7bd2c4abfb57a28e3d02f03e5.png" alt="在这里插入图片描述"></td>
</tr>
</tbody></table>
<p><strong><font color=camel>下面问间隔3s统计2次的top信息</font></strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">┌──[root@vms81.liruilongs.github.io]-[~]</span><br><span class="line">└─<span class="variable">$top</span> -d 3 -n 2</span><br><span class="line">top - 09:26:22 up 13:08,  1 user,  load average: 0.56, 0.48, 0.55</span><br><span class="line">Tasks: 215 total,   1 running, 214 sleeping,   0 stopped,   0 zombie</span><br><span class="line">%Cpu(s):  9.9 us,  5.5 sy,  0.0 ni, 84.3 id,  0.2 wa,  0.0 hi,  0.2 si,  0.0 st</span><br><span class="line">KiB Mem :  4030172 total,  1079708 free,  1204872 used,  1745592 buff/cache</span><br><span class="line">KiB Swap:        0 total,        0 free,        0 used.  2470484 avail Mem</span><br><span class="line"></span><br><span class="line">   PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND</span><br><span class="line">  2195 root      20   0 1174904 380988  47392 S  10.0  9.5  95:15.71 kube-apiserver</span><br><span class="line">   963 root      20   0 1777988 142376  59968 S   5.6  3.5  41:04.34 kubelet</span><br><span class="line">  2204 root      20   0  823728  98312  36136 S   5.6  2.4  47:06.26 kube-controller</span><br><span class="line">  4348 root      20   0 1657820  47488  21052 S   5.3  1.2  42:28.29 calico-node</span><br><span class="line">  2266 root      20   0 10.696g  77632  19904 S   3.0  1.9  23:51.16 etcd</span><br><span class="line">  1121 root      20   0 1369820  85076  28388 S   2.7  2.1  15:55.04 dockerd</span><br><span class="line">   973 root      20   0 1099192  43512  16860 S   0.7  1.1   4:32.81 containerd</span><br><span class="line">  3057 root      20   0  737756  29904  12424 S   0.7  0.7   3:34.82 speaker</span><br><span class="line">  3564 root      20   0  713096  15152   4312 S   0.7  0.4   1:50.31 containerd-shim</span><br><span class="line">  4313 root      20   0  713096  15596   4256 S   0.7  0.4   1:25.70 containerd-shim</span><br><span class="line">     9 root      20   0       0      0      0 S   0.3  0.0   2:05.06 rcu_sched</span><br><span class="line">    13 root      20   0       0      0      0 S   0.3  0.0   0:07.26 ksoftirqd/1</span><br><span class="line">  2214 root      20   0  754268  41856  19352 S   0.3  1.0   4:25.88 kube-scheduler</span><br><span class="line">  3774 root      20   0  751232  34032  15932 S   0.3  0.8   1:25.77 coredns</span><br><span class="line">  4261 root      20   0  751488  30832  15880 S   0.3  0.8   1:30.06 coredns</span><br><span class="line">  4369 polkitd   20   0  745532  33232  14124 S   0.3  0.8   0:21.00 kube-controller</span><br><span class="line">     1 root      20   0  191024   4028   2516 S   0.0  0.1   0:47.38 systemd</span><br><span class="line">     2 root      20   0       0      0      0 S   0.0  0.0   0:00.05 kthreadd</span><br><span class="line">     3 root      20   0       0      0      0 S   0.0  0.0   0:07.85 ksoftirqd/0</span><br><span class="line">     4 root      20   0       0      0      0 S   0.0  0.0   0:06.99 kworker/0:0</span><br><span class="line">.......</span><br></pre></td></tr></table></figure>
<p><strong><font color=blue>下面为只显示非空闲进程</font></strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">┌──[root@vms81.liruilongs.github.io]-[~]</span><br><span class="line">└─<span class="variable">$top</span> -i</span><br><span class="line">top - 09:35:45 up 13:18,  1 user,  load average: 0.17, 0.45, 0.53</span><br><span class="line">Tasks: 216 total,   3 running, 213 sleeping,   0 stopped,   0 zombie</span><br><span class="line">%Cpu(s):  7.4 us,  3.2 sy,  0.0 ni, 89.1 id,  0.0 wa,  0.0 hi,  0.2 si,  0.0 st</span><br><span class="line">KiB Mem :  4030172 total,  1070632 free,  1213464 used,  1746076 buff/cache</span><br><span class="line">KiB Swap:        0 total,        0 free,        0 used.  2461980 avail Mem</span><br><span class="line"></span><br><span class="line">   PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND</span><br><span class="line">  2195 root      20   0 1174904 380988  47392 S  14.3  9.5  96:25.19 kube-apiserver</span><br><span class="line">  2204 root      20   0  823728  98312  36136 S   6.3  2.4  47:40.78 kube-controller</span><br><span class="line">  4348 root      20   0 1657820  47516  21052 S   5.3  1.2  42:59.36 calico-node</span><br><span class="line">   963 root      20   0 1777988 141712  59968 S   4.3  3.5  41:34.55 kubelet</span><br><span class="line">  2266 root      20   0 10.696g  78684  19904 S   3.3  2.0  24:08.17 etcd</span><br><span class="line"> 40370 root      20   0  745236  17168   8388 R   2.3  0.4   0:00.07 calico</span><br><span class="line">  1121 root      20   0 1369820  85496  28388 S   1.7  2.1  16:06.78 dockerd</span><br><span class="line">  2214 root      20   0  754268  41856  19352 S   0.7  1.0   4:28.98 kube-scheduler</span><br><span class="line">  3057 root      20   0  737756  30136  12424 S   0.7  0.7   3:37.40 speaker</span><br><span class="line">     9 root      20   0       0      0      0 S   0.3  0.0   2:06.53 rcu_sched</span><br><span class="line">  3023 root      20   0  713096  12892   3636 S   0.3  0.3   0:05.56 containerd-shim</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">┌──[root@vms81.liruilongs.github.io]-[~]</span><br><span class="line">└─$</span><br></pre></td></tr></table></figure>
<p><strong><font color=orange>-b 显示全部的进程，默认只显示当前的页能容纳的进程</font></strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">┌──[root@vms81.liruilongs.github.io]-[~]</span><br><span class="line">└─<span class="variable">$top</span> -d 3 -n 1 -b</span><br><span class="line">top - 09:31:42 up 13:14,  1 user,  load average: 1.21, 0.70, 0.61</span><br><span class="line">Tasks: 215 total,   1 running, 214 sleeping,   0 stopped,   0 zombie</span><br><span class="line">%Cpu(s):  3.6 us,  3.6 sy,  0.0 ni, 92.9 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st</span><br><span class="line">KiB Mem :  4030172 total,  1078040 free,  1206028 used,  1746104 buff/cache</span><br><span class="line">KiB Swap:        0 total,        0 free,        0 used.  2469136 avail Mem</span><br><span class="line"></span><br><span class="line">   PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND</span><br><span class="line">   963 root      20   0 1777988 141592  59968 S  12.5  3.5  41:21.46 kubelet</span><br><span class="line"> 36906 root      20   0  157716   2124   1496 R  12.5  0.1   0:00.02 top</span><br><span class="line">  2195 root      20   0 1174904 380988  47392 S   6.2  9.5  95:55.13 kube-apiserver</span><br><span class="line">  2266 root      20   0 10.696g  78684  19904 S   6.2  2.0  24:00.85 etcd</span><br><span class="line">  3057 root      20   0  737756  30460  12424 S   6.2  0.8   3:36.32 speaker</span><br><span class="line">  4348 root      20   0 1657820  47304  21052 S   6.2  1.2  42:45.70 calico-node</span><br><span class="line">     1 root      20   0  191024   4028   2516 S   0.0  0.1   0:47.68 systemd</span><br><span class="line">     2 root      20   0       0      0      0 S   0.0  0.0   0:00.05 kthreadd</span><br><span class="line">     3 root      20   0       0      0      0 S   0.0  0.0   0:07.90 ksoftirqd/0</span><br><span class="line">     4 root      20   0       0      0      0 S   0.0  0.0   0:07.03 kworker/0:0</span><br><span class="line">    ........</span><br><span class="line">    31 root      20   0       0      0      0 S   0.0  0.0   0:00.00 kswapd0</span><br><span class="line">    32 root      25   5       0      0      0 S   0.0  0.0   0:00.00 ksmd</span><br><span class="line">    33 root      39  19       0      0      0 S   0.0  0.0   0:01.02 khugepaged</span><br><span class="line">    34 root       0 -20       0      0      0 S   0.0  0.0   0:00.00 crypto</span><br><span class="line">    42 root       0 -20       0      0      0 S   0.0  0.0   0:00.00 kthrotld</span><br><span class="line">    44 root       0 -20       0      0      0 S   0.0  0.0   0:00.00 kmpath_rdacd</span><br><span class="line">    45 root       0 -20       0      0      0 S   0.0  0.0   0:00.00 kpsmoused</span><br><span class="line">    46 root      20   0       0      0      0 S   0.0  0.0   0:00.00 kworker/0:2</span><br><span class="line">    ........</span><br><span class="line">   259 root       0 -20       0      0      0 S   0.0  0.0   0:00.00 scsi_tmf_4</span><br><span class="line">   260 root      20   0       0      0      0 S   0.0  0.0   0:00.00 scsi_eh_6</span><br><span class="line">   261 root       0 -20       0      0      0 S   0.0  0.0   0:00.00 scsi_tmf_6</span><br><span class="line">   262 root      20   0       0      0      0 S   0.0  0.0   0:00.00 scsi_eh_7</span><br><span class="line">   .........</span><br><span class="line">   273 root       0 -20       0      0      0 S   0.0  0.0   0:00.00 scsi_tmf_12</span><br><span class="line">   274 root      20   0       0      0      0 S   0.0  0.0   0:00.00 scsi_eh_13</span><br><span class="line">   275 root       0 -20       0      0      0 S   0.0  0.0   0:00.00 scsi_tmf_13</span><br><span class="line">   276 root      20   0       0      0      0 S   0.0  0.0   0:00.00 scsi_eh_14</span><br><span class="line">   277 root       0 -20       0      0      0 S   0.0  0.0   0:00.00 scsi_tmf_14</span><br><span class="line">   278 root      20   0       0      0      0 S   0.0  0.0   0:00.00 scsi_eh_15</span><br><span class="line">   279 root       0 -20       0      0      0 S   0.0  0.0   0:00.00 scsi_tmf_15</span><br><span class="line">  ...........</span><br><span class="line">  4297 root      20   0    4228    400    328 S   0.0  0.0   0:00.00 runsv</span><br><span class="line">  4313 root      20   0  713096  15340   4256 S   0.0  0.4   1:26.26 containerd-shim</span><br><span class="line">  4344 root      20   0 1141184  35748  16600 S   0.0  0.9   0:08.70 calico-node</span><br><span class="line">  4345 root      20   0 1583576  39300  18152 S   0.0  1.0   0:08.09 calico-node</span><br><span class="line">  4346 root      20   0 1141184  36808  17568 S   0.0  0.9   0:11.15 calico-node</span><br><span class="line">  4369 polkitd   20   0  745532  33232  14124 S   0.0  0.8   0:21.13 kube-controller</span><br><span class="line">  4526 root      20   0     756    260    196 S   0.0  0.0   0:24.63 bird6</span><br><span class="line">  4534 root      20   0     772    520    340 S   0.0  0.0   0:24.92 bird</span><br><span class="line"> 14142 root      20   0       0      0      0 S   0.0  0.0   0:00.00 kworker/u256:1</span><br><span class="line"> 21599 root      20   0       0      0      0 S   0.0  0.0   0:00.21 kworker/1:1</span><br><span class="line"> 26382 root      20   0       0      0      0 S   0.0  0.0   0:00.49 kworker/1:0</span><br><span class="line"> 35491 root      20   0       0      0      0 S   0.0  0.0   0:00.00 kworker/1:2</span><br><span class="line"> 77429 root      20   0  148316   5532   4232 S   0.0  0.1   0:00.50 sshd</span><br><span class="line"> 77553 root      20   0  120900   7556   1704 S   0.0  0.2   0:00.18 bash</span><br><span class="line"> 83235 root      20   0       0      0      0 S   0.0  0.0   0:01.76 kworker/u256:0</span><br><span class="line"> 87183 postfix   20   0   89648   4024   3012 S   0.0  0.1   0:00.01 pickup</span><br><span class="line">┌──[root@vms81.liruilongs.github.io]-[~]</span><br><span class="line">└─$</span><br></pre></td></tr></table></figure>


<h5 id="运行时top选项"><a href="#运行时top选项" class="headerlink" title="运行时top选项"></a><font color=purple>运行时top选项</font></h5><table>
<thead>
<tr>
<th align="left">运行时top</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><img src="https://img-blog.csdnimg.cn/b038f4ed3706400a8a01adb35ec26f3e.png" alt="在这里插入图片描述"></td>
</tr>
</tbody></table>
<p><strong><font color=royalblue>输入 A 后，显示为各个系统资源的最大消耗者，这个看不太懂，以后再研究</font></strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">┌──[root@vms81.liruilongs.github.io]-[~]</span><br><span class="line">└─<span class="variable">$top</span> -i</span><br><span class="line">1:Def - 09:40:01 up 13:22,  1 user,  load average: 0.17, 0.35, 0.47</span><br><span class="line">Tasks: 215 total,   1 running, 214 sleeping,   0 stopped,   0 zombie</span><br><span class="line">%Cpu(s): 11.6 us,  6.6 sy,  0.0 ni, 81.6 id,  0.0 wa,  0.0 hi,  0.2 si,  0.0 st</span><br><span class="line">KiB Mem :  4030172 total,  1076864 free,  1206808 used,  1746500 buff/cache</span><br><span class="line">KiB Swap:        0 total,        0 free,        0 used.  2468492 avail Mem</span><br><span class="line"></span><br><span class="line">1   PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND</span><br><span class="line">   2204 root      20   0  823728  98312  36136 S   6.3  2.4  47:55.47 kube-controller</span><br><span class="line">   4348 root      20   0 1657820  47444  21052 S   5.3  1.2  43:12.72 calico-node</span><br><span class="line">   1121 root      20   0 1369820  85496  28388 S   2.6  2.1  16:11.81 dockerd</span><br><span class="line">   2266 root      20   0 10.696g  78948  19904 S   2.6  2.0  24:15.45 etcd</span><br><span class="line">    973 root      20   0 1099192  43784  16860 S   1.0  1.1   4:37.63 containerd</span><br><span class="line">   2214 root      20   0  754268  41856  19352 S   0.7  1.0   4:30.34 kube-scheduler</span><br><span class="line">      1 root      20   0  191024   4028   2516 S   0.3  0.1   0:48.12 systemd</span><br><span class="line">2   PID   PPID     TIME+  %CPU %MEM  PR  NI S    VIRT    RES   UID COMMAND</span><br><span class="line">  83235      2   0:01.82   0.0  0.0  20   0 S       0      0     0 kworker/u256:0</span><br><span class="line">  77553  77429   0:00.20   0.0  0.2  20   0 S  120900   7556     0 bash</span><br><span class="line">  77429    966   0:00.71   0.0  0.1  20   0 S  148316   5532     0 sshd</span><br><span class="line">  43368   1085   0:00.02   0.0  0.1  20   0 S   89648   4024    89 pickup</span><br><span class="line">  40247      2   0:00.17   0.3  0.0  20   0 S       0      0     0 kworker/1:1</span><br><span class="line">  40239  77553   0:01.26   0.3  0.1  20   0 R  157720   2332     0 top                                      35491      2   0:00.00   0.0  0.0  20   0 S       0      0     0 kworker/1:2</span><br><span class="line">3   PID %MEM    VIRT    RES   CODE    DATA    SHR nMaj nDRT  %CPU COMMAND</span><br><span class="line">   2195  9.5 1174904 380988  60052 1052908  47392   33    0   8.9 kube-apiserver</span><br><span class="line">    963  3.5 1778244 141228  88848 1618204  59968  520    0   7.0 kubelet</span><br><span class="line">   2204  2.4  823728  98312  56280  708052  36136   33    0   6.3 kube-controller</span><br><span class="line">   1121  2.1 1369820  85496  57240 1239752  28388   34    0   2.6 dockerd</span><br><span class="line">   2266  2.0 10.696g  78948  11824  706828  19904    6    0   2.6 etcd</span><br><span class="line">   4348  1.2 1657820  47444  30688 1590736  21052    0    0   5.3 calico-node</span><br><span class="line">    973  1.1 1099192  43784  33752 1041340  16860  488    0   1.0 containerd</span><br><span class="line">   2214  1.0  754268  41856  23924  706288  19352   16    0   0.7 kube-scheduler</span><br><span class="line">4   PID   PPID   UID USER     RUSER    TTY          TIME+  %CPU %MEM S COMMAND</span><br><span class="line">    975      1    29 rpcuser  rpcuser  ?          0:00.01   0.0  0.0 S rpc.statd</span><br><span class="line">    567      1    32 rpc      rpc      ?          0:00.19   0.0  0.0 S rpcbind</span><br><span class="line">      1      0     0 root     root     ?          0:48.12   0.3  0.1 S systemd</span><br><span class="line">      2      0     0 root     root     ?          0:00.05   0.0  0.0 S kthreadd</span><br><span class="line">      3      2     0 root     root     ?          0:07.97   0.0  0.0 S ksoftirqd/0</span><br><span class="line">      4      2     0 root     root     ?          0:07.09   0.0  0.0 S kworker/0:0</span><br><span class="line">      5      2     0 root     root     ?          0:00.00   0.0  0.0 S kworker/0:0H</span><br><span class="line">      7      2     0 root     root     ?          0:01.09   0.0  0.0 S migration/0</span><br></pre></td></tr></table></figure>
<p><strong><font color=tomato>输入F时进入配置界面,通过界面显示可以配置详细信息</font></strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">┌──[root@vms81.liruilongs.github.io]-[~]</span><br><span class="line">└─<span class="variable">$top</span> -i</span><br><span class="line">top - 09:48:03 up 13:30,  1 user,  load average: 0.85, 0.64, 0.57</span><br><span class="line">Tasks: 215 total,   1 running, 214 sleeping,   0 stopped,   0 zombie</span><br><span class="line">%Cpu(s):  3.4 us,  3.4 sy,  0.0 ni, 93.1 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st</span><br><span class="line">KiB Mem :  4030172 total,  1076900 free,  1206184 used,  1747088 buff/cache</span><br><span class="line">KiB Swap:        0 total,        0 free,        0 used.  2469016 avail Mem</span><br><span class="line"></span><br><span class="line">   PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND</span><br><span class="line">  2204 root      20   0  823728  98312  36136 S  12.5  2.4  48:24.22 kube-controller</span><br><span class="line">   963 root      20   0 1778244 142228  59968 S   6.2  3.5  42:12.13 kubelet</span><br><span class="line">  2266 root      20   0 10.696g  79468  19904 S   6.2  2.0  24:29.30 etcd</span><br><span class="line">  4348 root      20   0 1657820  47396  21052 S   6.2  1.2  43:37.87 calico-node</span><br><span class="line"> 50999 root      20   0  157720   2200   1500 R   6.2  0.1   0:00.01 top</span><br><span class="line">Fields Management <span class="keyword">for</span> window 1:Def, whose current sort field is %CPU</span><br><span class="line">   Navigate with Up/Dn, Right selects <span class="keyword">for</span> move <span class="keyword">then</span> &lt;Enter&gt; or Left commits,</span><br><span class="line">   <span class="string">&#x27;d&#x27;</span> or &lt;Space&gt; toggles display, <span class="string">&#x27;s&#x27;</span> sets sort.  Use <span class="string">&#x27;q&#x27;</span> or &lt;Esc&gt; to end!</span><br><span class="line"></span><br><span class="line">* PID     = Process Id             SUPGIDS = Supp Groups IDs</span><br><span class="line">* USER    = Effective User Name    SUPGRPS = Supp Groups Names</span><br><span class="line">* PR      = Priority               TGID    = Thread Group Id</span><br><span class="line">* NI      = Nice Value             ENVIRON = Environment vars</span><br><span class="line">* VIRT    = Virtual Image (KiB)    vMj     = Major Faults delta</span><br><span class="line">* RES     = Resident Size (KiB)    vMn     = Minor Faults delta</span><br><span class="line">* SHR     = Shared Memory (KiB)    USED    = Res+Swap Size (KiB)</span><br><span class="line">* S       = Process Status         nsIPC   = IPC namespace Inode</span><br><span class="line">* %CPU    = CPU Usage              nsMNT   = MNT namespace Inode</span><br><span class="line">* %MEM    = Memory Usage (RES)     nsNET   = NET namespace Inode</span><br><span class="line">* TIME+   = CPU Time, hundredths   nsPID   = PID namespace Inode</span><br><span class="line">* COMMAND = Command Name/Line      nsUSER  = USER namespace Inode</span><br><span class="line">  PPID    = Parent Process pid     nsUTS   = UTS namespace Inode</span><br><span class="line">  UID     = Effective User Id</span><br><span class="line">  RUID    = Real User Id</span><br><span class="line">  RUSER   = Real User Name</span><br><span class="line">  SUID    = Saved User Id</span><br><span class="line">  SUSER   = Saved User Name</span><br><span class="line">  GID     = Group Id</span><br><span class="line">  GROUP   = Group Name</span><br><span class="line">  PGRP    = Process Group Id</span><br><span class="line">  TTY     = Controlling Tty</span><br><span class="line">  TPGID   = Tty Process Grp Id</span><br><span class="line">  SID     = Session Id</span><br><span class="line">  nTH     = Number of Threads</span><br><span class="line">  P       = Last Used Cpu (SMP)</span><br><span class="line">  TIME    = CPU Time</span><br><span class="line">  SWAP    = Swapped Size (KiB)</span><br><span class="line">  CODE    = Code Size (KiB)</span><br><span class="line">  DATA    = Data+Stack (KiB)</span><br><span class="line">  nMaj    = Major Page Faults</span><br><span class="line">  nMin    = Minor Page Faults</span><br><span class="line">  nDRT    = Dirty Pages Count</span><br><span class="line">  WCHAN   = Sleeping <span class="keyword">in</span> Function</span><br><span class="line">  Flags   = Task Flags &lt;sched.h&gt;</span><br><span class="line">  CGROUPS = Control Groups</span><br></pre></td></tr></table></figure>
<blockquote>
<p>**<font color=tomato>在配置统计信息时,所有当前被选择的字段将会以大写形式显示在Current Field. Order行,并在其名称旁出现一个星号(*),使用d来选择删除，使用s保存，q退出</font>**。</p>
</blockquote>
<p><strong><font color=purple>修改只留5个列名展示</font></strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Fields Management <span class="keyword">for</span> window 1:Def, whose current sort field is %CPU</span><br><span class="line">   Navigate with Up/Dn, Right selects <span class="keyword">for</span> move <span class="keyword">then</span> &lt;Enter&gt; or Left commits,</span><br><span class="line">   <span class="string">&#x27;d&#x27;</span> or &lt;Space&gt; toggles display, <span class="string">&#x27;s&#x27;</span> sets sort.  Use <span class="string">&#x27;q&#x27;</span> or &lt;Esc&gt; to end!</span><br><span class="line"></span><br><span class="line">* PID     = Process Id             SUPGIDS = Supp Groups IDs</span><br><span class="line">* USER    = Effective User Name    SUPGRPS = Supp Groups Names</span><br><span class="line">  PR      = Priority               TGID    = Thread Group Id</span><br><span class="line">  NI      = Nice Value             ENVIRON = Environment vars</span><br><span class="line">  VIRT    = Virtual Image (KiB)    vMj     = Major Faults delta</span><br><span class="line">  RES     = Resident Size (KiB)    vMn     = Minor Faults delta</span><br><span class="line">  SHR     = Shared Memory (KiB)    USED    = Res+Swap Size (KiB)</span><br><span class="line">  S       = Process Status         nsIPC   = IPC namespace Inode</span><br><span class="line">* %CPU    = CPU Usage              nsMNT   = MNT namespace Inode</span><br><span class="line">* %MEM    = Memory Usage (RES)     nsNET   = NET namespace Inode</span><br><span class="line">  TIME+   = CPU Time, hundredths   nsPID   = PID namespace Inode</span><br><span class="line">* COMMAND = Command Name/Line      nsUSER  = USER namespace Inode</span><br><span class="line">  PPID    = Parent Process pid     nsUTS   = UTS namespace Inode</span><br><span class="line">  UID     = Effective User Id</span><br><span class="line">  RUID    = Real User Id</span><br><span class="line">  RUSER   = Real User Name</span><br><span class="line">  SUID    = Saved User Id</span><br><span class="line">  SUSER   = Saved User Name</span><br><span class="line">  GID     = Group Id</span><br><span class="line">  GROUP   = Group Name</span><br><span class="line">  PGRP    = Process Group Id</span><br><span class="line">  TTY     = Controlling Tty</span><br><span class="line">.....</span><br></pre></td></tr></table></figure>
<p><strong><font color=blue>返回后发现只显示了5列</font></strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">top - 09:55:38 up 13:38,  1 user,  load average: 2.16, 1.20, 0.80</span><br><span class="line">Tasks: 215 total,   2 running, 213 sleeping,   0 stopped,   0 zombie</span><br><span class="line">%Cpu(s):  8.1 us,  4.7 sy,  0.0 ni, 87.0 id,  0.0 wa,  0.0 hi,  0.2 si,  0.0 st</span><br><span class="line">KiB Mem :  4030172 total,  1085120 free,  1197260 used,  1747792 buff/cache</span><br><span class="line">KiB Swap:        0 total,        0 free,        0 used.  2477772 avail Mem</span><br><span class="line"></span><br><span class="line">   PID USER      %CPU %MEM COMMAND</span><br><span class="line">  2195 root      14.3  9.5 kube-apiserver</span><br><span class="line">  2266 root       8.0  1.7 etcd</span><br><span class="line">  2204 root       6.0  2.4 kube-controller</span><br><span class="line">  4348 root       5.0  1.2 calico-node</span><br><span class="line">   963 root       4.7  3.5 kubelet</span><br><span class="line">  1121 root       1.3  2.1 dockerd</span><br><span class="line">  3057 root       0.7  0.8 speaker</span><br><span class="line">     9 root       0.3  0.0 rcu_sched</span><br><span class="line">   542 root       0.3  0.2 vmtoolsd</span><br><span class="line">   973 root       0.3  1.1 containerd</span><br><span class="line">  2214 root       0.3  1.0 kube-scheduler</span><br><span class="line"> 49390 root       0.3  0.0 kworker/1:2</span><br></pre></td></tr></table></figure>


<p><strong><font color=yellowgreen>top性能统计信息</font></strong></p>
<table>
<thead>
<tr>
<th align="left">top性能统计信息</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><img src="https://img-blog.csdnimg.cn/5911bab348f34e7e9b1b3eccbfa8e710.png" alt="在这里插入图片描述"></td>
</tr>
<tr>
<td align="left"><img src="https://img-blog.csdnimg.cn/764ddf0e6bd940ccb97a9cedc2e2f21f.png" alt="在这里插入图片描述"></td>
</tr>
</tbody></table>
<p><strong><font color=orange>%Cpu(s):  5.3 us(用户消耗),  2.8 sy(系统消耗),  0.0 ni(友好值进程消耗), 91.9 id(空闲CPU),  0.0 wa(等待I&#x2F;O的CPU时间),  0.0 hi(irp处理程序消耗的CPU时间),  0.0 si(softirq处理消耗),  0.0 st(这个不知道)</font></strong></p>
<p><strong><font color=chocolate>top - 09:26:22 up 13:08,  1 user,  load average: 0.56, 0.48, 0.55(1分钟、5分钟和15分钟的平均负载)</font></strong></p>
<p><strong><font color=tomato>列名 command为当前进程执行的命令，更多小伙伴可以结合命令列表理解</font></strong></p>
<h3 id="mpstat-多处理器统计"><a href="#mpstat-多处理器统计" class="headerlink" title="mpstat (多处理器统计)"></a><font color=royalblue>mpstat (多处理器统计)</font></h3><p><strong><font color=royalblue><code>mpstat</code>是一个相当简单的命令,向你展示<code>随着时间变化的CPU行为</code>。mpstat最大的优点是在统计信息的旁边显示时间,由此,你可以找出CPU使用率与时间的关系。</font></strong></p>
<blockquote>
<p>如果你有多个CPU或超线程CPU, mpstat还能够把CPU使用率按处理器进行区分,因此你可以发现与其他处理器相比,是否某个处理器做了更多的工作。你可以选择想要监控的单个处理器,也可以要求mpstat对所有的处理器都进行监控。</p>
</blockquote>
<h4 id="语法-2"><a href="#语法-2" class="headerlink" title="语法"></a><font color=yellowgreen>语法</font></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">┌──[root@liruilongs.github.io]-[~]</span><br><span class="line">└─$ mpstat -<span class="built_in">help</span></span><br><span class="line">用法: mpstat [ 选项 ] [ &lt;时间间隔&gt; [ &lt;次数&gt; ] ]</span><br><span class="line">选项:</span><br><span class="line">[ -A ] [ -u ] [ -V ] [ -I &#123; SUM | CPU | SCPU | ALL &#125; ]</span><br><span class="line">[ -P &#123; &lt;cpu&gt; [,...] | ON | ALL &#125; ]</span><br><span class="line">┌──[root@liruilongs.github.io]-[~]</span><br><span class="line">└─$</span><br></pre></td></tr></table></figure>
<h4 id="CPU性能相关的选项-2"><a href="#CPU性能相关的选项-2" class="headerlink" title="CPU性能相关的选项"></a><font color=purple>CPU性能相关的选项</font></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mpstat -P &#123; cpu | ALL&#125; | delay [ count ]]</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th align="left">CPU性能相关的选项</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><img src="https://img-blog.csdnimg.cn/9c66abfe6b57493daf9a6f468f0b8422.png" alt="在这里插入图片描述"></td>
</tr>
</tbody></table>
<p><strong><font color=blue>使用-P监控0所在的CPU</font></strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">┌──[root@liruilongs.github.io]-[~]</span><br><span class="line">└─$ mpstat  -P 0</span><br><span class="line">Linux 3.10.0-693.el7.x86_64 (liruilongs.github.io)      2022年01月15日  _x86_64_        (2 CPU)</span><br><span class="line"></span><br><span class="line">11时31分09秒  CPU    %usr   %nice    %sys %iowait    %irq   %soft  %steal  %guest  %gnice   %idle</span><br><span class="line">11时31分09秒    0    0.53    0.00    0.53    0.06    0.00    0.06    0.00    0.00    0.00   98.82</span><br><span class="line">┌──[root@liruilongs.github.io]-[~]</span><br><span class="line">└─$ mpstat  -P 1</span><br><span class="line">Linux 3.10.0-693.el7.x86_64 (liruilongs.github.io)      2022年01月15日  _x86_64_        (2 CPU)</span><br><span class="line"></span><br><span class="line">11时31分13秒  CPU    %usr   %nice    %sys %iowait    %irq   %soft  %steal  %guest  %gnice   %idle</span><br><span class="line">11时31分13秒    1    0.52    0.00    0.53    0.06    0.00    0.05    0.00    0.00    0.00   98.84</span><br><span class="line">┌──[root@liruilongs.github.io]-[~]</span><br><span class="line">└─$</span><br></pre></td></tr></table></figure>
<p><strong><font color=red>监控所有的CPU</font></strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">┌──[root@liruilongs.github.io]-[~]</span><br><span class="line">└─$ mpstat  -P ALL</span><br><span class="line">Linux 3.10.0-693.el7.x86_64 (liruilongs.github.io)      2022年01月15日  _x86_64_        (2 CPU)</span><br><span class="line"></span><br><span class="line">11时35分17秒  CPU    %usr   %nice    %sys %iowait    %irq   %soft  %steal  %guest  %gnice   %idle</span><br><span class="line">11时35分17秒  all    0.53    0.00    0.53    0.06    0.00    0.06    0.00    0.00    0.00   98.83</span><br><span class="line">11时35分17秒    0    0.53    0.00    0.53    0.06    0.00    0.06    0.00    0.00    0.00   98.82</span><br><span class="line">11时35分17秒    1    0.52    0.00    0.52    0.06    0.00    0.05    0.00    0.00    0.00   98.84</span><br><span class="line">┌──[root@liruilongs.github.io]-[~]</span><br><span class="line">└─$</span><br></pre></td></tr></table></figure>
<p><strong><font color=seagreen>监控3次，间隔1秒</font></strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">┌──[root@liruilongs.github.io]-[~]</span><br><span class="line">└─$ mpstat  -P 0 1 3</span><br><span class="line">Linux 3.10.0-693.el7.x86_64 (liruilongs.github.io)      2022年01月15日  _x86_64_        (2 CPU)</span><br><span class="line"></span><br><span class="line">11时33分15秒  CPU    %usr   %nice    %sys %iowait    %irq   %soft  %steal  %guest  %gnice   %idle</span><br><span class="line">11时33分16秒    0    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00</span><br><span class="line">11时33分17秒    0    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00</span><br><span class="line">11时33分18秒    0    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00</span><br><span class="line">平均时间:    0    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00</span><br><span class="line">┌──[root@liruilongs.github.io]-[~]</span><br><span class="line">└─$</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left">CPU统计信息</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><img src="https://img-blog.csdnimg.cn/6a2231f374f5491e9e4a16bd61bba23c.png" alt="在这里插入图片描述"></td>
</tr>
</tbody></table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">┌──[root@liruilongs.github.io]-[~]</span><br><span class="line">└─$ mpstat  -P ALL 1 2</span><br><span class="line">Linux 3.10.0-693.el7.x86_64 (liruilongs.github.io)      2022年01月15日  _x86_64_        (2 CPU)</span><br><span class="line"></span><br><span class="line">11时37分52秒  CPU    %usr   %nice    %sys %iowait    %irq   %soft  %steal  %guest  %gnice   %idle</span><br><span class="line">11时37分53秒  all    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00</span><br><span class="line">11时37分53秒    0    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00</span><br><span class="line">11时37分53秒    1    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00</span><br><span class="line"></span><br><span class="line">11时37分53秒  CPU    %usr   %nice    %sys %iowait    %irq   %soft  %steal  %guest  %gnice   %idle</span><br><span class="line">11时37分54秒  all    0.51    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00   99.49</span><br><span class="line">11时37分54秒    0    1.02    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00   98.98</span><br><span class="line">11时37分54秒    1    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00</span><br><span class="line"></span><br><span class="line">平均时间:  CPU    %usr   %nice    %sys %iowait    %irq   %soft  %steal  %guest  %gnice   %idle</span><br><span class="line">平均时间:  all    0.26    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00   99.74</span><br><span class="line">平均时间:    0    0.51    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00   99.49</span><br><span class="line">平均时间:    1    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00</span><br><span class="line">┌──[root@liruilongs.github.io]-[~]</span><br><span class="line">└─$</span><br></pre></td></tr></table></figure>
<h3 id="sar-系统活动报告"><a href="#sar-系统活动报告" class="headerlink" title=" sar (系统活动报告)"></a><font color=blue> sar (系统活动报告)</font></h3><p><strong><font color=green>sar是一种低开销的、记录系统执行情况信息的方法</font></strong></p>
<blockquote>
<p><code>sar</code>命令可以用于记录性能信息,回放之前的记录信息,以及显示当前系统的实时信息。sar命令的输出可以进行格式化,使之易于导入数据库,或是输送给其他Linux命令进行处理。</p>
</blockquote>
<p><strong><font color=amber>如果没有命令，可以启动服务看看</font></strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">┌──[root@liruilongs.github.io]-[/usr/lib/systemd/system]</span><br><span class="line">└─$ <span class="built_in">pwd</span></span><br><span class="line">/usr/lib/systemd/system</span><br><span class="line">┌──[root@liruilongs.github.io]-[/usr/lib/systemd/system]</span><br><span class="line">└─$ cat sysstat.service</span><br><span class="line"><span class="comment"># /usr/lib/systemd/system/sysstat.service</span></span><br><span class="line"><span class="comment"># (C) 2012 Peter Schiffer (pschiffe &lt;at&gt; redhat.com)</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># sysstat-10.1.5 systemd unit file:</span></span><br><span class="line"><span class="comment">#        Insert a dummy record in current daily data file.</span></span><br><span class="line"><span class="comment">#        This indicates that the counters have restarted from 0.</span></span><br><span class="line"></span><br><span class="line">[Unit]</span><br><span class="line">Description=Resets System Activity Logs</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=oneshot</span><br><span class="line">RemainAfterExit=yes</span><br><span class="line">User=root</span><br><span class="line">ExecStart=/usr/lib64/sa/sa1 --boot</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br><span class="line"></span><br><span class="line">┌──[root@liruilongs.github.io]-[/usr/lib/systemd/system]</span><br><span class="line">└─$ systemctl status  sysstat.service</span><br><span class="line">● sysstat.service - Resets System Activity Logs</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/sysstat.service; enabled; vendor preset: enabled)</span><br><span class="line">   Active: active (exited) since Wed 2021-10-13 01:53:41 CST; 1 weeks 3 days ago</span><br><span class="line"> Main PID: 584 (code=exited, status=0/SUCCESS)</span><br><span class="line">   CGroup: /system.slice/sysstat.service</span><br><span class="line"></span><br><span class="line">Oct 13 01:53:41 liruilongs.github.io systemd[1]: Starting Resets System Activity Logs...</span><br><span class="line">Oct 13 01:53:41 liruilongs.github.io systemd[1]: Started Resets System Activity Logs.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="语法-3"><a href="#语法-3" class="headerlink" title="语法"></a><font color=chocolate>语法</font></h4><p><strong><font color=plum>命令帮助文档</font></strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">┌──[root@liruilongs.github.io]-[~]</span><br><span class="line">└─$ sar  -h</span><br><span class="line">用法: sar [ 选项 ] [ &lt;时间间隔&gt; [ &lt;次数&gt; ] ]</span><br><span class="line">主选项和报告：</span><br><span class="line">        -b      I/O 和传输速率信息状况</span><br><span class="line">        -B      分页状况</span><br><span class="line">        -d      块设备状况</span><br><span class="line">        -F [ MOUNT ]</span><br><span class="line">                Filesystems statistics</span><br><span class="line">        -H      交换空间利用率</span><br><span class="line">        -I &#123; &lt;中断&gt; | SUM | ALL | XALL &#125;</span><br><span class="line">                中断信息状况</span><br><span class="line">        -m &#123; &lt;关键词&gt; [,...] | ALL &#125;</span><br><span class="line">                电源管理统计信息</span><br><span class="line">                关键字:</span><br><span class="line">                CPU     CPU 频率</span><br><span class="line">                FAN     风扇速度</span><br><span class="line">\t\tFREQ\tCPU 平均时钟频率</span><br><span class="line">                IN      输入电压</span><br><span class="line">                TEMP    设备温度</span><br><span class="line">\t\tUSB\t连接的USB 设备</span><br><span class="line">        -n &#123; &lt;关键词&gt; [,...] | ALL &#125;</span><br><span class="line">                网络统计信息</span><br><span class="line">                关键词可以是：</span><br><span class="line">                DEV     网卡</span><br><span class="line">                EDEV    网卡 (错误)</span><br><span class="line">                NFS     NFS 客户端</span><br><span class="line">                NFSD    NFS 服务器</span><br><span class="line">                SOCK    Sockets (套接字)        (v4)</span><br><span class="line">                IP      IP 流   (v4)</span><br><span class="line">                EIP     IP 流   (v4) (错误)</span><br><span class="line">                ICMP    ICMP 流 (v4)</span><br><span class="line">                EICMP   ICMP 流 (v4) (错误)</span><br><span class="line">                TCP     TCP 流  (v4)</span><br><span class="line">                ETCP    TCP 流  (v4) (错误)</span><br><span class="line">                UDP     UDP 流  (v4)</span><br><span class="line">                SOCK6   Sockets (套接字)        (v6)</span><br><span class="line">                IP6     IP 流   (v6)</span><br><span class="line">                EIP6    IP 流   (v6) (错误)</span><br><span class="line">                ICMP6   ICMP 流 (v6)</span><br><span class="line">                EICMP6  ICMP 流 (v6) (错误)</span><br><span class="line">                UDP6    UDP 流  (v6)</span><br><span class="line">        -q      队列长度和平均负载</span><br><span class="line">        -r      内存利用率</span><br><span class="line">        -R      内存状况</span><br><span class="line">        -S      交换空间利用率</span><br><span class="line">        -u [ ALL ]</span><br><span class="line">                CPU 利用率</span><br><span class="line">        -v      Kernel table 状况</span><br><span class="line">        -w      任务创建与系统转换统计信息</span><br><span class="line">        -W      交换信息</span><br><span class="line">        -y      TTY 设备状况</span><br><span class="line">┌──[root@liruilongs.github.io]-[~]</span><br><span class="line">└─$</span><br></pre></td></tr></table></figure>
<p><strong><font color=seagreen>红帽8没有，需要自己开启，红帽7有，下面为历史监控的存放位置</font></strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">┌──[root@liruilongs.github.io]-[/]</span><br><span class="line">└─$ <span class="built_in">cd</span> /var/<span class="built_in">log</span>/sa</span><br><span class="line">┌──[root@liruilongs.github.io]-[/var/<span class="built_in">log</span>/sa]</span><br><span class="line">└─$ ls</span><br><span class="line">sa01  sa03  sa04  sa05  sa06  sa08  sa09  sa13  sa14  sa23  sa24  sa30  sar03</span><br></pre></td></tr></table></figure>
<h4 id="CPU性能相关的选项-3"><a href="#CPU性能相关的选项-3" class="headerlink" title="CPU性能相关的选项"></a><font color=green>CPU性能相关的选项</font></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$sar</span> [options] [] delay [ count ]]</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong><font color=brown>尽管sar的报告涉及Linux多个不同领域,其统计数据有两种不同的形式。一组统计数据是采样时的瞬时值。另一组则是自上一次采样后的变化值。</font></strong></p>
</blockquote>
<table>
<thead>
<tr>
<th align="left">sar命令行选项</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><img src="https://img-blog.csdnimg.cn/eece517f17664fc18928e2233ab5acd5.png" alt="在这里插入图片描述"></td>
</tr>
</tbody></table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">┌──[root@liruilongs.github.io]-[~]</span><br><span class="line">└─$ sar</span><br><span class="line">Linux 3.10.0-693.el7.x86_64 (liruilongs.github.io)      2022年01月15日  _x86_64_        (2 CPU)</span><br><span class="line"></span><br><span class="line">11时00分01秒     CPU     %user     %nice   %system   %iowait    %steal     %idle</span><br><span class="line">11时10分01秒     all      0.12      0.00      0.12      0.00      0.00     99.76</span><br><span class="line">11时20分01秒     all      0.11      0.00      0.11      0.00      0.00     99.78</span><br><span class="line">11时30分01秒     all      0.13      0.00      0.13      0.00      0.00     99.73</span><br><span class="line">11时40分01秒     all      0.11      0.00      0.11      0.00      0.00     99.78</span><br><span class="line">平均时间:     all      0.12      0.00      0.12      0.00      0.00     99.76</span><br></pre></td></tr></table></figure>
<p>**<font color=brown>使用  -o 选项输出到指定文件</font>**，</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">┌──[root@liruilongs.github.io]-[~]</span><br><span class="line">└─$ sar -o /tmp/apache_tets 1 3</span><br><span class="line">Linux 3.10.0-693.el7.x86_64 (liruilongs.github.io)      2022年01月15日  _x86_64_        (2 CPU)</span><br><span class="line"></span><br><span class="line">18时02分24秒     CPU     %user     %nice   %system   %iowait    %steal     %idle</span><br><span class="line">18时02分25秒     all      0.00      0.00      0.56      0.00      0.00     99.44</span><br><span class="line">18时02分26秒     all      0.00      0.00      0.00      0.00      0.00    100.00</span><br><span class="line">18时02分27秒     all      0.00      0.00      0.00      0.00      0.00    100.00</span><br><span class="line">平均时间:     all      0.00      0.00      0.18      0.00      0.00     99.82</span><br></pre></td></tr></table></figure>
<p><strong><font color=purple>通过 -f 来查看指定文件信息</font></strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">┌──[root@liruilongs.github.io]-[~]</span><br><span class="line">└─$ sar -f /tmp/apache_tets</span><br><span class="line">Linux 3.10.0-693.el7.x86_64 (liruilongs.github.io)      2022年01月15日  _x86_64_        (2 CPU)</span><br><span class="line"></span><br><span class="line">18时02分24秒     CPU     %user     %nice   %system   %iowait    %steal     %idle</span><br><span class="line">18时02分25秒     all      0.00      0.00      0.56      0.00      0.00     99.44</span><br><span class="line">18时02分26秒     all      0.00      0.00      0.00      0.00      0.00    100.00</span><br><span class="line">18时02分27秒     all      0.00      0.00      0.00      0.00      0.00    100.00</span><br><span class="line">平均时间:     all      0.00      0.00      0.18      0.00      0.00     99.82</span><br><span class="line">┌──[root@liruilongs.github.io]-[~]</span><br><span class="line">└─$</span><br></pre></td></tr></table></figure>
<p><strong><font color=orange>使用 -P指定CPU</font></strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">┌──[root@liruilongs.github.io]-[~]</span><br><span class="line">└─$ sar -P 0  | head -5</span><br><span class="line">Linux 3.10.0-693.el7.x86_64 (liruilongs.github.io)      2022年01月15日  _x86_64_        (2 CPU)</span><br><span class="line"></span><br><span class="line">11时00分01秒     CPU     %user     %nice   %system   %iowait    %steal     %idle</span><br><span class="line">11时10分01秒       0      0.12      0.00      0.12      0.01      0.00     99.75</span><br><span class="line">11时20分01秒       0      0.12      0.00      0.11      0.00      0.00     99.77</span><br><span class="line">┌──[root@liruilongs.github.io]-[~]</span><br><span class="line">└─$</span><br></pre></td></tr></table></figure>
<p><strong><font color=amber>-w  上下文切换次数</font></strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">┌──[root@liruilongs.github.io]-[~]</span><br><span class="line">└─$ sar -P 0 -w | head -5</span><br><span class="line">Linux 3.10.0-693.el7.x86_64 (liruilongs.github.io)      2022年01月15日  _x86_64_        (2 CPU)</span><br><span class="line"></span><br><span class="line">11时00分01秒    proc/s   cswch/s</span><br><span class="line">11时10分01秒      0.92    313.58</span><br><span class="line">11时20分01秒      0.81    316.81</span><br><span class="line">┌──[root@liruilongs.github.io]-[~]</span><br><span class="line">└─$</span><br></pre></td></tr></table></figure>
<p><strong><font color=chocolate>-q  运行队列长度和平均负载</font></strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">┌──[root@liruilongs.github.io]-[~]</span><br><span class="line">└─$ sar  -q | head -5</span><br><span class="line">Linux 3.10.0-693.el7.x86_64 (liruilongs.github.io)      2022年01月15日  _x86_64_        (2 CPU)</span><br><span class="line"></span><br><span class="line">11时00分01秒   runq-sz  plist-sz   ldavg-1   ldavg-5  ldavg-15   blocked</span><br><span class="line">11时10分01秒         0       219      0.01      0.08      0.53         0</span><br><span class="line">11时20分01秒         0       219      0.03      0.03      0.29         0</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th align="left">sar CPU统计信息</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><img src="https://img-blog.csdnimg.cn/7b73246a5fc74509a58de3705af9bd16.png" alt="在这里插入图片描述"></td>
</tr>
</tbody></table>
<h3 id="procinfo-从-x2F-proc文件系统显示信息"><a href="#procinfo-从-x2F-proc文件系统显示信息" class="headerlink" title=" procinfo (从&#x2F;proc文件系统显示信息)"></a><font color=blue> procinfo (从&#x2F;proc文件系统显示信息)</font></h3><p><strong><font color=red><code>procinfo</code>也为系统整体信息特性提供总览，它提供的有些信息与vmstat相同,但它还会给出CPU从每个设备接收的中断数量</font></strong></p>
<h4 id="CPU性能相关的选项-4"><a href="#CPU性能相关的选项-4" class="headerlink" title="CPU性能相关的选项"></a>CPU性能相关的选项</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$procinfo</span> [-f] [-d] [-D] [-n sec] [-f file]</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong><font color=amber>嗯，这个命令没找到，以后再研究下</font></strong></p>
</blockquote>
<h3 id="gnome-system-monitor"><a href="#gnome-system-monitor" class="headerlink" title="gnome-system-monitor"></a><font color=orange>gnome-system-monitor</font></h3><blockquote>
<p><strong><font color=green>嗯，用SSH连接的机器，这个也以后再研究下</font></strong></p>
</blockquote>
<h3 id="oprofile"><a href="#oprofile" class="headerlink" title="oprofile"></a>oprofile</h3><p><strong><font color=chocolate>oprofile是性能工具包,它利用几乎所有现代处理器都有的性能计数器来跟踪系统整体以及单个进程中CPU时间的消耗情况。除了测量CPU周期消耗在哪里之外, oprofile还可以测量关于CPU执行的非常底层的信息。</font></strong></p>
<blockquote>
<p>根据由底层处理器支持的事件,它可以测量的内容包括: cache缺失、分支预测错误和内存引用,以及浮点操作。profile不会记录发生的每个事件,相反,它与处理器性能硬件一起工作,每count个事件采样一次,这里的count是一个数值,由用户在启动oprofile时指定。count的值越·低,结果的准确度越高,而oprofile的开销越大。若count保持在一个合理的数值,那么,oprofile不仅运行开销非常低,并且还能以令人惊讶的准确性描述系统性能。</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">┌──[root@liruilongs.github.io]-[~]</span><br><span class="line">└─$ yum -y install oprofile</span><br></pre></td></tr></table></figure>

<h4 id="CPU性能相关的选项-5"><a href="#CPU性能相关的选项-5" class="headerlink" title="CPU性能相关的选项"></a>CPU性能相关的选项</h4><p><code>oprofile</code>实际上是一组协同工作的组件,用于收集<code>CPU</code>性能统计信息。<code>oprofile</code>主要有三个部分:</p>
<ul>
<li><code>oprofile</code>核心模块控制处理器并允许和禁止采样,</li>
<li><code>oprofile</code>后台模块收集采样,并将它们保存到磁盘。</li>
<li><code>oprofile</code>报告工具获取收集的采样,并向用户展示它们与在系统上运行的应用程序的关系</li>
</ul>
<blockquote>
<p><code>oprofile</code>工具包使用<code>opcontrol</code>命令中。<code>opcontrol</code>命令用于选择处理器采样的事件并启动采样。进行后台控制时,你可以使用如下命令行调用</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$opcontrol</span> [--start] [--stop] [--dump]</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">┌──[root@liruilongs.github.io]-[~]</span><br><span class="line">└─$ opcontrol -s</span><br><span class="line">ATTENTION: Use of opcontrol is discouraged.  Please see the man page <span class="keyword">for</span> operf.</span><br><span class="line">No vmlinux file specified. You must specify the correct vmlinux file, e.g.</span><br><span class="line">opcontrol --vmlinux=/path/to/vmlinux</span><br><span class="line">If you <span class="keyword">do</span> not have a vmlinux file, use</span><br><span class="line">opcontrol --no-vmlinux</span><br><span class="line">Enter opcontrol --<span class="built_in">help</span> <span class="keyword">for</span> full options</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这个貌似有些复杂，先不看了，之后遇到有机会再学习</p>
</blockquote>
<p>关于CPU的性能调优工具就学到这里，欢迎小伙伴指正</p>
</div><div class="article-licensing box"><div class="licensing-title"><p>关于Linux性能调优中系统CPU监测信息统计的一些笔记</p><p><a href="https://liruilongs.github.io/2022/01/15/rhca/RH442_BPF/CPU/关于 Linux性能调优中系统CPU监测信息统计的一些笔记/">https://liruilongs.github.io/2022/01/15/rhca/RH442_BPF/CPU/关于 Linux性能调优中系统CPU监测信息统计的一些笔记/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><a href="https://liruilongs.github.io"><p>山河已无恙</p></a></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2022-01-15</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2024-08-16</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="icon" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a><a class="icon" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="recommend-area"><div class="recommend-post"><span class="is-size-6 has-text-grey has-mr-7"># 相关文章</span><br><span>  1.<a class="is-size-6" href="/2025/04/11/%E5%BE%85%E5%8F%91%E5%B8%83/Linux-%E8%BF%9B%E7%A8%8B%E5%86%85%E5%AD%98%E7%9B%91%E6%8E%A7%EF%BC%9ALinux-%E5%86%85%E5%AD%98%E8%B0%83%E4%BC%98%E4%B9%8B%E8%BF%9B%E7%A8%8B%E5%86%85%E5%AD%98%E6%B7%B1%E5%BA%A6%E7%9B%91%E6%8E%A7/" target="_blank">Linux 进程内存监控：Linux 内存调优之进程内存深度监控</a><br></span><span>  2.<a class="is-size-6" href="/2025/04/11/%E5%BE%85%E5%8F%91%E5%B8%83/Linux%20%E7%B3%BB%E7%BB%9F%E5%86%85%E5%AD%98%E7%9B%91%E6%8E%A7%EF%BC%9ALinux%20%E5%86%85%E5%AD%98%E8%B0%83%E4%BC%98%E4%B9%8B%E7%B3%BB%E7%BB%9F%E5%86%85%E5%AD%98%E5%85%A8%E9%9D%A2%E7%9B%91%E6%8E%A7/" target="_blank">Linux 系统内存监控：Linux 内存调优之系统内存全面监控</a><br></span><span>  3.<a class="is-size-6" href="/2025/04/08/%E5%BE%85%E5%8F%91%E5%B8%83/%E8%AE%A4%E8%AF%86%20Linux%20%E5%86%85%E5%AD%98%E6%9E%84%E6%88%90%EF%BC%9ALinux%20%E5%86%85%E5%AD%98%E8%B0%83%E4%BC%98%E4%B9%8B%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E4%B8%8E%E7%89%A9%E7%90%86%E5%86%85%E5%AD%98/" target="_blank">认识 Linux 内存构成：Linux 内存调优之虚拟内存与物理内存</a><br></span><span>  4.<a class="is-size-6" href="/2025/04/07/%E5%BE%85%E5%8F%91%E5%B8%83/Linux%20%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98%E4%B9%8BCPU%E8%B0%83%E4%BC%98%E8%AE%A4%E7%9F%A5/" target="_blank">Linux 性能调优之CPU调优认知</a><br></span><span>  5.<a class="is-size-6" href="/2024/08/23/rhca/RH442_BPF/CPU/Linux%20%E6%80%A7%E8%83%BD%E8%A7%82%E6%B5%8B%E4%B9%8B%E5%B9%B3%E5%9D%87%E8%B4%9F%E8%BD%BD/" target="_blank">Linux 性能观测之平均负载</a><br></span><span>  6.<a class="is-size-6" href="/2024/04/01/rhca/RH442_BPF/BPF/Linux-BPF%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E4%B9%8B%E5%9F%BA%E4%BA%8EBCC%E5%B7%A5%E5%85%B7%E6%B8%85%E5%8D%95%E6%A3%80%E6%9F%A5/" target="_blank">Linux BPF性能分析之基于BCC工具清单检查</a><br></span><span>  7.<a class="is-size-6" href="/2024/03/30/rhca/RH442_BPF/BPF/Linux-%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E6%96%B9%E6%B3%95%E8%AE%BA%E4%BB%8B%E7%BB%8D-%E4%B8%9A%E5%8A%A1%E8%B4%9F%E8%BD%BD%E7%94%BB%E5%83%8F%E3%80%81%E4%B8%8B%E9%92%BB%E5%88%86%E6%9E%90%E3%80%81USE%E6%96%B9%E6%B3%95%E8%AE%BA%EF%BC%8C%E6%A3%80%E6%9F%A5%E6%B8%85%E5%8D%95/" target="_blank">Linux 常见性能分析方法论介绍(业务负载画像、下钻分析、USE方法论，检查清单)</a><br></span><span>  8.<a class="is-size-6" href="/2024/03/08/Linux/Linux%E7%BD%91%E7%BB%9C/Linux%20%E7%BD%91%E7%BB%9C%E9%9A%A7%E9%81%93%E6%8A%80%E6%9C%AF%20VXLAN%20%E8%AE%A4%E7%9F%A5/" target="_blank">Linux 网络隧道技术 VXLAN 认知</a><br></span></div><div class="recommend-post"><span class="is-size-6 has-text-grey has-mr-7"># 推荐文章</span><br><span>  1.<a class="is-size-6" href="/2021/08/27/K8s/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E3%80%8AKubernetes%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97-%E4%BB%8EDocker%E5%88%B0Kubernetes%E5%AE%9E%E8%B7%B5%E5%85%A8%E6%8E%A5%E8%A7%A6%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" target="_blank">《Kubernetes权威指南:从Docker到Kubernetes实践全接触》读书笔记</a><br></span><span>  2.<a class="is-size-6" href="/2025/04/15/Linux-%E9%99%90%E5%88%B6%E5%86%85%E5%AD%98%E4%BD%BF%E7%94%A8%E9%87%8F%EF%BC%9ALinux-%E5%86%85%E5%AD%98%E8%B0%83%E4%BC%98%E4%B9%8B%E9%99%90%E5%88%B6%E8%BF%9B%E7%A8%8B%E3%80%81%E7%B3%BB%E7%BB%9F%E7%BA%A7%E5%88%AB%E5%86%85%E5%AD%98%E4%BD%BF%E7%94%A8%E9%87%8F/" target="_blank">Linux 限制内存使用量：Linux 内存调优之限制进程、系统级别内存使用量</a><br></span><span>  3.<a class="is-size-6" href="/2022/03/11/Go/GO%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%E4%B9%8B%E5%87%BD%E6%95%B0%E4%B8%8E%E6%96%B9%E6%B3%95/" target="_blank">GO语言实战之函数与方法</a><br></span><span>  4.<a class="is-size-6" href="/2023/09/06/Go/GO%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B5%8C%E5%85%A5%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%B1%9E%E6%80%A7%E9%9A%90%E7%A7%81%E5%AE%9A%E4%B9%89/" target="_blank">GO语言实战之嵌入类型和属性隐私定义</a><br></span><span>  5.<a class="is-size-6" href="/2022/08/28/Go/GO%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%E4%B9%8B%E6%8E%A5%E5%8F%A3%E5%AE%9E%E7%8E%B0%E4%BA%8E%E6%96%B9%E6%B3%95%E9%9B%86/" target="_blank">GO语言实战之接口实现于方法集</a><br></span><span>  6.<a class="is-size-6" href="/2023/09/19/Go/GO%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B9%B6%E5%8F%91%E5%92%8C-goroutine/" target="_blank">GO语言实战之并发和 goroutine</a><br></span></div></div><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/social-share.js/1.0.16/css/share.min.css"><div class="social-share"></div><script src="https://cdnjs.loli.net/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="/img/alipay%EF%BF%A5.png" alt="支付宝"></span></a><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/img/wechat%EF%BF%A5.png" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2022/01/16/K8s/%E6%8F%92%E4%BB%B6/Kubernetes%E9%9B%86%E7%BE%A4%E7%9B%91%E6%8E%A7%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88kube-prometheus-stack(prometheus-operator)helm%E5%AE%89%E8%A3%85/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Kubernetes集群监控解决方案kube-prometheus-stack(prometheus-operator)helm安装</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2022/01/09/K8s/API%20%E5%AD%A6%E4%B9%A0/%E5%85%B3%E4%BA%8E%20Kubernetes%E4%B8%ADNetworkPolicy(%E7%BD%91%E7%BB%9C%E7%AD%96%E7%95%A5)%E6%96%B9%E9%9D%A2%E7%9A%84%E4%B8%80%E4%BA%9B%E7%AC%94%E8%AE%B0/"><span class="level-item">关于 Kubernetes中NetworkPolicy(网络策略)方面的一些笔记</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--><div class="card"><div class="card-content"><div class="title is-5">评论</div><div id="comment-container"></div><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/gitalk/1.6.0/gitalk.css"><script> $.getScript('/js/gitalk.min.js', function () { 
            var gitalk = new Gitalk({
            language:'zh-CN',
            id: 'b3b1e6bdc76b5349736f90f4a0ecbcb3',
            repo: 'blog_comment',
            owner: 'LIRUILONGS',
            clientID: '9fdc9739266d48d5f62e',
            clientSecret: 'c1cc33697d099a2197650ec9dadcb16bd4904655',
            admin: ["LIRUILONGS"],
            createIssueManually: true,
            distractionFreeMode: true,
            perPage: 10,
            pagerDirection: 'last',
            proxy: 'https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token',
            
            enableHotKey: true,
            isLocked: false
        })
        gitalk.render('comment-container')});</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="is-flex is-mobile" href="#写在前面"><span class="mr-2">1</span><span>写在前面</span></a></li><li><a class="is-flex is-mobile" href="#CPU相关的基础指标"><span class="mr-2">2</span><span>CPU相关的基础指标</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#运行队列统计"><span class="mr-2">2.1</span><span>运行队列统计</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#平均负载"><span class="mr-2">2.1.1</span><span>平均负载</span></a></li></ul></li><li><a class="is-flex is-mobile" href="#上下文切换"><span class="mr-2">2.2</span><span>上下文切换</span></a></li><li><a class="is-flex is-mobile" href="#中断"><span class="mr-2">2.3</span><span> 中断</span></a></li><li><a class="is-flex is-mobile" href="#CPU使用率"><span class="mr-2">2.4</span><span> CPU使用率</span></a></li></ul></li><li><a class="is-flex is-mobile" href="#CPU监控信息统计"><span class="mr-2">3</span><span>CPU监控信息统计 </span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#vmstat-虚拟内存统计"><span class="mr-2">3.1</span><span>vmstat (虚拟内存统计)</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#语法"><span class="mr-2">3.1.1</span><span>语法</span></a></li><li><a class="is-flex is-mobile" href="#CPU性能相关的选项"><span class="mr-2">3.1.2</span><span>CPU性能相关的选项</span></a></li></ul></li><li><a class="is-flex is-mobile" href="#top-3-0-X-版本"><span class="mr-2">3.2</span><span>top(3.0.X 版本)</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#语法-1"><span class="mr-2">3.2.1</span><span>语法</span></a></li><li><a class="is-flex is-mobile" href="#运行时top选项"><span class="mr-2">3.2.2</span><span>运行时top选项</span></a></li></ul></li><li><a class="is-flex is-mobile" href="#mpstat-多处理器统计"><span class="mr-2">3.3</span><span>mpstat (多处理器统计)</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#语法-2"><span class="mr-2">3.3.1</span><span>语法</span></a></li><li><a class="is-flex is-mobile" href="#CPU性能相关的选项-2"><span class="mr-2">3.3.2</span><span>CPU性能相关的选项</span></a></li></ul></li><li><a class="is-flex is-mobile" href="#sar-系统活动报告"><span class="mr-2">3.4</span><span> sar (系统活动报告)</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#语法-3"><span class="mr-2">3.4.1</span><span>语法</span></a></li><li><a class="is-flex is-mobile" href="#CPU性能相关的选项-3"><span class="mr-2">3.4.2</span><span>CPU性能相关的选项</span></a></li></ul></li><li><a class="is-flex is-mobile" href="#procinfo-从-x2F-proc文件系统显示信息"><span class="mr-2">3.5</span><span> procinfo (从/proc文件系统显示信息)</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#CPU性能相关的选项-4"><span class="mr-2">3.5.1</span><span>CPU性能相关的选项</span></a></li></ul></li><li><a class="is-flex is-mobile" href="#gnome-system-monitor"><span class="mr-2">3.6</span><span>gnome-system-monitor</span></a></li><li><a class="is-flex is-mobile" href="#oprofile"><span class="mr-2">3.7</span><span>oprofile</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#CPU性能相关的选项-5"><span class="mr-2">3.7.1</span><span>CPU性能相关的选项</span></a></li></ul></li></ul></li></ul></div></div><style>.menu-list > li > a.is-active + .menu-list { display: block; }.menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="profile"><div class="card-content"><nav class=""><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7.jpg" alt="山河已无恙"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">山河已无恙</p><p class="is-size-6 is-block">爱自己，是终生浪漫的开始</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>中国·呼和浩特</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">440</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">144</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">191</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://mp.weixin.qq.com/s?__biz=MzkyNjIxNTYwMw==&amp;mid=2247496480&amp;idx=1&amp;sn=a9971fed3962ef2a1aeda1f0bda65f86&amp;chksm=c2380ffcf54f86eaba8daac6caca72a70f38e61a8d25dc2a66d3a17b87c02530e326dcaea14b#rd" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/LIRUILONGS"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="CSDN" href="https://liruilong.blog.csdn.net/"><i class="fa fa-code"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Email" href="mailto:1224965096@qq.com"><i class="fa fa-envelope"></i></a></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://liruilong.blog.csdn.net/?t=1&amp;type=blog" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">CSDN</span></span><span class="level-right"><span class="level-item tag">liruilong.blog.csdn.net</span></span></a></li><li><a class="level is-mobile" href="https://www.cnblogs.com/liruilong/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">博客园</span></span><span class="level-right"><span class="level-item tag">www.cnblogs.com</span></span></a></li><li><a class="level is-mobile" href="https://github.com/LIRUILONGS" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Githup</span></span><span class="level-right"><span class="level-item tag">github.com</span></span></a></li><li><a class="level is-mobile" href="https://gitee.com/liruilonger" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">码云</span></span><span class="level-right"><span class="level-item tag">gitee.com</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">最新评论</h3><span class="body_hot_comment">加载中，最新评论有1分钟缓存...</span></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-04-15T01:51:14.000Z">2025-04-15</time></p><p class="title"><a href="/2025/04/15/Linux-%E9%99%90%E5%88%B6%E5%86%85%E5%AD%98%E4%BD%BF%E7%94%A8%E9%87%8F%EF%BC%9ALinux-%E5%86%85%E5%AD%98%E8%B0%83%E4%BC%98%E4%B9%8B%E9%99%90%E5%88%B6%E8%BF%9B%E7%A8%8B%E3%80%81%E7%B3%BB%E7%BB%9F%E7%BA%A7%E5%88%AB%E5%86%85%E5%AD%98%E4%BD%BF%E7%94%A8%E9%87%8F/">Linux 限制内存使用量：Linux 内存调优之限制进程、系统级别内存使用量</a></p><p class="categories"><a href="/categories/test3/">test3</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-04-13T14:50:54.000Z">2025-04-13</time></p><p class="title"><a href="/2025/04/13/%E5%BE%85%E5%8F%91%E5%B8%83/%E8%B0%B7%E6%AD%8C68%E9%A1%B5%E7%99%BD%E7%9A%AE%E4%B9%A6%E8%A7%A3%E5%AF%86%EF%BC%9A%E6%8F%90%E7%A4%BA%E5%B7%A5%E7%A8%8B%E5%A6%82%E4%BD%95%E9%87%8D%E5%A1%91AI%E4%BA%A4%E4%BA%92%E9%80%BB%E8%BE%91/">谷歌68页白皮书解密：提示工程如何重塑AI交互逻辑</a></p><p class="categories"><a href="/categories/LLM/">LLM</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-04-11T11:38:12.000Z">2025-04-11</time></p><p class="title"><a href="/2025/04/11/%E5%BE%85%E5%8F%91%E5%B8%83/Linux-%E8%BF%9B%E7%A8%8B%E5%86%85%E5%AD%98%E7%9B%91%E6%8E%A7%EF%BC%9ALinux-%E5%86%85%E5%AD%98%E8%B0%83%E4%BC%98%E4%B9%8B%E8%BF%9B%E7%A8%8B%E5%86%85%E5%AD%98%E6%B7%B1%E5%BA%A6%E7%9B%91%E6%8E%A7/">Linux 进程内存监控：Linux 内存调优之进程内存深度监控</a></p><p class="categories"><a href="/categories/Linux/">Linux</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-04-11T11:38:12.000Z">2025-04-11</time></p><p class="title"><a href="/2025/04/11/%E5%BE%85%E5%8F%91%E5%B8%83/Linux%20%E7%B3%BB%E7%BB%9F%E5%86%85%E5%AD%98%E7%9B%91%E6%8E%A7%EF%BC%9ALinux%20%E5%86%85%E5%AD%98%E8%B0%83%E4%BC%98%E4%B9%8B%E7%B3%BB%E7%BB%9F%E5%86%85%E5%AD%98%E5%85%A8%E9%9D%A2%E7%9B%91%E6%8E%A7/">Linux 系统内存监控：Linux 内存调优之系统内存全面监控</a></p><p class="categories"><a href="/categories/Linux/">Linux</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-04-07T23:32:10.000Z">2025-04-08</time></p><p class="title"><a href="/2025/04/08/%E5%BE%85%E5%8F%91%E5%B8%83/%E8%AE%A4%E8%AF%86%20Linux%20%E5%86%85%E5%AD%98%E6%9E%84%E6%88%90%EF%BC%9ALinux%20%E5%86%85%E5%AD%98%E8%B0%83%E4%BC%98%E4%B9%8B%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E4%B8%8E%E7%89%A9%E7%90%86%E5%86%85%E5%AD%98/">认识 Linux 内存构成：Linux 内存调优之虚拟内存与物理内存</a></p><p class="categories"><a href="/categories/Linux/">Linux</a></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/AIGC/"><span class="level-start"><span class="level-item">AIGC</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/AdaFace/"><span class="level-start"><span class="level-item">AdaFace</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Ajax/"><span class="level-start"><span class="level-item">Ajax</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Ansible/"><span class="level-start"><span class="level-item">Ansible</span></span><span class="level-end"><span class="level-item tag">23</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/AppCube/"><span class="level-start"><span class="level-item">AppCube</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/BPF/"><span class="level-start"><span class="level-item">BPF</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Bind9/"><span class="level-start"><span class="level-item">Bind9</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/CI-CD/"><span class="level-start"><span class="level-item">CI/CD</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/CSS/"><span class="level-start"><span class="level-item">CSS</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Ceph/"><span class="level-start"><span class="level-item">Ceph</span></span><span class="level-end"><span class="level-item tag">22</span></span></a></li><a class="level is-mobile is-marginless" href="/categories/"><span class="level-start"><span class="level-item">查看全部&gt;&gt;</span></span></a></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2025/04/"><span class="level-start"><span class="level-item">四月 2025</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2025/03/"><span class="level-start"><span class="level-item">三月 2025</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2025/02/"><span class="level-start"><span class="level-item">二月 2025</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2025/01/"><span class="level-start"><span class="level-item">一月 2025</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2024/12/"><span class="level-start"><span class="level-item">十二月 2024</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><a class="level is-mobile is-marginless" href="/archives/"><span class="level-start"><span class="level-item">查看全部&gt;&gt;</span></span></a></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Kubernetes/"><span class="tag">Kubernetes</span><span class="tag is-grey-lightest">98</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux/"><span class="tag">Linux</span><span class="tag is-grey-lightest">55</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Ansible/"><span class="tag">Ansible</span><span class="tag is-grey-lightest">25</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Ceph/"><span class="tag">Ceph</span><span class="tag is-grey-lightest">22</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag is-grey-lightest">15</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Docker/"><span class="tag">Docker</span><span class="tag is-grey-lightest">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Git/"><span class="tag">Git</span><span class="tag is-grey-lightest">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JAVA/"><span class="tag">JAVA</span><span class="tag is-grey-lightest">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8D%8E%E4%B8%BA%E4%BA%91/"><span class="tag">华为云</span><span class="tag is-grey-lightest">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CPU/"><span class="tag">CPU</span><span class="tag is-grey-lightest">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LLM/"><span class="tag">LLM</span><span class="tag is-grey-lightest">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Mysql/"><span class="tag">Mysql</span><span class="tag is-grey-lightest">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BPF/"><span class="tag">BPF</span><span class="tag is-grey-lightest">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Go/"><span class="tag">Go</span><span class="tag is-grey-lightest">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/OpenShift/"><span class="tag">OpenShift</span><span class="tag is-grey-lightest">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%A8%8B%E5%BA%8F%E4%BA%BA%E7%94%9F/"><span class="tag">程序人生</span><span class="tag is-grey-lightest">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/DNS/"><span class="tag">DNS</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/OKD/"><span class="tag">OKD</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%91%84%E5%BD%B1%E6%9B%9D%E5%85%89/"><span class="tag">摄影曝光</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/selenium/"><span class="tag">selenium</span><span class="tag is-grey-lightest">4</span></a></div></div><div class="field is-grouped is-grouped-multiline"><a class="tags has-addons" href="/tags/"><span class="tag">查看全部&gt;&gt;</span></a></div></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div><!--!--><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.png" alt="山河已无恙" height="28"></a><p class="size-small"><span>&copy; 2025 山河已无恙</span>  Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a> &amp; <a href="https://github.com/removeif/hexo-theme-amazing" target="_blank">Amazing</a> <br><span>© <a href="http://www.beian.miit.gov.cn/" target="_blank">备案中</a><br></span><span>© 版权说明：[本网站所有内容均收集于互联网或自己创作,<br />&nbsp;&nbsp;&nbsp;&nbsp;方便于网友与自己学习交流，如有侵权，请<a href="/message" target="_blank">留言</a>，立即处理]<br /></span><span><span id="statistic-times">loading...</span><script>function createTime(time) {
            var n = new Date(time);
            now.setTime(now.getTime() + 250),
                days = (now - n) / 1e3 / 60 / 60 / 24,
                dnum = Math.floor(days),
                hours = (now - n) / 1e3 / 60 / 60 - 24 * dnum,
                hnum = Math.floor(hours),
            1 == String(hnum).length && (hnum = "0" + hnum),
                minutes = (now - n) / 1e3 / 60 - 1440 * dnum - 60 * hnum,
                mnum = Math.floor(minutes),
            1 == String(mnum).length && (mnum = "0" + mnum),
                seconds = (now - n) / 1e3 - 86400 * dnum - 3600 * hnum - 60 * mnum,
                snum = Math.round(seconds),
            1 == String(snum).length && (snum = "0" + snum),
                document.getElementById("statistic-times").innerHTML = "❤️本站自 <strong>"+time.split(" ")[0].replace(/\//g,".")+"</strong> 已运行 <strong>" + dnum + "</strong> 天 <strong>" + hnum + "</strong> 小时 <strong>" + mnum + "</strong> 分 <strong>" + snum + "</strong> 秒！❤️";
        }var now = new Date();setInterval("createTime('2021/6/26 21:27:00')", 250,"");</script><br></span><div class="size-small"><span>❤️感谢 <strong><span id="busuanzi_value_site_uv">99+</span></strong> 小伙伴的 <strong><span id="busuanzi_value_site_pv">99+</span></strong> 次光临！❤️</span></div></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/removeif/hexo-theme-amazing"><i class="fab fa-github"></i></a></p></div><div class="sideMusic"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="/js/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script><meting-js style="width: auto;height: 2000px;" server="netease" type="playlist" id="2364053447" theme="#2980b9" loop="all" autoplay="false" order="list" storageName="aplayer-setting" lrctype="0" list-max-height="400px" fixed="true"></meting-js></div></div></div></div></footer><script src="https://cdnjs.loli.net/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" async></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><!--!--><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><script src="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.8/js/lightgallery.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/KaTeX/0.11.1/katex.min.css"><script src="https://cdnjs.loli.net/ajax/libs/KaTeX/0.11.1/katex.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/KaTeX/0.11.1/contrib/auto-render.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/KaTeX/0.11.1/contrib/mhchem.js" defer></script><script>window.addEventListener("load", function() {
            document.querySelectorAll('[role="article"] > .content').forEach(function(element) {
                renderMathInElement(element);
            });
        });</script><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdnjs.loli.net/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><div id="outdated"><h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly.&amp;npsb;<a id="btnUpdateBrowser" target="_blank" rel="noopener" href="http://outdatedbrowser.com/">Update my browser now </a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">×</a></p></div><script src="https://cdnjs.loli.net/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js" defer></script><script>window.addEventListener("load", function () {
            outdatedBrowser({
                bgColor: '#f25648',
                color: '#ffffff',
                lowerThan: 'object-fit' // display on IE11 or below
            });
        });</script><!--!--><script src="/js/main.js" defer></script><script>$.getScript('/js/comment-issue-data.js',function(){loadIssueData('9fdc9739266d48d5f62e','c1cc33697d099a2197650ec9dadcb16bd4904655','LIRUILONGS','blog_comment',false);})</script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.js"></script><script type="text/javascript">var pjax = new Pjax({
            elements: "a",//代表点击链接就更新
            selectors: [  //代表要更新的节点
                ".section",
                "title"
            ],
            cache: true,
            cacheBust:false
        })

        function loadBusuanzi(){
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js", function () {});
        }

        function loadMathJax() { //加载mathjax
            $.getScript("//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML", function () {
                MathJax.Hub.Config({ tex2jax: { inlineMath: [['$', '$'], ['\(', '\)']] } });
                var math = document.getElementsByClassName("entry-content")[0];
                MathJax.Hub.Queue(["Typeset", MathJax.Hub, math]);
            });
        };

        // 开始 PJAX 执行的函数
        document.addEventListener('pjax:send', function () {
        });
        
        // PJAX 完成之后执行的函数，可以和上面的重载放在一起
        document.addEventListener('pjax:complete', function () {
            $(".section").css({opacity:1});
            if(true){
                $.getScript('/js/comment-issue-data.js',function(){loadIssueData('9fdc9739266d48d5f62e','c1cc33697d099a2197650ec9dadcb16bd4904655','LIRUILONGS','blog_comment',false);});
            }
            if(false){
                loadMathJax();
            }
            loadMainJs(jQuery, window.moment, window.ClipboardJS, window.IcarusThemeSettings);
            loadBackTop();
            loadBusuanzi();
            if(typeof loadBanner == 'function'){
                loadBanner();
            }
        });</script></body></html>