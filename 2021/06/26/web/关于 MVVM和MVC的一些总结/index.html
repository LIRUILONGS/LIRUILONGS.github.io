<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>关于 MVVM和MVC的一些总结 - 山河已无恙</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="山河已无恙"><meta name="msapplication-TileImage" content="https://cdn.jsdelivr.net/gh/removeif/removeif-demo@latest/img/favicon.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="山河已无恙"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta description="爱自己，是终生浪漫的开始    ——王尔德"><meta property="og:type" content="blog"><meta property="og:title" content="山河已无恙"><meta property="og:url" content="https://liruilong.blog.csdn.net/?t=1&amp;type=blog"><meta property="og:site_name" content="山河已无恙"><meta property="og:description" content="爱自己，是终生浪漫的开始    ——王尔德"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://liruilong.blog.csdn.net/img/头像.jpg"><meta property="article:published_time" content="2021-06-26T04:00:00.000Z"><meta property="article:modified_time" content="2023-06-21T11:25:59.154Z"><meta property="article:author" content="LIRUILONGS"><meta property="article:tag" content="面试"><meta property="article:tag" content="系统架构"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/头像.jpg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://liruilongs.github.io/2021/06/26/web/%E5%85%B3%E4%BA%8E%20MVVM%E5%92%8CMVC%E7%9A%84%E4%B8%80%E4%BA%9B%E6%80%BB%E7%BB%93/"},"headline":"山河已无恙","image":[],"datePublished":"2021-06-26T04:00:00.000Z","dateModified":"2023-06-21T11:25:59.154Z","author":{"@type":"Person","name":"山河已无恙"},"description":"爱自己，是终生浪漫的开始    ——王尔德"}</script><link rel="canonical" href="https://liruilongs.github.io/2021/06/26/web/%E5%85%B3%E4%BA%8E%20MVVM%E5%92%8CMVC%E7%9A%84%E4%B8%80%E4%BA%9B%E6%80%BB%E7%BB%93/"><link rel="alternate" href="/path/to/atom.xml" title="山河已无恙" type="application/atom+xml"><link rel="icon" href="https://cdn.jsdelivr.net/gh/removeif/removeif-demo@latest/img/favicon.png"><meta name="referrer" content="no-referrer-when-downgrade"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.12.0/css/all.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/highlight.js/9.12.0/styles/dracula.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.12.0/css/all.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css?family=Ubuntu:400,600|Source+Code+Pro|Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Microsoft YaHei:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&amp;amp;subset=latin,latin-ext|Inconsolata|Itim|Lobster.css"><script src="https://cdnjs.loli.net/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="/js/globalUtils.js"></script><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?3f06f2b732a5b1034c989f74e28d0eea";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css"><script src="https://cdnjs.loli.net/ajax/libs/pace/1.0.2/pace.min.js"></script><meta name="generator" content="Hexo 5.4.2"></head><body class="is-3-column has-navbar-fixed-top"><nav class="navbar navbar-main is-fixed-top"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.png" alt="山河已无恙" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/media">影音</a><a class="navbar-item" href="/album">相册</a><a class="navbar-item" href="/friend">友链</a><a class="navbar-item" href="/self-talking">生活小记</a><a class="navbar-item" href="/message">留言墙</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Gitee" href="https://gitee.com/liruilonger"><i class="fab fa-git-square fa-1x"></i></a><a class="navbar-item" target="_blank" rel="noopener" title="GitHub" href="https://github.com/LIRUILONGS"><i class="fab fa-github fa-1x"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul fa-1x"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search fa-1x"></i></a><a class="navbar-item" id="night-nav" title="Night Mode" href="javascript:;"><i class="fas fa-moon fa-1x" id="night-icon"></i></a></div></div></div></nav><script type="text/javascript" src="/js/theme-setting.js"></script><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-9-widescreen"><!--!--><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2021-06-26  <a class="commentCountImg" href="/2021/06/26/web/%E5%85%B3%E4%BA%8E%20MVVM%E5%92%8CMVC%E7%9A%84%E4%B8%80%E4%BA%9B%E6%80%BB%E7%BB%93/#comment-container"><span class="display-none-class">e78e13db6373e43c3c8d3427d0997816</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="e78e13db6373e43c3c8d3427d0997816">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>44 分钟  <i class="fas fa-pencil-alt"> </i>6.6 k</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">关于 MVVM和MVC的一些总结</h1><div class="content"><p>爱自己，是终生浪漫的开始    ——王尔德</p>
<span id="more"></span>

<hr>
<h3 id="我的需求："><a href="#我的需求：" class="headerlink" title="我的需求："></a><font color="#F56C6C">我的需求</font>：</h3><ul>
<li>晚上练完车之后,之前参考我毕设的一个小伙伴要答辩，问了我一个问题，结果问的一下不知道怎么回答….<code>以下是我回答他问题的答案</code>：所以在回答完他之后，赶快整理一波..<br><img src="https://img-blog.csdnimg.cn/20210609154655919.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Nhbmhld3V5YW5n,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li>
</ul>
<h3 id="我需要解决的问题："><a href="#我需要解决的问题：" class="headerlink" title="我需要解决的问题："></a><font color="#F56C6C">我需要解决的问题</font>：</h3><ul>
<li>MVVM到底是个什么东东，和前后端有没有关系，它和MVC区别是啥，有啥优势。</li>
</ul>
<h3 id="我是这样做的："><a href="#我是这样做的：" class="headerlink" title="我是这样做的："></a><font color="#F56C6C">我是这样做的</font>：</h3><ul>
<li><code>百度</code>寻找，找了一些关于MVVM论文，博客，梳理出自己的答案。</li>
<li>嗯，资源比较零散，准确性有待考量，**<font color="#F56C6C">所以不对的地方请小伙伴指出来</font>**。</li>
</ul>
<p><strong><font color="009688">爱自己，是终生浪漫的开始    ——王尔德</font></strong></p>
<hr>
<p>对于MVC想来小伙伴是不陌生的，但是网上的资源各抒己见….我也整的晕头转向的，可能有<code>前(后)端</code>,有<code>胖(瘦)客户端</code>框架应用，具体还有细微的差异。</p>
<blockquote>
<p>If you put ten software architects into a room and have them discuss what the Model-View-Controller pattern is, you will end up with twelve different opinions. –Josh Smith[^3]<br>如果你把10个软件架构师放在一个房间里，让他们讨论模型-视图-控制器模式是什么，你最终会得到12种不同的观点。</p>
</blockquote>
<p><strong><font color="#67C23A">我们这里讨论的<code>MVC</code>和<code>MVVM</code>是以<code>BS架构</code>为基础的<code>java Web</code>中的应用，因为博主只接触了这方面的，关于网上提到的<code>IOS</code>和一些<code>客户端</code>框架，没有接触过。本博客也不涉及。所以如果听都没听过<code>java Web</code>的,或者没了解过 <code>Web框架</code>的小伙伴个人感觉这篇博客不太适合，不太建议继续读下去。</font></strong></p>
<p>我们先看看MVVM吧！嘻嘻  ^ _ ^</p>
<h4 id="MVVM-名词解释："><a href="#MVVM-名词解释：" class="headerlink" title="MVVM 名词解释："></a>MVVM 名词解释：</h4><p>   <code>MVVM</code>是<code>Model-View-ViewModel</code>的简写。它本质上就是<code>MVC</code>的改进版。MVVM 就是将其中的<code>View的状态和行为抽象化</code>，让我们将<code>视图 UI </code>和<code>业务逻辑</code>分开。当然这些事<code>ViewModel</code>已经帮我们做了，它可以取出 <code>Model</code> 的数据同时帮忙处理<code>View</code>中由于需要展示内容而涉及的业务逻辑。<code>MVVM(Model-View-ViewModel)框架</code>的由来便是<code>MVP(Model-View-Presenter)模式</code>与<code>WPF</code>结合的应用方式时发展演变过来的一种<code>新型架构框架</code>。它立足于原有<code>MVP</code>框架并且把<code>WPF</code>的新特性糅合进去，以应对客户日益复杂的需求变化。<a href="%5B%E7%99%BE%E5%BA%A6%E7%99%BE%E7%A7%91%5Bdb/ol%5D.https://baike.baidu.com/item/MVVM/96310?fr=aladdin%5D(https://baike.baidu.com/item/MVVM/96310?fr=aladdin)">^1</a></p>
<p> <code>MVVM</code>upright&#x3D;1.5 <code>MVVM(Model–view–viewmodel)</code>是一种<code>软件架构模式</code>。 <code>MVVM</code>有助于将<code>图形用户界面的开发</code>与<code>business logic</code>(业务逻辑)或<code>后端逻辑</code>(数据模型)的开发<code>分离</code>开来，这是通过置标语言或GUI代码实现的。MVVM的视图模型是一个<code>值转换器</code>， 这意味着<code>视图模型</code>负责从<code>模型</code>中<code>暴露(转换)数据对象</code>，以便轻<code>松管理和呈现对象</code>。在这方面，<code>视图模型</code>比<code>视图</code>做得更多，并且处理大部分<code>视图</code>的<code>显示逻辑</code>。 视图模型可以实现<code>中介者模式</code>，组织对视图所支持的用例集(Model)的后端逻辑的访问。 <a href="%5B%E4%B8%8A%E6%B5%B7%E7%A7%91%E5%88%9B%E6%95%B0%E6%8D%AE%E8%B5%84%E6%BA%90%E4%B8%AD%E5%BF%83%5Bdb/ol%5D.http://www.sstir.cn/search/list?keyword=MVVM%5D(http://www.sstir.cn/search/list?keyword=MVVM)">^2</a></p>
<h4 id="MVVM-的发展历程"><a href="#MVVM-的发展历程" class="headerlink" title="MVVM 的发展历程"></a>MVVM 的发展历程</h4><p><code>MVVM</code>是<code>马丁·福勒</code>的<code>PM(Presentation Model)设计模式</code>的变体。<code>MVVM</code>以相同的方式<code>抽象</code>出<code>视图的状态和行为</code>， 但<code>PM</code>以<code>不依赖于特定用户界面平台</code>的方式抽象出<code>视图</code>(建立了视图模型)。 <code>MVVM</code>和<code>PM</code>都来自<code>MVC模式</code>。 <code>MVVM</code>由微软架构师<code>Ken Cooper</code>和<code>Ted Peters</code>开发，通过利用<code>WPF(微软.NET图形系统)</code>和<code>Silverlight(WPF的互联网应用衍生品)</code>的特性来<code>简化用户界面</code>的<code>事件驱动程式设计</code>。 微软的WPF和Silverlight架构师之一<code>John Gossman</code>于<code>2005</code>年在他的博客上发表了<code>MVVM</code>。 MVVM也被称为<code>model-view-binder</code>，特别是在不涉及<code>.NET平台</code>的实现中。ZK(Java写的一个Web应用框架)和KnockoutJS(一个JavaScript库)使用<code>model-view-binder</code>。<a href="%5B%E4%B8%8A%E6%B5%B7%E7%A7%91%E5%88%9B%E6%95%B0%E6%8D%AE%E8%B5%84%E6%BA%90%E4%B8%AD%E5%BF%83%5Bdb/ol%5D.http://www.sstir.cn/search/list?keyword=MVVM%5D(http://www.sstir.cn/search/list?keyword=MVVM)">^2</a></p>
<h4 id="MVC到MVVM-的发展历程"><a href="#MVC到MVVM-的发展历程" class="headerlink" title="MVC到MVVM 的发展历程"></a>MVC到MVVM 的发展历程</h4><p>二十世纪八十年代<code>施乐帕克实验室</code>提出了<code>MVC</code>的概念，MVC的全称即<code>Model-View-Controller</code>，是<code>模型(model)</code>一<code>视图(view)</code>一<code>控制器(controller)</code>的缩写“…，它是一种<code>客户端软件开发框架</code>[^4]，个人认为，其实最初的<code>Java Web</code>来讲，<code>Model2</code> 即<code>Servlet+JSP</code>也是用的这个结构，所以说<code>Model2(MVC)</code>它相对已<code>Model1(Javabean+JSP)</code>来讲，已经实现了<code>View</code>和<code>Model</code>的部分解耦，但是不彻底，如图</p>
<p><img src="https://img-blog.csdnimg.cn/2021061311434099.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Nhbmhld3V5YW5n,size_16,color_FFFFFF,t_70" alt="Java Web Model2"><br><code>view</code>负责显示，<code>Model</code>负责提供数据，<code>Controller</code>负责逻辑的处理，其实现的流程大概是：[^4]</p>
<ul>
<li>(1)当用户需要发送请求时，首先是在View发送请求，由View将指令传送到Controller里。</li>
<li>(2)Controller接收到指令之后，先完成所需要的业务逻辑，然后要求Model根据业务逻辑改变状态；</li>
<li>(3)Model将新的数据发送给View，View则根据新的数据更新视图，从而用户的请求得到反馈。</li>
</ul>
<p>在<code>MVC</code>框架中，<code>View</code>是可以直接访问<code>Model</code>的(JSP里直接使用<code>JavaBean</code>)，这样不可避免的使<code>View</code>里面也需要包括一些<code>业务逻辑</code>，同时还需要<code>Model</code>保持不变，而<code>Model</code>又对应着多个不同的显示(View)，所以总体说来就是，在MVC模型里面，<code>Model</code>不依赖<code>View</code>，但是<code>View</code>是依赖于<code>Model</code>的。这样就导致更改<code>View</code>比较困难，且<code>业务无法重用</code>。从而<code>MVC框架的弊端就显现出来</code>[^4]，这也是使用<code>Servlet+JSP</code>的弊端。前后端没有解耦，<code>Model</code>与<code>View</code>没有彻底解耦。</p>
<p><strong><font color="#F56C6C">为了解决<code>MVC</code>框架中<code>View</code>和<code>Model</code>联系紧密的问题，开发者研究开发了<code>MVP</code>模式，</font></strong><code>MVP</code>即<code>Model-View-Presenter</code>，即把MVC中的<code>Controller</code>换成了<code>Presenter</code>，目的就是为了完全切断<code>View</code>跟<code>Model</code>之间的联系，在MVP模式中，<code>View</code>负责<code>视图的显示</code>,<code>Model</code>负责<code>提供数据</code>，<code>Presenter</code>则主要负责<code>逻辑业务</code>的处理。[^4] </p>
<p><strong><font color="#009688">有些<code>SSM+JSP</code>的开发方式也是基于这种，我之前的公司就这样写，前后端不分离使用的<code>JSP</code>，但是交互全是<code>Ajax</code>，传递的全是<code>JSON</code>，也没有返回<code>ModelAndView</code>，个人感觉这里其实是使用了<code>MVP</code>的模式。以前后端<code>不分离</code>的方式<code>丢弃模板引擎的服务端渲染</code>，追求前后端<code>分离</code>中<code>彻底解耦了View和Model</code>。看上去怪怪的，其实有时候项目开发更多的是和<code>业务</code>、<code>体量</code>、<code>成本</code>、<code>效益</code>等有关系，综合考虑，选最合适，不一定要按照<code>常规</code>的<code>构建方式</code>考虑，比如正常思考可能<code>不分离</code>是为了<code>服务端渲染</code>，<code>首屏快载</code>，<code>SEO</code>等，分离是为了<code>降低服务器压力</code>，<code>接口复用</code>，前后端<code>工作职责解耦</code>.</font></strong></p>
<p>对于<code>SSM</code>+<code>模板引擎</code>的开发方式</p>
<ul>
<li>如何是返回<code>Modelandview</code>的话，那<code>缺点</code>就是<code>后端路由</code>，前后端没有<code>彻底解耦</code>，优点就是<code>服务端渲染</code>，返回的是整个<code>构建好的页面</code>.</li>
<li>如果返回<code>JSON</code>的话，那优点就是<code>前后端彻底解耦</code>，<code>接口复用</code>，但是没有利用模板引擎的<code>服务端渲染</code>。</li>
<li>如果体量很大，那前后端是两个人写，那使用<code>Modelandview</code>的方式就很麻烦，需要<code>接口协调</code>，而且工作<code>职责不清晰</code>。会浪费好多时间。JSON就方便很多。</li>
<li>如果体量不是他大，前端的东西也不是特别多，考虑成本问题，前后端一个人写，那<code>Modelandview</code>就很合适，节省了接口协调，对接等时间成本问题。</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20210613133912429.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Nhbmhld3V5YW5n,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>在<code>MVP</code>框架中，<code>View</code>无法直接再与<code>Model</code>交互，<code>View</code>和<code>Model</code>之间的通信都是通过<code>Presenter</code>进行完成的，所有的交互都在<code>Presenter</code>内部发生，即由<code>Presenter</code>充当了<code>View</code>和<code>Model</code>的桥梁，做到<code>View-Model</code>之间通信的<code>完全隔离</code>。<code>Presenter</code>完全把<code>Model</code>和<code>View</code>进行分离，将主要的程序逻辑放在Presenter里实现。[^4]</p>
<p>**<font color="##00C5CD"><code>Presenter</code>与<code>View</code>也是没有直接相关联的，而是通过已定义的<code>接口进行交互</code></font>**，从而使得在变更<code>View</code>的时候可以保持<code>Presenter</code>的不变，即保证了<code>Presenter</code>的可重用性(接口的复用性)，同时也解决了<code>MVC</code>框架中的<code>View</code>和<code>Model</code>关联紧密的问题。[^4]</p>
<p>这样之后，对于<code>Web</code>项目来讲，前后端都是通过数据进行交互，那<code>路由</code>怎么处理，前端只能实现简单一部分跳转，涉及到复杂的需要<code>通过Controller(Presenter)来处理的路由</code>怎么处理，或者带状态的路由如何跳转，即<code>Controller无法控制使用那个View</code>。个人感觉，<code>Web</code>系统来讲这个时候<code>完全的前后端分离</code>可能不是适合所有项目，而且分离之后留给<code>前端要解决的问题</code>可能也不是能很好的解决。所以这个时候….</p>
<p>有个叫<code>Rod Johnson </code>带领一帮人搞出的<code>SpringMVC</code>，不像桌面应用的<code>MVC</code>， 这里的Model没法给View 发通知。[^5]也不像<code>MVP</code>, 这里的<code>Controller </code>可以控制<code>View</code>来实现路由。即前后后端没有分离，但是将原来的<code>View的构建解耦</code>了。由<code>模板</code>和<code>数据</code>构成：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyGlobalException</span> </span>&#123;</span><br><span class="line">    <span class="meta">@ExceptionHandler(MaxUploadSizeExceededException.class)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">customException</span><span class="params">(MaxUploadSizeExceededException e)</span> </span>&#123;</span><br><span class="line">        ModelAndView mv = <span class="keyword">new</span> ModelAndView(<span class="string">&quot;javaboy&quot;</span>);</span><br><span class="line">        mv.addObject(<span class="string">&quot;error&quot;</span>, e.getMessage());</span><br><span class="line">        <span class="keyword">return</span> mv;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>即降低了<code>View</code>和<code>Model</code>耦合，同时又实现了<code>后端路由</code>。<br><img src="https://img-blog.csdnimg.cn/20210613144005943.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Nhbmhld3V5YW5n,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>对于大型项目而言，<code>前端</code>的东西原来越多，造成<code>服务端</code>的压力越来越大，而且由于<code>MVP</code>的出现，逐渐向<code>前后端分离</code>靠拢，分离之后，View分担<code>服务端</code>的压力，或者说是<code>浏览器</code>分担了<code>服务器</code>压力，包括页面渲染，路由等问题，这时侯MVVM出现了..(<strong><font color="#E6A23C">这里是自己猜的，没找到相关资料</font></strong>)</p>
<p><code>MVVM</code>框架便是<code>前后端分离框架发展史</code>上的一次思想的完全变革。它是将<code>数据模型双向绑定</code>的思想作为变革的<code>核心</code>，即<code>View</code>的变动，自动反映在<code>ViewModel</code>上面，而<code>ViewModel</code>的变动也会随即反映在<code>View</code>上面，从而实现<code>数据与模型的双向绑定</code>。[^4]</p>
<p>在<code>MVVM</code>框架中，<code>View</code>用于发送用户的<code>交互请求</code>，之后将用户请求转交给<code>ViewModel</code>，<code>ViewModel</code>即可根据用户请求操作<code>Model</code>数据更新，待<code>Model</code>数据更新完毕，便会通知<code>ViewModel</code>数据发生了变化，然后<code>ViewModel</code>就会即刻更新<code>View</code>数据，完成视图的更新，从而完成用户的请求。[^4]<br><img src="https://img-blog.csdnimg.cn/20210613192219620.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Nhbmhld3V5YW5n,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>虽然<code>MVVM</code>框架和之前的<code>MVC</code>、<code>MVP</code>模式的目的相同，即完成<code>视图(View)和模型(Model)的分离</code>，但它却有着明显的优势。[^4]</p>
<ul>
<li>首先，MVVM框架中的<code>View</code>完全可以独立于<code>Model</code>发生<code>变化和修改</code>，彻底解耦，View发生变化时Model可以不变，同样，当Model发生变化时View也可以不变化，并且一个<code>ViewModel</code>可以绑定到多个不同的<code>View</code>上面，这就体现了<code>MVVM框架的低耦合性</code>。</li>
<li>其次，绑定在一个<code>ViewModel</code>上面的多个<code>View</code>都可以使用<code>ViewModel</code>里面的视图逻辑，完成了框架可重用性的特性。除此之外，<code>MVVM框架</code>还具有<code>可独立开发</code>、<code>可测试</code>等特性，把框架作用发挥到最大化，也因此成为了开发者们青睐的框架。。</li>
</ul>
<p>对于<code>MVVM</code>这种模式主要用于构建<code>基于事件驱动的 UI 平台</code>，对于前端开发领域中<code>数据与界面相混合</code>的情况特别适用[^6]，其中 </p>
<ul>
<li><code>Model</code> 仅仅只是代表应用程序所需的数据信息，它<code>不关注</code>任何行为；</li>
<li><code>View</code> 是软件中与用户进行直接交互的部分，它需要响应 <code>ViewModel</code> 的事件并格式化数据，<code>不负责</code>控制应用的状态；</li>
<li><code>ViewModel</code> 用于<code>封装业务逻辑层</code>，这点类似于 MVC 模式中的控制器，它<code>控制View </code>的很多显示逻辑，它可以把<code>数据模型</code>的变化<code>传递</code>给<code>视图</code>，也可以把视图中数据的变化传递给数据模型，即在 Model 和View 之间建立了双向绑定。</li>
</ul>
<h5 id="Vue与MVVM"><a href="#Vue与MVVM" class="headerlink" title="Vue与MVVM"></a>Vue与MVVM</h5><p>我第一次看到<code>MVVM</code>是因为<code>Vue</code>，相信好多小伙伴也是<code>Vue</code>认识<code>MVVM</code>架构模式。Vue官网中讲到：**<font color="#67C23A">虽然没有完全遵循 <code>MVVM</code> 模型，但是 Vue 的设计也受到了它的启发。因此在文档中经常会使用 vm (ViewModel 的缩写) 这个变量名表示组件实例</font>**<br><img src="https://img-blog.csdnimg.cn/20210613191156951.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Nhbmhld3V5YW5n,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>通过<code>双向数据绑定</code>连接<code>视图</code>层和<code>数据</code>，而实际的<code>界面 UI 操作</code>(<code>DOM 操作</code>)被封装成<code>对应的指令</code>(Directives)和<code>过滤器</code>(Filters)</p>
<h4 id="MVVM原理：-7"><a href="#MVVM原理：-7" class="headerlink" title="MVVM原理：[^7]"></a>MVVM原理：[^7]</h4><p>实现<code>数据绑定</code>的做法有大致如下几种：</p>
<ul>
<li><strong><font color="#009688">脏值检查(angular.js)</font></strong>: <code>angular.js</code> 是通过<code>脏值检测</code>的方式比对数据是否有<code>变更</code>，来决定是否<code>更新视图</code>，最简单的方式就是通过 <code>setInterval()</code> 定时<code>轮询检测</code>数据变动，angular只有在指定的<code>事件触发时</code>进入<code>脏值检测</code>.<ul>
<li><code>DOM</code>事件，譬如用户输入文本，点击按钮等。( <code>ng-click </code>)</li>
<li><code>XHR</code>响应事件 (<code> $http</code> )</li>
<li>浏览器<code>Location</code>变更事件 ( <code>$location</code> )</li>
<li><code>Timer</code>事件<code>( $timeout , $interval )</code></li>
<li>执行 <code>$digest()</code> 或 <code>$apply()</code></li>
</ul>
</li>
<li><strong><font color="#009688">数据劫持(vue.js)</font></strong>:<code>数据劫持</code>，指的是在<code>访问</code>或者<code>修改</code>对象的某个属性时，通过一段代码<code>拦截</code>这个行为，进行<code>额外的操作</code>或者<code>修改返回结果</code>。简单地说，就是当我们<code>触发函数</code>的时候 动一些手脚做点我们自己想做的事情，也就是所谓的 <code>&quot;劫持&quot;操作</code><ul>
<li><blockquote>
<p>在Vue中其实就是通过<code>Object.defineProperty</code>来劫持对象属性的<code>setter和getter</code>操作，并“种下”一个<code>监听器</code>，当数据发生变化的时候发出通知:<code>Object.defineProperty(obj,prop,descriptor)</code><br><code>参数：</code><br>obj:目标对象<br>prop:需要定义的属性或方法的名称<br>descriptor:目标属性所拥有的特性<br><code>可供定义的特性列表：</code><br>value:属性的值<br>writable:如果为false，属性的值就不能被重写。<br>get: 一旦目标属性被访问就会调回此方法，并将此方法的运算结果返回用户。<br>set:一旦目标属性被赋值，就会调回此方法。<br>configurable:如果为false，则任何尝试删除目标属性或修改属性性以下特性(writable,    configurable, enumerable)的行为将被无效化。<br>enumerable:是否能在for…in循环中遍历出来或在Object.keys中列举出来。</p>
</blockquote>
</li>
<li><blockquote>
<p><code>Proxy数据代理</code>:Proxy 可以被认为是<code> Object.defineProperty() 的升级版</code>。外界对<code>某个对象的访问</code>，都必须经过这层<code>拦截</code>。因此它是针对 整个<code>对象</code>，而不是 对象的某个<code>属性</code>。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data = &#123;<span class="attr">name</span>:<span class="string">&#x27;test&#x27;</span>&#125;</span><br><span class="line"><span class="built_in">Object</span>.keys(data).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">key</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">Object</span>.defineProperty(data,key,&#123;</span><br><span class="line">        <span class="attr">enumerable</span>:<span class="literal">true</span>,</span><br><span class="line">        <span class="attr">configurable</span>:<span class="literal">true</span>,</span><br><span class="line">        <span class="attr">get</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;get&#x27;</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">set</span>:<span class="function"><span class="keyword">function</span>(<span class="params">newValue</span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;监听到数据发生了变化&#x27;</span>);</span><br><span class="line">            <span class="built_in">document</span>.getElementById(‘myText’).value=newValue;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">document</span>.getElementById(‘myText’).addEventListener(‘keyup’,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line"> data.name=e.target.value; <span class="comment">// 监听 View 的变化，同步更新 Model</span></span><br><span class="line">&#125;);</span><br><span class="line">data.name <span class="comment">//控制台会打印出 “get”</span></span><br><span class="line">data.name = <span class="string">&#x27;hxx&#x27;</span> <span class="comment">//控制台会打印出 &quot;监听到数据发生了变化&quot;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="keyword">var</span> handle = &#123;</span><br><span class="line">    <span class="comment">//target目标对象 key属性名 receiver实际接受的对象</span></span><br><span class="line">    <span class="function"><span class="title">get</span>(<span class="params">target,key,receiver</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`get <span class="subst">$&#123;key&#125;</span>`</span>)</span><br><span class="line">        <span class="comment">// Reflect相当于映射到目标对象上</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Reflect</span>.get(target,key,receiver)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">set</span>(<span class="params">target,key,value,receiver</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`set <span class="subst">$&#123;key&#125;</span>`</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Reflect</span>.set(target,key,value,receiver)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//arr要拦截的对象，handle定义拦截行为</span></span><br><span class="line"><span class="keyword">var</span> proxy = <span class="keyword">new</span> <span class="built_in">Proxy</span>(arr,handle)</span><br><span class="line">proxy.push(<span class="number">4</span>) <span class="comment">//可以翻到控制台测试一下会打印出什么</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><strong><font color="#009688">发布者-订阅者模式(backbone.js)</font></strong>:<blockquote>
<p>上述介绍了简单的<code>一对一双向绑定</code>的实现，即一个<code>数据模型</code>只与一个<code>视图</code>进行绑定。当多个<code>View</code>与一个 <code>Model </code>进行绑定时，每次更新 <code>Model </code>时需要在<code> Model</code> 的<code>set</code>访问器属性中更新多个 <code>View</code>，这样硬编码的方式不利于<code>后期的维护</code>。为了解决<code>硬编码带来的耦合性过强</code>的问题，在在实际实现中，需要使用到设计模式中的<code>发布 - 订阅模式</code>。</p>
</blockquote>
</li>
</ul>
<p><code>发布 - 订阅模式</code>(又称<code>观察者</code>模式)是一种常用的设计模式，该模式包含<code>发布者</code>和<code>订阅者</code>两种角色。可以让<code>多个订阅者</code>订阅同<code>一个发布者</code>发布的主题，当发布者的主题发生变化时，对外发送一个通知，所有订阅了该主题的订阅者都会接收到更新的消息。因此，观察者模式定义的是<code>一种一对多的关系</code>。发布 - 订阅模式非常适合于 MVVM 双向绑定中多个视图绑定到同一个数据模型的情形。</p>
<h4 id="实现双向数据绑定步骤-7"><a href="#实现双向数据绑定步骤-7" class="headerlink" title="实现双向数据绑定步骤[^7]"></a>实现双向数据绑定步骤[^7]</h4><p>要实现<code>mvvm</code>的双向绑定，就必须要实现以下几点：</p>
<ol>
<li>实现一个<code>指令解析器Compile</code>，对每个元素节点的指令进行扫描和解析，根据<code>指令模板</code>替换数据，以及<code>绑定</code>相应的<code>更新函数</code></li>
<li>实现一个<code>数据监听器Observer</code>，能够对数据对象的所有属性进行监听，如有变动可拿到最新值并<code>通知订阅者(Dep)</code></li>
<li>实现一个<code>Watcher</code>，Watcher是订阅 - 发布模式中订阅者的实现，作为连接<code>Observer</code>和<code>Compile</code>的桥梁，能够订阅并收到每个属性变动的通知，<code>执行指令</code>绑定的相应回函数 (发布)，从而<code>更新视图</code></li>
<li>MVVM入口函数，整合以上三者<br><img src="https://img-blog.csdnimg.cn/20210613210828468.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Nhbmhld3V5YW5n,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>当<code>新建</code>一个<code> Vue 对象</code>时，框架进入<code>初始化</code>阶段。Vue 在初始化阶段主要执行两个操作：</li>
</ol>
<ul>
<li>第一个是<code>遍历系统中数据</code>的所有属性，来对各个属性的<code>变化添加监听</code>；</li>
<li>第二个操作是利用<code>指令编译器 Compile </code>对视图中绑定的指令进行扫描<code>进行视图的初始化</code>，然后订阅 <code>Watcher</code> 来<code>更新视图</code>，此时 <code>Watcher</code> 会将自己添加到<code>消息订阅器Dep</code>中。至此，Vue的初始化过程结束。</li>
</ul>
<p>在系统运行过程中，一旦系统中的数据模型发生了变化，<code>观察者 Observer </code>的 setter 访问器属性就会被触发，此时消息<code>订阅中心</code> Dep 会遍历它所维护的所有<code>订阅者</code>，对于每一个订阅了该数据的<code>对象</code>，向它发出一个<code>更新通知</code>，订阅者收到通知后就会对<code>视图</code>进行相应的更新。以上过程不断往复循环，这就是 MVVM 模式在 Vue.js 中的运行原理。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Two-way data-binding&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">        &lt;input type=&quot;text&quot; v-model=&quot;text&quot;&gt;</span><br><span class="line">        &#123;&#123; text &#125;&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        function observe (obj, vm) &#123;</span><br><span class="line">            Object.keys(obj).forEach(function (key) &#123;</span><br><span class="line">                defineReactive(vm, key, obj[key]);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        function defineReactive (obj, key, val) &#123;</span><br><span class="line">            var dep = new Dep();</span><br><span class="line">            Object.defineProperty(obj, key, &#123;</span><br><span class="line">                get: function () &#123;</span><br><span class="line">                    if (Dep.target) dep.addSub(Dep.target);</span><br><span class="line">                    return val</span><br><span class="line">                &#125;,</span><br><span class="line">                set: function (newVal) &#123;</span><br><span class="line">                    if (newVal === val) return</span><br><span class="line">                    val = newVal;</span><br><span class="line">                    dep.notify();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        function nodeToFragment (node, vm) &#123;</span><br><span class="line">            var flag = document.createDocumentFragment();</span><br><span class="line">            var child;</span><br><span class="line">            while (child = node.firstChild) &#123;</span><br><span class="line">                compile(child, vm);</span><br><span class="line">                flag.appendChild(child);</span><br><span class="line">            &#125;</span><br><span class="line">            return flag;</span><br><span class="line">        &#125;</span><br><span class="line">        function compile (node, vm) &#123;</span><br><span class="line">            var reg = /\&#123;\&#123;(.*)\&#125;\&#125;/;</span><br><span class="line">            // 节点类型为元素</span><br><span class="line">            if (node.nodeType === 1) &#123;</span><br><span class="line">                var attr = node.attributes;</span><br><span class="line">                // 解析属性</span><br><span class="line">                for (var i = 0; i &lt; attr.length; i++) &#123;</span><br><span class="line">                    if (attr[i].nodeName == &#x27;v-model&#x27;) &#123;</span><br><span class="line">                        var name = attr[i].nodeValue; // 获取v-model绑定的属性名</span><br><span class="line">                        node.addEventListener(&#x27;input&#x27;, function (e) &#123;</span><br><span class="line">                            // 给相应的data属性赋值，进而触发该属性的set方法</span><br><span class="line">                            vm[name] = e.target.value;</span><br><span class="line">                        &#125;);</span><br><span class="line">                        node.value = vm[name]; // 将data的值赋给该node</span><br><span class="line">                        node.removeAttribute(&#x27;v-model&#x27;);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                new Watcher(vm, node, name, &#x27;input&#x27;);</span><br><span class="line">            &#125;</span><br><span class="line">            // 节点类型为text</span><br><span class="line">            if (node.nodeType === 3) &#123;</span><br><span class="line">                if (reg.test(node.nodeValue)) &#123;</span><br><span class="line">                    var name = RegExp.$1; // 获取匹配到的字符串</span><br><span class="line">                    name = name.trim();</span><br><span class="line">                    new Watcher(vm, node, name, &#x27;text&#x27;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        function Watcher (vm, node, name, nodeType) &#123;</span><br><span class="line">        //  this为watcher函数</span><br><span class="line">            Dep.target = this;</span><br><span class="line">        //  console.log(this);</span><br><span class="line">            this.name = name;</span><br><span class="line">            this.node = node;</span><br><span class="line">            this.vm = vm;</span><br><span class="line">            this.nodeType = nodeType;</span><br><span class="line">            this.update();</span><br><span class="line">            Dep.target = null;</span><br><span class="line">        &#125;</span><br><span class="line">        Watcher.prototype = &#123;</span><br><span class="line">            update: function () &#123;</span><br><span class="line">                this.get();</span><br><span class="line">                if (this.nodeType == &#x27;text&#x27;) &#123;</span><br><span class="line">                    this.node.nodeValue = this.value;</span><br><span class="line">                &#125;</span><br><span class="line">                if (this.nodeType == &#x27;input&#x27;) &#123;</span><br><span class="line">                    this.node.value = this.value;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            // 获取daa中的属性值</span><br><span class="line">            get: function () &#123;</span><br><span class="line">                this.value = this.vm[this.name]; // 触发相应属性的get</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        function Dep () &#123;</span><br><span class="line">            this.subs = []</span><br><span class="line">        &#125;</span><br><span class="line">        Dep.prototype = &#123;</span><br><span class="line">            addSub: function(sub) &#123;</span><br><span class="line">                this.subs.push(sub);</span><br><span class="line">            &#125;,</span><br><span class="line">            notify: function() &#123;</span><br><span class="line">                this.subs.forEach(function(sub) &#123;</span><br><span class="line">                    sub.update();</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        function Vue (options) &#123;</span><br><span class="line">            this.data = options.data;</span><br><span class="line">            var data = this.data;</span><br><span class="line">            observe(data, this);</span><br><span class="line">            var id = options.el;</span><br><span class="line">            var dom = nodeToFragment(document.getElementById(id), this);</span><br><span class="line">            // 编译完成后，将dom返回到app中</span><br><span class="line">            document.getElementById(id).appendChild(dom);</span><br><span class="line">        &#125;</span><br><span class="line">        var vm = new Vue(&#123;</span><br><span class="line">            el: &#x27;app&#x27;,</span><br><span class="line">            data: &#123;</span><br><span class="line">                text: &#x27;hello world&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<h4 id="我的理解"><a href="#我的理解" class="headerlink" title="我的理解"></a>我的理解</h4><ul>
<li><p>**<font color="#009688">架构意义角度(Web端的角度)</font>**：<code>MVC</code>和<code>MVVM</code>在本质上都是为了<code>实现View和Model的解耦</code>，<code>MVC</code>是通过<code>Controller</code>实现了<code>View</code>和<code>Model</code>的<code>解耦</code>，一般用与客户端，或者<code>Web</code>端的整个架构过程；而<code>MVVM</code>是在<code>MVC</code>发展到<code>MVP</code>后(为了彻底解决View和Model的耦合问题)，在提出<code>前后端分离</code>的基础上(考虑Coltroller的复用性，接口复用性)，对<code>View层</code>进行了<code>增强(Vue.js)</code>，或者说细化了View层的表现手法，提出了通过<code>ViewModel</code>对视图层的<code>View</code>和<code>Model</code>解耦。<br> 个人感觉<code>MVVM</code>和<code>MVP</code>的整体<code>架构</code>是有<code>相似</code>的地方的，不同的是面对的<code>问题域</code>不同，<code>MVP</code>是<code>Web</code>架构整体的解决方案，<code>MVVM</code>主要用于构建<code>基于事件驱动的 UI 平台(界面)</code>，适用于<code>前端</code>开发领域中<code>数据与界面相混合</code>的情况，所以它只专注于<code>视图层</code>，<code>抽象</code>出<code>视图</code>的状态和行为，实现了<code>用户界面的UI(View)</code>和<code>数据(Model)</code>的<code>解耦</code>。这个<code>View</code>和<code>Model</code>虽然和<code>MVC</code>中描述的一样，但是不相同的，可以理解为<code>MVC</code>中<code>View</code>中包含了<code>MVVM</code>的架构方式。<br> 一般<code>前后端分离</code>的<code>Web</code>开发中会结合<code>MVC</code>和<code>MVVM</code>两种架构模式。使用<code>MVC</code>构建整体的<code>Web</code>架构，使用<code>MVVM</code>解决<code>View</code>层<code>DOM</code>和<code>data</code>的耦合问题。<br><img src="https://img-blog.csdnimg.cn/20210614013954141.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Nhbmhld3V5YW5n,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</li>
<li><p><strong><font color="#009688">设计模式角度考虑</font></strong> ：<code>MVC</code>是基于<code>观察者</code>设计模式的，<code>Model</code>作为一个主题，<code>View</code>作为观察者，当一个<code>Model</code>变化时，会通知更新一个或多个依赖的<code>View</code>，反之；<br> MVVM可以看做是基于<code>中介者</code>设计模式和<code>观察者</code>设计模式，<code>View</code>和<code>Model</code>通过<code>ViewModel</code>这个<code>中介者对象</code>进行交互，解耦了<code>View</code>和<code>Mode</code>l的同时实现<code>数据双向绑定</code>。<br> 同时<code>ViewModel</code> 作为一个<code>主题对象</code>，<code>View</code>和<code>Model</code>为两个观察者(或者可以理解为<code>View</code>为主题时，<code>Model</code>为观察者，反之。这里的<code>Model View</code>起到一个<code>注册</code>，<code>通知</code>的作用，对于<code>观察者</code>模式的定义，<code>ModelView</code>是主题的行为，但实际变化的是<code>View</code>或者<code>Model</code>，**<font color="#F56C6C">个人觉得两种理解都没问题，理解不对的请小伙伴指出来</font>**)，当<code>Model</code>变化时，<code>ViewModel</code>由<code>数据绑定</code>通知并更新与之相关的多个<code>View</code>，反之，当<code>View</code>变化时，<code>ViewModel</code>由<code>DOM监听</code>通知更新相关的多个<code>Model</code>。</p>
</li>
</ul>
<h4 id="引用文献资料"><a href="#引用文献资料" class="headerlink" title="引用文献资料"></a>引用文献资料</h4><p>[^3]:<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/54355504">浅析 web 前端 MVVM[db&#x2F;ol].https://zhuanlan.zhihu.com/p/54355504</a><br>[^4]:程桂花.MVVM前后端数据交互中安全机制的研究与实现[D].浙江理工大学硕士学位设计,2017:6-7<br>[^5]:<a target="_blank" rel="noopener" href="https://blog.csdn.net/wdr2003/article/details/79811767">你真的理解了MVC, MVP, MVVM吗？[db&#x2F;ol].https://blog.csdn.net/wdr2003/article/details/79811767</a><br>[^6]:易剑波.基于 MVVM 模式的 WEB 前端框架的研究[D].计算机工程应用技术,2016.19:76]<br>[^7]:<a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903929298288647">Vue MVVM理解及原理实现[db&#x2F;ol].https://juejin.cn/post/6844903929298288647</a></p>
</div><div class="article-licensing box"><div class="licensing-title"><p>关于 MVVM和MVC的一些总结</p><p><a href="https://liruilongs.github.io/2021/06/26/web/关于 MVVM和MVC的一些总结/">https://liruilongs.github.io/2021/06/26/web/关于 MVVM和MVC的一些总结/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><a href="https://liruilongs.github.io"><p>山河已无恙</p></a></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2021-06-26</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2023-06-21</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="icon" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a><a class="icon" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="recommend-area"><div class="recommend-post"><span class="is-size-6 has-text-grey has-mr-7"># 相关文章</span><br><span>  1.<a class="is-size-6" href="/2021/06/26/Java/%E5%85%B3%E4%BA%8E%20JAVA%20%E4%B8%AD%E5%8F%8D%E5%B0%84%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86_%E7%BC%96%E7%A0%81%E7%BB%8F%E9%AA%8C%E7%9A%84%E4%B8%80%E4%BA%9B%E6%80%BB%E7%BB%93/" target="_blank">关于JAVA 反射 基础知识_编码经验的一些总结</a><br></span></div><div class="recommend-post"><span class="is-size-6 has-text-grey has-mr-7"># 推荐文章</span><br><span>  1.<a class="is-size-6" href="/2021/08/27/K8s/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E3%80%8AKubernetes%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97-%E4%BB%8EDocker%E5%88%B0Kubernetes%E5%AE%9E%E8%B7%B5%E5%85%A8%E6%8E%A5%E8%A7%A6%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" target="_blank">《Kubernetes权威指南:从Docker到Kubernetes实践全接触》读书笔记</a><br></span><span>  2.<a class="is-size-6" href="/2020/07/30/Java/Java%E4%B8%ADtry%7B%7Dcatch%E7%9A%84%E9%9A%90%E8%97%8F(%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%BC%82%E5%B8%B8%E5%9D%97)/" target="_blank">Java中try{}catch的隐藏(如何优雅的实现异常块)</a><br></span><span>  3.<a class="is-size-6" href="/2021/07/04/Java/%E3%80%8A%E5%88%86%E5%B8%83%E5%BC%8F%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%AE%9E%E8%B7%B5%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" target="_blank">《分布式消息中间件实践》 读书笔记</a><br></span><span>  4.<a class="is-size-6" href="/2021/07/01/Java/%E3%80%8A%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" target="_blank">《微服务架构设计模式》读书笔记</a><br></span><span>  5.<a class="is-size-6" href="/2022/02/11/Java/%E3%80%90JAVA%E5%86%B7%E7%9F%A5%E8%AF%86%E3%80%91JAVA%E7%9C%9F%E7%9A%84%E4%B8%8D%E6%94%AF%E6%8C%81%E5%A4%9A%E7%BB%A7%E6%89%BF%E5%90%97%EF%BC%9F%E7%94%A8%E5%86%85%E9%83%A8%E7%B1%BB%E5%8E%BB%E5%AE%9E%E7%8E%B0%E5%AE%83%E5%90%A7%EF%BC%81/" target="_blank">【JAVA冷知识】JAVA居然支持多继承吗？让我们用内部类去吧</a><br></span><span>  6.<a class="is-size-6" href="/2022/02/11/Java/%E3%80%90JAVA%E5%86%B7%E7%9F%A5%E8%AF%86%E3%80%91%E4%BB%80%E4%B9%88%E6%98%AF%E9%80%86%E5%8F%98(contravariant)&amp;%E5%8D%8F%E5%8F%98(covariant)%EF%BC%9F%E6%95%B0%E7%BB%84%E6%94%AF%E6%8C%81%E5%8D%8F%E5%8F%98&amp;%E9%80%86%E5%8F%98%E5%90%97%EF%BC%9F%E6%B3%9B%E5%9E%8B%E5%91%A2%EF%BC%9F/" target="_blank">【JAVA冷知识】什么是逆变(contravariant)与协变(covariant)？数组支持协变&amp;逆变吗？泛型呢？</a><br></span></div></div><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/social-share.js/1.0.16/css/share.min.css"><div class="social-share"></div><script src="https://cdnjs.loli.net/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="/img/alipay%EF%BF%A5.png" alt="支付宝"></span></a><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/img/wechat%EF%BF%A5.png" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2021/06/26/Java/%E5%85%B3%E4%BA%8E%20JAVA%20%E4%B8%AD%E5%8F%8D%E5%B0%84%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86_%E7%BC%96%E7%A0%81%E7%BB%8F%E9%AA%8C%E7%9A%84%E4%B8%80%E4%BA%9B%E6%80%BB%E7%BB%93/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">关于JAVA 反射 基础知识_编码经验的一些总结</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2021/06/20/anothe/%E8%AE%80%E6%9B%B8%E7%AD%86%E8%A8%98/"><span class="level-item">讀書筆記</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--><div class="card"><div class="card-content"><div class="title is-5">评论</div><div id="comment-container"></div><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/gitalk/1.6.0/gitalk.css"><script> $.getScript('/js/gitalk.min.js', function () { 
            var gitalk = new Gitalk({
            language:'zh-CN',
            id: 'e78e13db6373e43c3c8d3427d0997816',
            repo: 'blog_comment',
            owner: 'LIRUILONGS',
            clientID: '9fdc9739266d48d5f62e',
            clientSecret: 'c1cc33697d099a2197650ec9dadcb16bd4904655',
            admin: ["LIRUILONGS"],
            createIssueManually: true,
            distractionFreeMode: true,
            perPage: 10,
            pagerDirection: 'last',
            proxy: 'https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token',
            
            enableHotKey: true,
            isLocked: false
        })
        gitalk.render('comment-container')});</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="is-flex is-mobile" href="#我的需求："><span class="mr-2">1</span><span>我的需求：</span></a></li><li><a class="is-flex is-mobile" href="#我需要解决的问题："><span class="mr-2">2</span><span>我需要解决的问题：</span></a></li><li><a class="is-flex is-mobile" href="#我是这样做的："><span class="mr-2">3</span><span>我是这样做的：</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#MVVM-名词解释："><span class="mr-2">3.1</span><span>MVVM 名词解释：</span></a></li><li><a class="is-flex is-mobile" href="#MVVM-的发展历程"><span class="mr-2">3.2</span><span>MVVM 的发展历程</span></a></li><li><a class="is-flex is-mobile" href="#MVC到MVVM-的发展历程"><span class="mr-2">3.3</span><span>MVC到MVVM 的发展历程</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#Vue与MVVM"><span class="mr-2">3.3.1</span><span>Vue与MVVM</span></a></li></ul></li><li><a class="is-flex is-mobile" href="#MVVM原理：-7"><span class="mr-2">3.4</span><span>MVVM原理：[^7]</span></a></li><li><a class="is-flex is-mobile" href="#实现双向数据绑定步骤-7"><span class="mr-2">3.5</span><span>实现双向数据绑定步骤[^7]</span></a></li><li><a class="is-flex is-mobile" href="#我的理解"><span class="mr-2">3.6</span><span>我的理解</span></a></li><li><a class="is-flex is-mobile" href="#引用文献资料"><span class="mr-2">3.7</span><span>引用文献资料</span></a></li></ul></li></ul></div></div><style>.menu-list > li > a.is-active + .menu-list { display: block; }.menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="profile"><div class="card-content"><nav class=""><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7.jpg" alt="山河已无恙"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">山河已无恙</p><p class="is-size-6 is-block">爱自己，是终生浪漫的开始</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>中国·呼和浩特</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">288</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">92</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">143</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://liruilong.blog.csdn.net/?t=1&amp;type=blog" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/LIRUILONGS"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="CSDN" href="https://liruilong.blog.csdn.net/"><i class="fa fa-code"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Email" href="mailto:1224965096@qq.com"><i class="fa fa-envelope"></i></a></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://liruilong.blog.csdn.net/?t=1&amp;type=blog" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">CSDN</span></span><span class="level-right"><span class="level-item tag">liruilong.blog.csdn.net</span></span></a></li><li><a class="level is-mobile" href="https://www.cnblogs.com/liruilong/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">博客园</span></span><span class="level-right"><span class="level-item tag">www.cnblogs.com</span></span></a></li><li><a class="level is-mobile" href="https://github.com/LIRUILONGS" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Githup</span></span><span class="level-right"><span class="level-item tag">github.com</span></span></a></li><li><a class="level is-mobile" href="https://gitee.com/liruilonger" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">码云</span></span><span class="level-right"><span class="level-item tag">gitee.com</span></span></a></li></ul></div></div></div><!--!--><div class="card widget"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-08-23T02:58:55.000Z">2023-08-22</time></p><p class="title"><a href="/2023/08/22/%E5%BE%85%E5%8F%91%E5%B8%83/%E6%95%B0%E6%8D%AE%E9%87%87%E9%9B%86%EF%BC%9Aselenium%20%E8%8E%B7%E5%8F%96%E6%9F%90%E7%BD%91%E7%AB%99CDN%20%E5%95%86%E5%AE%B6%E6%8E%92%E5%90%8D%E4%BF%A1%E6%81%AF/">数据采集：selenium 获取某网站CDN 商家排名信息</a></p><p class="categories"><a href="/categories/%E6%95%B0%E6%8D%AE%E9%87%87%E9%9B%86/">数据采集</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-08-21T04:21:37.000Z">2023-08-21</time></p><p class="title"><a href="/2023/08/21/%E5%BE%85%E5%8F%91%E5%B8%83/%E6%95%B0%E6%8D%AE%E9%87%87%E9%9B%86%EF%BC%9Aselenium%20%E6%8F%90%E5%8F%96%20Cookie%20%E8%87%AA%E5%8A%A8%E7%99%BB%E9%99%86/">数据采集:selenium 提取 Cookie 自动登陆</a></p><p class="categories"><a href="/categories/selenium/">selenium</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-08-08T10:13:26.000Z">2023-08-08</time></p><p class="title"><a href="/2023/08/08/%E5%BE%85%E5%8F%91%E5%B8%83/%E6%B5%B7%E5%BA%B7%E6%91%84%E5%83%8F%E5%A4%B4%E5%B0%8F%E5%9E%8B%E7%BB%84%E7%BD%91-5%E4%B8%AA%E4%BB%A5%E5%86%85-%E5%AE%89%E8%A3%85%E6%96%B9%E6%A1%88/">海康(hikvision)摄像头小型组网安装</a></p><p class="categories"><a href="/categories/%E7%9B%91%E6%8E%A7/">监控</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-08-04T11:01:04.000Z">2023-08-04</time></p><p class="title"><a href="/2023/08/04/%E5%BE%85%E5%8F%91%E5%B8%83/%E5%9F%BA%E4%BA%8E-yolov8-%E7%9A%84%E4%BA%BA%E4%BD%93%E5%A7%BF%E6%80%81%E8%AF%84%E4%BC%B0/">基于 yolov8 的人体姿态评估</a></p><p class="categories"><a href="/categories/yolov8/">yolov8</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-07-30T17:29:27.000Z">2023-07-30</time></p><p class="title"><a href="/2023/07/30/%E5%BE%85%E5%8F%91%E5%B8%83/DNS%EF%BC%9A%E8%87%AA%E5%8A%A8%E5%8C%96%E9%85%8D%E7%BD%AEDNS%E6%9C%8D%E5%8A%A1%E5%99%A8/">DNS：自动化配置 主/从/缓存 DNS服务器</a></p><p class="categories"><a href="/categories/DNS/">DNS</a></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/Ajax/"><span class="level-start"><span class="level-item">Ajax</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Ansible/"><span class="level-start"><span class="level-item">Ansible</span></span><span class="level-end"><span class="level-item tag">23</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/AppCube/"><span class="level-start"><span class="level-item">AppCube</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Bind9/"><span class="level-start"><span class="level-item">Bind9</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/CI-CD/"><span class="level-start"><span class="level-item">CI/CD</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/CSS/"><span class="level-start"><span class="level-item">CSS</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Ceph/"><span class="level-start"><span class="level-item">Ceph</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/DAD-3DHeads/"><span class="level-start"><span class="level-item">DAD-3DHeads</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/DNS/"><span class="level-start"><span class="level-item">DNS</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/DeepFace/"><span class="level-start"><span class="level-item">DeepFace</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><a class="level is-mobile is-marginless" href="/categories/"><span class="level-start"><span class="level-item">查看全部&gt;&gt;</span></span></a></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2023/08/"><span class="level-start"><span class="level-item">八月 2023</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2023/07/"><span class="level-start"><span class="level-item">七月 2023</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2023/06/"><span class="level-start"><span class="level-item">六月 2023</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2023/05/"><span class="level-start"><span class="level-item">五月 2023</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2023/04/"><span class="level-start"><span class="level-item">四月 2023</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><a class="level is-mobile is-marginless" href="/archives/"><span class="level-start"><span class="level-item">查看全部&gt;&gt;</span></span></a></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Kubernetes/"><span class="tag">Kubernetes</span><span class="tag is-grey-lightest">86</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux/"><span class="tag">Linux</span><span class="tag is-grey-lightest">29</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Ansible/"><span class="tag">Ansible</span><span class="tag is-grey-lightest">25</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag is-grey-lightest">14</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Ceph/"><span class="tag">Ceph</span><span class="tag is-grey-lightest">10</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Docker/"><span class="tag">Docker</span><span class="tag is-grey-lightest">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JAVA/"><span class="tag">JAVA</span><span class="tag is-grey-lightest">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Git/"><span class="tag">Git</span><span class="tag is-grey-lightest">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/OpenShift/"><span class="tag">OpenShift</span><span class="tag is-grey-lightest">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%A8%8B%E5%BA%8F%E4%BA%BA%E7%94%9F/"><span class="tag">程序人生</span><span class="tag is-grey-lightest">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/DNS/"><span class="tag">DNS</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Go/"><span class="tag">Go</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/OKD/"><span class="tag">OKD</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%AE%B9%E5%99%A8/"><span class="tag">容器</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BD%91%E7%BB%9C/"><span class="tag">网络</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CKA/"><span class="tag">CKA</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/shell/"><span class="tag">shell</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BA%91%E5%8E%9F%E7%94%9F/"><span class="tag">云原生</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/"><span class="tag">分布式</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/"><span class="tag">微服务</span><span class="tag is-grey-lightest">3</span></a></div></div><div class="field is-grouped is-grouped-multiline"><a class="tags has-addons" href="/tags/"><span class="tag">查看全部&gt;&gt;</span></a></div></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div><!--!--><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.png" alt="山河已无恙" height="28"></a><p class="size-small"><span>&copy; 2023 山河已无恙</span>  Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a> &amp; <a href="https://github.com/removeif/hexo-theme-amazing" target="_blank">Amazing</a> <br><span>© <a href="http://www.beian.miit.gov.cn/" target="_blank">备案号</a><br></span><span>© 版权说明：[本网站所有内容均收集于互联网或自己创作,<br />&nbsp;&nbsp;&nbsp;&nbsp;方便于网友与自己学习交流，如有侵权，请<a href="/message" target="_blank">留言</a>，立即处理]<br /></span><span><span id="statistic-times">loading...</span><script>function createTime(time) {
            var n = new Date(time);
            now.setTime(now.getTime() + 250),
                days = (now - n) / 1e3 / 60 / 60 / 24,
                dnum = Math.floor(days),
                hours = (now - n) / 1e3 / 60 / 60 - 24 * dnum,
                hnum = Math.floor(hours),
            1 == String(hnum).length && (hnum = "0" + hnum),
                minutes = (now - n) / 1e3 / 60 - 1440 * dnum - 60 * hnum,
                mnum = Math.floor(minutes),
            1 == String(mnum).length && (mnum = "0" + mnum),
                seconds = (now - n) / 1e3 - 86400 * dnum - 3600 * hnum - 60 * mnum,
                snum = Math.round(seconds),
            1 == String(snum).length && (snum = "0" + snum),
                document.getElementById("statistic-times").innerHTML = "❤️本站自 <strong>"+time.split(" ")[0].replace(/\//g,".")+"</strong> 已运行 <strong>" + dnum + "</strong> 天 <strong>" + hnum + "</strong> 小时 <strong>" + mnum + "</strong> 分 <strong>" + snum + "</strong> 秒！❤️";
        }var now = new Date();setInterval("createTime('2021/6/26 21:27:00')", 250,"");</script><br></span><div class="size-small"><span>❤️感谢 <strong><span id="busuanzi_value_site_uv">99+</span></strong> 小伙伴的 <strong><span id="busuanzi_value_site_pv">99+</span></strong> 次光临！❤️</span></div></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/removeif/hexo-theme-amazing"><i class="fab fa-github"></i></a></p></div><div class="sideMusic"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="/js/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script><meting-js style="width: auto;height: 2000px;" server="netease" type="playlist" id="2364053447" theme="#2980b9" loop="all" autoplay="false" order="list" storageName="aplayer-setting" lrctype="0" list-max-height="400px" fixed="true"></meting-js></div></div></div></div></footer><script src="https://cdnjs.loli.net/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" async></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><!--!--><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><script src="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.8/js/lightgallery.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/KaTeX/0.11.1/katex.min.css"><script src="https://cdnjs.loli.net/ajax/libs/KaTeX/0.11.1/katex.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/KaTeX/0.11.1/contrib/auto-render.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/KaTeX/0.11.1/contrib/mhchem.js" defer></script><script>window.addEventListener("load", function() {
            document.querySelectorAll('[role="article"] > .content').forEach(function(element) {
                renderMathInElement(element);
            });
        });</script><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdnjs.loli.net/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><div id="outdated"><h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly.&amp;npsb;<a id="btnUpdateBrowser" target="_blank" rel="noopener" href="http://outdatedbrowser.com/">Update my browser now </a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">×</a></p></div><script src="https://cdnjs.loli.net/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js" defer></script><script>window.addEventListener("load", function () {
            outdatedBrowser({
                bgColor: '#f25648',
                color: '#ffffff',
                lowerThan: 'object-fit' // display on IE11 or below
            });
        });</script><!--!--><script src="/js/main.js" defer></script><script>$.getScript('/js/comment-issue-data.js',function(){loadIssueData('9fdc9739266d48d5f62e','c1cc33697d099a2197650ec9dadcb16bd4904655','LIRUILONGS','blog_comment',false);})</script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.js"></script><script type="text/javascript">var pjax = new Pjax({
            elements: "a",//代表点击链接就更新
            selectors: [  //代表要更新的节点
                ".section",
                "title"
            ],
            cache: true,
            cacheBust:false
        })

        function loadBusuanzi(){
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js", function () {});
        }

        function loadMathJax() { //加载mathjax
            $.getScript("//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML", function () {
                MathJax.Hub.Config({ tex2jax: { inlineMath: [['$', '$'], ['\(', '\)']] } });
                var math = document.getElementsByClassName("entry-content")[0];
                MathJax.Hub.Queue(["Typeset", MathJax.Hub, math]);
            });
        };

        // 开始 PJAX 执行的函数
        document.addEventListener('pjax:send', function () {
        });
        
        // PJAX 完成之后执行的函数，可以和上面的重载放在一起
        document.addEventListener('pjax:complete', function () {
            $(".section").css({opacity:1});
            if(false){
                $.getScript('/js/comment-issue-data.js',function(){loadIssueData('9fdc9739266d48d5f62e','c1cc33697d099a2197650ec9dadcb16bd4904655','LIRUILONGS','blog_comment',false);});
            }
            if(false){
                loadMathJax();
            }
            loadMainJs(jQuery, window.moment, window.ClipboardJS, window.IcarusThemeSettings);
            loadBackTop();
            loadBusuanzi();
            if(typeof loadBanner == 'function'){
                loadBanner();
            }
        });</script></body></html>