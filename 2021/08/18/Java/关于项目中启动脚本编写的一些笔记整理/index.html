<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="google-adsense-account" content="ca-pub-5805170532312625"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>关于项目中启动脚本编写的一些笔记整理 - 山河已无恙</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="山河已无恙"><meta name="msapplication-TileImage" content="https://cdn.jsdelivr.net/gh/removeif/removeif-demo@latest/img/favicon.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="山河已无恙"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta description="流年似水，有些事情一下子过去了，有的事情很久也过不去。流年似水，过去的事过去了，未过去的事也不能叫我惊讶。但是岁月如流，一切都已发生过，发生过的事再也没有改变的余地。虽然岁月如流，什么都会过去，但总有些东西发生了就不能抹煞。似水流年是一个人所有的一切，只有这个东西，才真正归你所有。其余的一切，都是片刻的欢娱和不幸，转眼间就已跑到那似水流年里去了。"><meta property="og:type" content="blog"><meta property="og:title" content="山河已无恙"><meta property="og:url" content="https://mp.weixin.qq.com/s?__biz=MzkyNjIxNTYwMw==&amp;mid=2247496480&amp;idx=1&amp;sn=a9971fed3962ef2a1aeda1f0bda65f86&amp;chksm=c2380ffcf54f86eaba8daac6caca72a70f38e61a8d25dc2a66d3a17b87c02530e326dcaea14b#rd"><meta property="og:site_name" content="山河已无恙"><meta property="og:description" content="流年似水，有些事情一下子过去了，有的事情很久也过不去。流年似水，过去的事过去了，未过去的事也不能叫我惊讶。但是岁月如流，一切都已发生过，发生过的事再也没有改变的余地。虽然岁月如流，什么都会过去，但总有些东西发生了就不能抹煞。似水流年是一个人所有的一切，只有这个东西，才真正归你所有。其余的一切，都是片刻的欢娱和不幸，转眼间就已跑到那似水流年里去了。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://mp.weixin.qq.com/img/头像.jpg"><meta property="article:published_time" content="2021-08-18T04:47:02.000Z"><meta property="article:modified_time" content="2023-06-21T11:25:59.036Z"><meta property="article:author" content="LIRUILONGS"><meta property="article:tag" content="shell"><meta property="article:tag" content="Docker"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/头像.jpg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://liruilongs.github.io/2021/08/18/Java/%E5%85%B3%E4%BA%8E%E9%A1%B9%E7%9B%AE%E4%B8%AD%E5%90%AF%E5%8A%A8%E8%84%9A%E6%9C%AC%E7%BC%96%E5%86%99%E7%9A%84%E4%B8%80%E4%BA%9B%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/"},"headline":"山河已无恙","image":["https://img-blog.csdnimg.cn/53e87433e43a439cbc5b13645ea1ca51.png"],"datePublished":"2021-08-18T04:47:02.000Z","dateModified":"2023-06-21T11:25:59.036Z","author":{"@type":"Person","name":"山河已无恙"},"description":"流年似水，有些事情一下子过去了，有的事情很久也过不去。流年似水，过去的事过去了，未过去的事也不能叫我惊讶。但是岁月如流，一切都已发生过，发生过的事再也没有改变的余地。虽然岁月如流，什么都会过去，但总有些东西发生了就不能抹煞。似水流年是一个人所有的一切，只有这个东西，才真正归你所有。其余的一切，都是片刻的欢娱和不幸，转眼间就已跑到那似水流年里去了。"}</script><link rel="canonical" href="https://liruilongs.github.io/2021/08/18/Java/%E5%85%B3%E4%BA%8E%E9%A1%B9%E7%9B%AE%E4%B8%AD%E5%90%AF%E5%8A%A8%E8%84%9A%E6%9C%AC%E7%BC%96%E5%86%99%E7%9A%84%E4%B8%80%E4%BA%9B%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/"><link rel="alternate" href="/path/to/atom.xml" title="山河已无恙" type="application/atom+xml"><link rel="icon" href="https://cdn.jsdelivr.net/gh/removeif/removeif-demo@latest/img/favicon.png"><meta name="referrer" content="no-referrer-when-downgrade"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.12.0/css/all.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/highlight.js/9.12.0/styles/dracula.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.12.0/css/all.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css?family=Ubuntu:400,600|Source+Code+Pro|Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Microsoft YaHei:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&amp;amp;subset=latin,latin-ext|Inconsolata|Itim|Lobster.css"><script src="https://cdnjs.loli.net/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="/js/globalUtils.js"></script><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?3f06f2b732a5b1034c989f74e28d0eea";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css"><script src="https://cdnjs.loli.net/ajax/libs/pace/1.0.2/pace.min.js"></script><link rel="stylesheet" href="/live2d/waifu.css"><script type="text/javascript" async src="/live2d/autoload.js"></script><meta name="generator" content="Hexo 5.4.2"></head><body class="is-3-column has-navbar-fixed-top"><nav class="navbar navbar-main is-fixed-top"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.png" alt="山河已无恙" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/media">影音</a><a class="navbar-item" href="/album">相册</a><a class="navbar-item" href="/friend">友链</a><a class="navbar-item" href="/self-talking">生活小记</a><a class="navbar-item" href="/message">留言墙</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Gitee" href="https://gitee.com/liruilonger"><i class="fab fa-git-square fa-1x"></i></a><a class="navbar-item" target="_blank" rel="noopener" title="GitHub" href="https://github.com/LIRUILONGS"><i class="fab fa-github fa-1x"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul fa-1x"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search fa-1x"></i></a><a class="navbar-item" id="night-nav" title="Night Mode" href="javascript:;"><i class="fas fa-moon fa-1x" id="night-icon"></i></a></div></div></div></nav><script type="text/javascript" src="/js/theme-setting.js"></script><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-9-widescreen"><!--!--><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2021-08-18  <a class="commentCountImg" href="/2021/08/18/Java/%E5%85%B3%E4%BA%8E%E9%A1%B9%E7%9B%AE%E4%B8%AD%E5%90%AF%E5%8A%A8%E8%84%9A%E6%9C%AC%E7%BC%96%E5%86%99%E7%9A%84%E4%B8%80%E4%BA%9B%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/#comment-container"><span class="display-none-class">834fbfae647e0df380c0738d8d58b111</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="834fbfae647e0df380c0738d8d58b111">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>1 小时  <i class="fas fa-pencil-alt"> </i>6.7 k</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">关于项目中启动脚本编写的一些笔记整理</h1><div class="content"><blockquote>
<p><strong><font color=seagreen>流年似水，有些事情一下子过去了，有的事情很久也过不去。</font></strong><br><strong><font color=seagreen>流年似水，过去的事过去了，未过去的事也不能叫我惊讶。</font></strong><br><strong><font color=seagreen>但是岁月如流，一切都已发生过，发生过的事再也没有改变的余地。</font></strong><br><strong><font color=seagreen>虽然岁月如流，什么都会过去，但总有些东西发生了就不能抹煞。</font></strong><br><strong><font color=seagreen>似水流年是一个人所有的一切，只有这个东西，才真正归你所有。其余的一切，都是片刻的欢娱和不幸，转眼间就已跑到那似水流年里去了。                                     ——–王小波</font></strong></p>
</blockquote>
<span id="more"></span>
<h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><hr>
<ul>
<li>公司项目里看到，之前的项目都是在物理机部署的，而且大都是Server，没搞过，这里整齐学习。</li>
<li>博文分为两部分： 项目启动脚本总结，java常用启动参数，，<a target="_blank" rel="noopener" href="https://blog.csdn.net/alex_xfboy/article/details/50717692">启动参数部分参考</a><blockquote>
<p><strong><font color=seagreen>流年似水，有些事情一下子过去了，有的事情很久也过不去。</font></strong><br><strong><font color=seagreen>流年似水，过去的事过去了，未过去的事也不能叫我惊讶。</font></strong><br><strong><font color=seagreen>但是岁月如流，一切都已发生过，发生过的事再也没有改变的余地。</font></strong><br><strong><font color=seagreen>虽然岁月如流，什么都会过去，但总有些东西发生了就不能抹煞。</font></strong><br><strong><font color=seagreen>似水流年是一个人所有的一切，只有这个东西，才真正归你所有。其余的一切，都是片刻的欢娱和不幸，转眼间就已跑到那似水流年里去了。                                     ——–王小波</font></strong></p>
</blockquote>
</li>
</ul>
<hr>
<h2 id="小项目启动脚本"><a href="#小项目启动脚本" class="headerlink" title="小项目启动脚本"></a><font color=amber>小项目启动脚本</font></h2><h3 id="定时任务类型的小项目"><a href="#定时任务类型的小项目" class="headerlink" title="定时任务类型的小项目"></a><font color=royalblue>定时任务类型的小项目</font></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh </span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$path</span></span><br><span class="line">mainclasspath=<span class="string">&quot;com.liruilong.uag.job.StartJob&quot;</span></span><br><span class="line">classpath=<span class="string">&quot;/demo/com_AAA/target/classes&quot;</span></span><br><span class="line">pathtmp=<span class="string">&#x27;&#x27;</span> </span><br><span class="line"><span class="keyword">for</span> jarpath <span class="keyword">in</span> `ls /demo/com_AAA/lib/*.jar` </span><br><span class="line"><span class="keyword">do</span> </span><br><span class="line">classpath=<span class="variable">$classpath</span>:<span class="variable">$jarpath</span> </span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">classpath=<span class="variable">$classpath</span>:/demo/com_AAA/demo.jar</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$classpath</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$mainclasspath</span></span><br><span class="line"> nohup java -Xmx1024m -classpath <span class="variable">$classpath</span> <span class="variable">$mainclasspath</span> &gt; /dev/null  &amp;</span><br></pre></td></tr></table></figure>
<h3 id="项目分开写-start-sh"><a href="#项目分开写-start-sh" class="headerlink" title="项目分开写 start.sh"></a><font color=chocolate>项目分开写 start.sh</font></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取脚本名字</span></span><br><span class="line">PRG=<span class="variable">$0</span></span><br><span class="line"><span class="comment">## </span></span><br><span class="line"><span class="keyword">while</span> [ -h <span class="string">&quot;<span class="variable">$PRG</span>&quot;</span> ] ; <span class="keyword">do</span></span><br><span class="line">  ls=`ls -ld <span class="string">&quot;<span class="variable">$PRG</span>&quot;</span>`</span><br><span class="line">  link=`expr <span class="string">&quot;<span class="variable">$ls</span>&quot;</span> : <span class="string">&#x27;.*-&gt; \(.*\)$&#x27;</span>`</span><br><span class="line">  <span class="keyword">if</span> expr <span class="string">&quot;<span class="variable">$link</span>&quot;</span> : <span class="string">&#x27;.*/.*&#x27;</span> &gt; /dev/null; <span class="keyword">then</span></span><br><span class="line">    PRG=<span class="string">&quot;<span class="variable">$link</span>&quot;</span></span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    PRG=<span class="string">&quot;`dirname <span class="variable">$PRG</span>`/<span class="variable">$link</span>&quot;</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"> PRGDIR=`dirname <span class="variable">$&#123;PRG&#125;</span>`</span><br><span class="line">MY_HOME=`<span class="built_in">cd</span> .; <span class="built_in">pwd</span>`</span><br><span class="line"> OLDCLASSPATH=<span class="variable">$&#123;CLASSPATH&#125;</span></span><br><span class="line">CLASSPATH=.</span><br><span class="line"> <span class="keyword">for</span> i <span class="keyword">in</span> ./lib/*.jar ; <span class="keyword">do</span></span><br><span class="line">  CLASSPATH=<span class="variable">$&#123;CLASSPATH&#125;</span>:<span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"> <span class="keyword">for</span> i <span class="keyword">in</span> ./jettyLib/*.jar ; <span class="keyword">do</span></span><br><span class="line">  CLASSPATH=<span class="variable">$&#123;CLASSPATH&#125;</span>:<span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"> <span class="built_in">echo</span> <span class="variable">$&#123;CLASSPATH&#125;</span></span><br><span class="line"> <span class="keyword">if</span> [ -z <span class="string">&quot;<span class="variable">$JAVA_HOME</span>&quot;</span> ] ; <span class="keyword">then</span></span><br><span class="line">  JAVA=`<span class="built_in">which</span> java`</span><br><span class="line">  <span class="keyword">if</span> [ -z <span class="string">&quot;<span class="variable">$JAVA</span>&quot;</span> ] ; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Cannot find JAVA. Please set your PATH.&quot;</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">  JAVA_BINDIR=`dirname <span class="variable">$JAVA</span>`</span><br><span class="line">  JAVA_HOME=<span class="variable">$JAVA_BINDIR</span>/..</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$JAVACMD</span>&quot;</span> = <span class="string">&quot;&quot;</span> ] ; <span class="keyword">then</span></span><br><span class="line">   JAVACMD=<span class="variable">$JAVA_HOME</span>/bin/java</span><br><span class="line">   RMICMD=<span class="variable">$JAVA_HOME</span>/bin/rmiregistry</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ -f <span class="variable">$&#123;JAVA_HOME&#125;</span>/lib/tools.jar ] ; <span class="keyword">then</span></span><br><span class="line">   CLASSPATH=<span class="variable">$&#123;CLASSPATH&#125;</span>:<span class="variable">$&#123;JAVA_HOME&#125;</span>/lib/tools.jar</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"> <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$OLDCLASSPATH</span>&quot;</span> != <span class="string">&quot;&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">  CLASSPATH=<span class="variable">$&#123;CLASSPATH&#125;</span>:<span class="variable">$&#123;OLDCLASSPATH&#125;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment">#start npi_app</span></span><br><span class="line">MY_HOME=`<span class="built_in">pwd</span>`/..</span><br><span class="line"> instanceCount=`ps -ef|tr -s <span class="string">&#x27; &#x27;</span>|sort -n|grep PGM_ID=AZONE_NPI |awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>|wc -l`</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$instanceCount</span> -gt 1 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&#x27;AZONE_NPI  already running !&#x27;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&#x27;AZONE_NPI  is starting ...&#x27;</span></span><br><span class="line"> MEM_ARGS=<span class="string">&quot;-verbosegc  -Xms2048m  -Xmx2048m -Xloggc:./log/gc.log&quot;</span></span><br><span class="line"><span class="variable">$JAVACMD</span> -Dserver.ip=10.128.92.66 -DPGM_ID=AZONE_NPI -DAPP_NAME=AZONE_NPI  <span class="variable">$&#123;MEM_ARGS&#125;</span> -Dfile.encoding=GBK -Dconfigfile=<span class="string">&quot;./config/isap.xml&quot;</span> -cp .:./webRoot/WEB-INF/classes:log4j.properties:<span class="variable">$&#123;CLASSPATH&#125;</span> com...xx.xx.xx.DispatcherCommand 4G_GROUP_NET &gt;/dev/null &amp; </span><br><span class="line"> <span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<h3 id="项目分开写-stop-sh"><a href="#项目分开写-stop-sh" class="headerlink" title="项目分开写  stop.sh"></a><font color=chocolate>项目分开写  stop.sh</font></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pids=`ps -ef|grep java|grep AZONE_NPI |awk <span class="string">&#x27;&#123;printf $2&quot; &quot;&#125;&#x27;</span>`</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;will kill process ids:<span class="variable">$pids</span>&quot;</span></span><br><span class="line"><span class="built_in">kill</span> -9 <span class="variable">$pids</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;kill successed&#x27;</span></span><br></pre></td></tr></table></figure>
<h2 id="springboot-项目启动脚本-没有使用-jar-方式，"><a href="#springboot-项目启动脚本-没有使用-jar-方式，" class="headerlink" title="springboot 项目启动脚本 ,没有使用-jar 方式，"></a><font color=tomato>springboot 项目启动脚本 ,没有使用-jar 方式，</font></h2><h4 id="run-sh"><a href="#run-sh" class="headerlink" title="run.sh"></a><font color=amber>run.sh</font></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"><span class="comment"># ======JAVA 环境变量校验========</span></span><br><span class="line"><span class="comment"># 声明变量</span></span><br><span class="line">ACTIVE_PROFILE=db,mq,redis,prod</span><br><span class="line">TASK_GROUP_ID=1 </span><br><span class="line"><span class="comment"># 如果 $&#123;JAVA_HOME&#125;/bin/java 不存在，那么把 $&#123;JAVA_HOME&#125; 的值给 JAVA_HOME</span></span><br><span class="line">[ ! -e <span class="string">&quot;<span class="variable">$&#123;JAVA_HOME&#125;</span>/bin/java&quot;</span> ] &amp;&amp; JAVA_HOME=<span class="variable">$&#123;JAVA_HOME&#125;</span></span><br><span class="line"><span class="comment"># 如果 $JAVA_HOME/bin/java  还不存在，那么/usr/local/jdk1.8.0_144 给 JAVA_HOME</span></span><br><span class="line">[ ! -e <span class="string">&quot;<span class="variable">$JAVA_HOME</span>/bin/java&quot;</span> ] &amp;&amp; JAVA_HOME=/usr/<span class="built_in">local</span>/jdk1.8.0_144</span><br><span class="line">[ ! -e <span class="string">&quot;<span class="variable">$JAVA_HOME</span>/bin/java&quot;</span> ] &amp;&amp; JAVA_HOME=/usr/<span class="built_in">local</span>/java/jdk</span><br><span class="line">[ ! -e <span class="string">&quot;<span class="variable">$JAVA_HOME</span>/bin/java&quot;</span> ] &amp;&amp; JAVA_HOME=/usr/<span class="built_in">local</span>/jdk</span><br><span class="line"><span class="comment"># 如果 $JAVA_HOME 为空</span></span><br><span class="line"><span class="keyword">if</span> [ -z <span class="string">&quot;<span class="variable">$JAVA_HOME</span>&quot;</span> ] ; <span class="keyword">then</span></span><br><span class="line">  JAVA=<span class="variable">$&#123;JAVA_HOME&#125;</span>/bin/java</span><br><span class="line"><span class="comment"># 如果当前用户有可执行下面命令的权限</span></span><br><span class="line"><span class="keyword">elif</span> [ -x <span class="string">&quot;<span class="subst">$(command -v java)</span>&quot;</span> ] ; <span class="keyword">then</span></span><br><span class="line"><span class="comment"># 把java命令的解释器地址给 JAVA变量 </span></span><br><span class="line">  JAVA=`<span class="built_in">command</span> -v java`</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="comment">#  提示错误，并重定向到标准错误</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&#x27;Error: java is not installed.&#x27;</span> &gt;&amp;2</span><br><span class="line"><span class="comment">#  指定退出状态码 1  一般性未知错误，</span></span><br><span class="line">  <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment"># set ACTIVE_PROFILE default val, if ACTIVE_PROFILE is empty</span></span><br><span class="line"><span class="comment">#  active_profile 没有值，警告赋值。</span></span><br><span class="line"><span class="keyword">if</span> [ ! <span class="variable">$ACTIVE_PROFILE</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;Warn: spring active profile[ACTIVE_PROFILE] not set in env, use default profile: dev&#x27;</span></span><br><span class="line">    ACTIVE_PROFILE=<span class="string">&#x27;dev&#x27;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment"># switch to parent dir of shell script.</span></span><br><span class="line"><span class="comment"># cd到当前脚本目录下的上一层目录</span></span><br><span class="line"><span class="built_in">cd</span> $(dirname <span class="variable">$0</span>)/..</span><br><span class="line"><span class="comment"># 把当前目录给BASE_DIR</span></span><br><span class="line"><span class="built_in">export</span> BASE_DIR=$(<span class="built_in">pwd</span>)</span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$&#123;BASE_DIR&#125;</span>/config:<span class="variable">$&#123;CLASSPATH&#125;</span></span><br><span class="line"><span class="comment">################# app options ###############</span></span><br><span class="line">APP_ID=<span class="string">&quot;demo&quot;</span></span><br><span class="line">MAIN_CLASS=<span class="string">&quot;com.liruilong.demo.DemoApplication&quot;</span></span><br><span class="line"><span class="comment">################# user options ###############</span></span><br><span class="line">USER_OPT=<span class="string">&quot;-Dlogging.config=<span class="variable">$&#123;DATA_FILE_DIR:-.&#125;</span>/logback.xml -Dspring.profiles.active=<span class="variable">$&#123;ACTIVE_PROFILE&#125;</span> -Dspring.config.location=classpath:../config/ -Drocketmq.client.log.loadconfig=false -Dfile.encoding=UTF-8&quot;</span></span><br><span class="line"><span class="comment">################# java options ###############</span></span><br><span class="line">JAVA_OPT=<span class="string">&quot;-server -Xmx1024m  -Xms512m -Xmn512m&quot;</span></span><br><span class="line"><span class="comment"># set JAVA_OPT_PARM default val, if JAVA_OPT_PARM is empty</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$JAVA_OPT_PARM</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;Warn: use the new [JAVA_OPT_PARM] by set in env&#x27;</span></span><br><span class="line">    JAVA_OPT=<span class="string">&quot;-server <span class="variable">$&#123;JAVA_OPT_PARM&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment"># jetty suggestion</span></span><br><span class="line">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -verbose:gc&quot;</span></span><br><span class="line">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -Xloggc:./logs/gc.log -XX:-UseGCOverheadLimit -XX:+HeapDumpOnOutOfMemoryError -XX:+PrintGCDetails -XX:+PrintGCDateStamps&quot;</span></span><br><span class="line"><span class="comment"># r&amp;d suggestion</span></span><br><span class="line">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -XX:HeapDumpPath=./logs/dumpfile.hprof&quot;</span></span><br><span class="line">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -XX:+HeapDumpOnOutOfMemoryError&quot;</span></span><br><span class="line"><span class="comment"># other like rocketmq</span></span><br><span class="line"><span class="comment">#JAVA_OPT=&quot;$&#123;JAVA_OPT&#125; -XX:+AlwaysPreTouch&quot;</span></span><br><span class="line">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -XX:MaxDirectMemorySize=1g&quot;</span></span><br><span class="line">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -XX:-UseLargePages -XX:-UseBiasedLocking&quot;</span></span><br><span class="line">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -Djava.ext.dirs=<span class="variable">$&#123;JAVA_HOME&#125;</span>/jre/lib/ext:<span class="variable">$&#123;BASE_DIR&#125;</span>/lib&quot;</span></span><br><span class="line">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -cp <span class="variable">$&#123;CLASSPATH&#125;</span>&quot;</span></span><br><span class="line"><span class="comment">################# java options ###############</span></span><br><span class="line"><span class="comment">################# pid  ###############</span></span><br><span class="line"><span class="comment">#ONE JAR MORE INSTANCE</span></span><br><span class="line">PID=$(ps -ef|grep <span class="string">&quot;\\-DappId=<span class="variable">$&#123;APP_ID&#125;</span>&quot;</span> | grep -v grep|awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>)</span><br><span class="line"><span class="comment">#ONE JAR ONE INSTANCE</span></span><br><span class="line"><span class="comment">#PID=$(fuser $&#123;JAR_FILE_NAME&#125; 2&gt;/dev/null | xargs echo)</span></span><br><span class="line"><span class="comment">################# pid  ###############</span></span><br><span class="line"> <span class="function"><span class="title">start</span></span>()&#123;</span><br><span class="line">    <span class="keyword">if</span> ! <span class="built_in">kill</span> -0 <span class="variable">$&#123;PID&#125;</span> 2&gt;/dev/null ;<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;APP_ID&#125;</span> is starting!&quot;</span></span><br><span class="line">        <span class="variable">$&#123;JAVA&#125;</span> <span class="variable">$&#123;JAVA_OPT&#125;</span> <span class="variable">$&#123;USER_OPT&#125;</span> -DappId=<span class="variable">$&#123;APP_ID&#125;</span>  -DTASK_GROUP_ID=<span class="variable">$&#123;TASK_GROUP_ID&#125;</span> <span class="variable">$&#123;MAIN_CLASS&#125;</span> &gt;/dev/null 2&gt;&amp;1 &amp;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;Failed to start &#x27;<span class="variable">$&#123;APP_ID&#125;</span>&#x27;,because it is running (pid:<span class="variable">$&#123;PID&#125;</span>).&quot;</span></span><br><span class="line">    <span class="keyword">fi</span> </span><br><span class="line">&#125;</span><br><span class="line"> <span class="function"><span class="title">stop</span></span>()&#123;</span><br><span class="line">    <span class="keyword">if</span>  <span class="built_in">kill</span> -0 <span class="variable">$&#123;PID&#125;</span> 2&gt;/dev/null ;<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">kill</span> <span class="variable">$&#123;PID&#125;</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;killing <span class="variable">$&#123;APP_ID&#125;</span>&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;Failed to stop &#x27;<span class="variable">$&#123;APP_ID&#125;</span>&#x27;,It is not running.&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"> <span class="function"><span class="title">status</span></span>()&#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">kill</span> -0 <span class="variable">$&#123;PID&#125;</span> 2&gt;/dev/null ;<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;APP_ID&#125;</span> (pid:<span class="variable">$&#123;PID&#125;</span>) is running.&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;APP_ID&#125;</span> is not running.&quot;</span></span><br><span class="line">    <span class="keyword">fi</span> </span><br><span class="line">&#125;</span><br><span class="line"> <span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span> </span><br><span class="line">    start)</span><br><span class="line">        start;;</span><br><span class="line">    stop)</span><br><span class="line">        stop;;</span><br><span class="line">    status)</span><br><span class="line">        status;;</span><br><span class="line">    *)</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;Usage: <span class="variable">$0</span> start|stop|status&quot;</span></span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"><span class="comment">## 防止容器启动后自动退出，导致应用无法启动；</span></span><br><span class="line">tail -f /dev/null</span><br></pre></td></tr></table></figure>
<h2 id="springboot-项目-容器类启动脚本-使用-jar方式"><a href="#springboot-项目-容器类启动脚本-使用-jar方式" class="headerlink" title="springboot 项目 容器类启动脚本,使用 -jar方式"></a><font color=blue>springboot 项目 容器类启动脚本,使用 -jar方式</font></h2><h4 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a><font color=royalblue>Dockerfile</font></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#基础镜像docker build -t uncp-npi:v1.0.0 .</span></span><br><span class="line">FROM centos7-java-pure:openjdk1.8.151</span><br><span class="line"><span class="comment">#维护人员</span></span><br><span class="line">MAINTAINER liruilongs.github.io</span><br><span class="line"><span class="comment">#通过 ADD 指令复制代码到目录</span></span><br><span class="line">ADD ./target/*.tar.gz /root/</span><br><span class="line"><span class="comment">#通过 RUN 指令创建日志目录</span></span><br><span class="line">RUN mkdir -p /root/logs/ \</span><br><span class="line">&amp;&amp; touch  /root/nohup.out \</span><br><span class="line">&amp;&amp; chmod u+x /root/bin/run.sh</span><br><span class="line"><span class="comment">#通过 VOLUME 指令创建的挂载点</span></span><br><span class="line"><span class="comment">#VOLUME [&quot;/root/logs&quot;]</span></span><br><span class="line"><span class="comment">#暴露端口</span></span><br><span class="line">EXPOSE 8430</span><br><span class="line"><span class="comment">#启动脚本</span></span><br><span class="line">ENTRYPOINT [<span class="string">&quot;sh&quot;</span>,<span class="string">&quot;/root/bin/run.sh&quot;</span>]</span><br><span class="line"><span class="comment">#切换工作目录</span></span><br><span class="line">WORKDIR /root</span><br><span class="line"><span class="comment">#启动参数，会跟在 ENTRYPOINT 后面。</span></span><br><span class="line">CMD [<span class="string">&quot;start&quot;</span>]</span><br></pre></td></tr></table></figure>
<h4 id="run-sh-1"><a href="#run-sh-1" class="headerlink" title="run.sh"></a><font color=red>run.sh</font></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"><span class="comment"># shell directory</span></span><br><span class="line"><span class="comment"># cd到当前脚本下</span></span><br><span class="line">SH_DIR=$(<span class="built_in">cd</span> <span class="string">&quot;<span class="subst">$(dirname <span class="string">&quot;<span class="variable">$0</span>&quot;</span>)</span>&quot;</span>; <span class="built_in">pwd</span>)</span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$&#123;SH_DIR&#125;</span></span><br><span class="line"><span class="comment"># 判断java环境是否存在。</span></span><br><span class="line">[ ! -e <span class="string">&quot;<span class="variable">$&#123;JAVA_HOME&#125;</span>/bin/java&quot;</span> ]</span><br><span class="line"><span class="comment"># 声明全局变量</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME</span><br><span class="line"><span class="comment"># 声明java相关命令的解释器</span></span><br><span class="line">JAVA=<span class="string">&quot;<span class="variable">$&#123;JAVA_HOME&#125;</span>/bin/java&quot;</span></span><br><span class="line"><span class="comment">#JAVA=&quot;/CloudResetPwdUpdateAgent/depend/jre1.8.0_131/bin/java&quot;</span></span><br><span class="line"><span class="comment">#JAVA=&quot;/usr/lib/jvm/jre-1.8.0-openjdk.x86_64/bin/java&quot;</span></span><br><span class="line"><span class="comment">#JAVA=&quot;/usr/lib/jvm/openjdk-8u40-b25-linux-x64-10_feb_2015/java-se-8u40-ri/bin/java&quot;</span></span><br><span class="line"><span class="comment">#JAVA=&quot;/usr/lib/jvm/java-se-8u40-ri/bin/java&quot;</span></span><br><span class="line"><span class="comment">################# user options ###############</span></span><br><span class="line"><span class="comment">## 应用名称，全局环境变量获取</span></span><br><span class="line">APP_ID=<span class="string">&quot;<span class="variable">$&#123;APP_NAME&#125;</span>&quot;</span></span><br><span class="line"><span class="comment">## 应用编码：appCode参数为项目启动线程类</span></span><br><span class="line">APP_CODE=<span class="string">&quot;<span class="variable">$&#123;APP_CODE&#125;</span>&quot;</span></span><br><span class="line"><span class="comment"># 应用对应的jar包</span></span><br><span class="line">JAR_FILE_NAME=<span class="string">&quot;Demo-2.0.0-SNAPSHOT.jar&quot;</span></span><br><span class="line"><span class="comment"># 应用对应的日志文件</span></span><br><span class="line">COMMON_LOG_FILE=<span class="string">&quot;./logs/demo-inf.log&quot;</span></span><br><span class="line"><span class="comment">#appCode参数为项目启动线程类</span></span><br><span class="line"><span class="comment">#USER_OPT=&quot;-DappCode=INF_NATIVE,TEST -Dspring.config.location=classpath:./ -Dfile.encoding=UTF-8&quot;</span></span><br><span class="line"><span class="comment"># 应用配置文件，文件编码</span></span><br><span class="line">USER_OPT=<span class="string">&quot;-DappCode=<span class="variable">$&#123;APP_CODE&#125;</span> -Dspring.config.location=classpath:./ -Dfile.encoding=UTF-8&quot;</span></span><br><span class="line"><span class="comment">#DEBUG_ARGS=&quot;-Xdebug -agentlib:jdwp=transport=dt_socket,address=9999,server=y,suspend=n&quot;</span></span><br><span class="line"><span class="comment">################# user options ###############</span></span><br><span class="line"><span class="comment">################# java options ###############</span></span><br><span class="line">JAVA_OPT=<span class="string">&quot;-server -Xmx256m  -Xms256m -Djasypt.encryptor.password=OSS3&quot;</span></span><br><span class="line">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -Xmn128m&quot;</span></span><br><span class="line"><span class="comment">#JAVA_OPT=&quot;$&#123;JAVA_OPT&#125; -Xbootclasspath/a:/home/iom_cloud_mysql/iom-cloud-inf-service/&quot;</span></span><br><span class="line"><span class="comment"># jetty suggestion</span></span><br><span class="line">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -verbose:gc&quot;</span></span><br><span class="line"><span class="comment">#JAVA_OPT=&quot;$&#123;JAVA_OPT&#125; -XX:+PrintGCDateStamps -XX:+PrintGCTimeStamps -XX:+PrintGCDetails&quot;</span></span><br><span class="line">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -Xloggc:./logs/gc.log -XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles=5 -XX:GCLogFileSize=20m&quot;</span></span><br><span class="line">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -XX:+PrintTenuringDistribution&quot;</span></span><br><span class="line">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -XX:+PrintCommandLineFlags&quot;</span></span><br><span class="line">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -XX:+DisableExplicitGC&quot;</span></span><br><span class="line">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -XX:+UseConcMarkSweepGC&quot;</span></span><br><span class="line">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -XX:CMSInitiatingOccupancyFraction=80&quot;</span></span><br><span class="line"><span class="comment"># r&amp;d suggestion</span></span><br><span class="line">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -XX:HeapDumpPath=./logs/dumpfile.hprof&quot;</span></span><br><span class="line">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -XX:+HeapDumpOnOutOfMemoryError&quot;</span></span><br><span class="line"><span class="comment"># other like rocketmq</span></span><br><span class="line">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -XX:-OmitStackTraceInFastThrow&quot;</span></span><br><span class="line"><span class="comment">#JAVA_OPT=&quot;$&#123;JAVA_OPT&#125; -XX:+AlwaysPreTouch&quot;</span></span><br><span class="line">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -XX:MaxDirectMemorySize=15g&quot;</span></span><br><span class="line">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -XX:-UseLargePages -XX:-UseBiasedLocking&quot;</span></span><br><span class="line">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> <span class="variable">$&#123;EXTRAOPT&#125;</span>&quot;</span></span><br><span class="line"><span class="comment">#JAVA_OPT=&quot;$&#123;JAVA_OPT&#125;  -Djava.ext.dirs=.:lib:$&#123;JAVA_HOME&#125;/jre/lib/ext&quot;</span></span><br><span class="line"><span class="comment">#JAVA_OPT=&quot;$&#123;JAVA_OPT&#125;  -Xbootclasspath/a:/home/iom_cloud_mysql/iom-cloud-inf-service/Demo-2.0.0-SNAPSHOT.jar&quot;</span></span><br><span class="line"><span class="comment">#JAVA_OPT=&quot;$&#123;JAVA_OPT&#125; -cp .:./lib:/home/iom_cloud_mysql/demo&quot;</span></span><br><span class="line"><span class="comment">#echo $&#123;JAVA_OPT&#125;</span></span><br><span class="line"><span class="comment"># r&amp;d</span></span><br><span class="line"><span class="comment">################# java options ###############</span></span><br><span class="line"><span class="comment">################# pid  ###############</span></span><br><span class="line"><span class="comment">#ONE JAR MORE INSTANCE 一个 jar 多实例</span></span><br><span class="line">PID=$(ps -ef|grep <span class="string">&quot;\\-DappId=<span class="variable">$&#123;APP_ID&#125;</span>&quot;</span> | grep -v grep|awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>)</span><br><span class="line"><span class="comment">#ONE JAR ONE INSTANCE  一个jar 单实例</span></span><br><span class="line"><span class="comment">#PID=$(fuser $&#123;JAR_FILE_NAME&#125; 2&gt;/dev/null | xargs echo)</span></span><br><span class="line"><span class="comment">################# pid  ###############</span></span><br><span class="line"><span class="comment">## 启动方法</span></span><br><span class="line"><span class="comment">## `kill -0 pid` 不发送任何信号，但是系统会进行错误检查。所以经常用来检查一个进程是否存在，存在返回0 false ；不存在返回1   true</span></span><br><span class="line"><span class="function"><span class="title">start</span></span>()&#123;</span><br><span class="line">    <span class="comment">## 判断当前 进程是否存在</span></span><br><span class="line">    <span class="keyword">if</span> ! <span class="built_in">kill</span> -0 <span class="variable">$&#123;PID&#125;</span> 2&gt;/dev/null ;<span class="keyword">then</span></span><br><span class="line">        <span class="comment">## 输出 进程开始启动及对应的文件</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;APP_ID&#125;</span> is starting! File is <span class="variable">$&#123;JAR_FILE_NAME&#125;</span>&quot;</span></span><br><span class="line">        <span class="comment">## 非控制台下后台启动 将日志1&amp;2输出到指定位置</span></span><br><span class="line">        nohup <span class="variable">$&#123;JAVA&#125;</span> <span class="variable">$&#123;JAVA_OPT&#125;</span> <span class="variable">$&#123;USER_OPT&#125;</span> -DappId=<span class="variable">$&#123;APP_ID&#125;</span> -jar <span class="variable">$&#123;JAR_FILE_NAME&#125;</span>  &gt;&gt;  <span class="variable">$&#123;COMMON_LOG_FILE&#125;</span>  2&gt;&amp;1 &amp;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;Failed to start &#x27;<span class="variable">$&#123;APP_ID&#125;</span>&#x27;,because it is running (pid:<span class="variable">$&#123;PID&#125;</span>).&quot;</span></span><br><span class="line">    <span class="keyword">fi</span> </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">## 停止方法</span></span><br><span class="line"><span class="function"><span class="title">stop</span></span>()&#123;</span><br><span class="line">    <span class="keyword">if</span>  <span class="built_in">kill</span> -0 <span class="variable">$&#123;PID&#125;</span> 2&gt;/dev/null ;<span class="keyword">then</span></span><br><span class="line">    <span class="comment"># 正常结束进程，15是 kill 命令的默认信号。</span></span><br><span class="line">        <span class="built_in">kill</span> <span class="variable">$&#123;PID&#125;</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;killing <span class="variable">$&#123;APP_ID&#125;</span>&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;Failed to stop &#x27;<span class="variable">$&#123;APP_ID&#125;</span>&#x27;,It is not running.&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"> <span class="function"><span class="title">status</span></span>()&#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">kill</span> -0 <span class="variable">$&#123;PID&#125;</span> 2&gt;/dev/null ;<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;APP_ID&#125;</span> (pid:<span class="variable">$&#123;PID&#125;</span>) is running.&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;APP_ID&#125;</span> is not running.&quot;</span></span><br><span class="line">    <span class="keyword">fi</span> </span><br><span class="line">&#125;</span><br><span class="line"> <span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span> </span><br><span class="line">    start)</span><br><span class="line">        start;;</span><br><span class="line">    stop)</span><br><span class="line">        stop;;</span><br><span class="line">    status)</span><br><span class="line">        status;;</span><br><span class="line">    *)</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;Usage: <span class="variable">$0</span> start|stop|status&quot;</span></span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"><span class="comment">## 防止容器启动后自动退出，导致应用无法启动；</span></span><br><span class="line">tail -f /dev/null</span><br></pre></td></tr></table></figure>
<h5 id="kill-pid-和-kill-9-pid-的区别"><a href="#kill-pid-和-kill-9-pid-的区别" class="headerlink" title="kill pid 和 kill -9 pid 的区别"></a>kill pid 和 kill -9 pid 的区别</h5><p><img src="https://img-blog.csdnimg.cn/53e87433e43a439cbc5b13645ea1ca51.png" alt="在这里插入图片描述"></p>
<table>
<thead>
<tr>
<th>信号编号</th>
<th>信号名</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>EXIT</td>
<td>程序退出时收到该信息。</td>
</tr>
<tr>
<td>1</td>
<td>HUP</td>
<td>挂掉电话线或终端连接的挂起信号，这个信号也会造成某些进程在没有终止的情况下重新初始化。</td>
</tr>
<tr>
<td>2</td>
<td>INT</td>
<td>表示结束进程，但并不是强制性的，常用的 “Ctrl+C” 组合键发出就是一个 kill -2 的信号。</td>
</tr>
<tr>
<td>3</td>
<td>QUIT</td>
<td>退出。</td>
</tr>
<tr>
<td>9</td>
<td>KILL</td>
<td>杀死进程，即强制结束进程。</td>
</tr>
<tr>
<td>11</td>
<td>SEGV</td>
<td>段错误。</td>
</tr>
<tr>
<td>15</td>
<td>TERM</td>
<td>正常结束进程，是 kill 命令的默认信号。</td>
</tr>
</tbody></table>
<h5 id="常用的kill-命令及其信号解释"><a href="#常用的kill-命令及其信号解释" class="headerlink" title="常用的kill 命令及其信号解释"></a>常用的kill 命令及其信号解释</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[kino@hadoop102 bin]$ jps</span><br><span class="line">20097 Jps</span><br><span class="line">19836 JobHistoryServer</span><br><span class="line">19773 NodeManager</span><br><span class="line">[kino@hadoop102 bin]$ <span class="built_in">kill</span> 19836</span><br><span class="line"><span class="comment"># 杀死 PID 为 19836 的 JobHistoryServer 进程， 默认信号是 15， 正常停止</span></span><br><span class="line"><span class="comment"># 如果默认信号 15 不能杀死该进程， 则可以尝试使用 信号9， 强制杀死进程</span></span><br><span class="line">[kino@hadoop102 bin]$ jps</span><br><span class="line">20115 Jps</span><br><span class="line">19773 NodeManager</span><br><span class="line"><span class="comment"># PID 为 19836 的 JobHistoryServer 进程 已被杀死</span></span><br></pre></td></tr></table></figure>
<h5 id="使用“-1”信号，让进程重启。"><a href="#使用“-1”信号，让进程重启。" class="headerlink" title="使用“-1”信号，让进程重启。"></a>使用“-1”信号，让进程重启。</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[kino@hadoop102 bin]$ <span class="built_in">kill</span> -1 19773 </span><br></pre></td></tr></table></figure>
<h5 id="使用-“-9”-强制杀死进程"><a href="#使用-“-9”-强制杀死进程" class="headerlink" title="使用 “-9” 强制杀死进程"></a>使用 “-9” 强制杀死进程</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[kino@hadoop102 bin]$ <span class="built_in">kill</span> -9 19773 </span><br></pre></td></tr></table></figure>
<h6 id="我们在使用-kill-命令的时候，-可以传入-信号编号，也可以传入信号名"><a href="#我们在使用-kill-命令的时候，-可以传入-信号编号，也可以传入信号名" class="headerlink" title="我们在使用 kill 命令的时候， 可以传入 信号编号，也可以传入信号名"></a>我们在使用 kill 命令的时候， 可以传入 信号编号，也可以传入信号名</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">kill</span> PID 等价于 <span class="built_in">kill</span> -15 PID 等价于 <span class="built_in">kill</span> -s TERM	</span><br><span class="line"> <span class="built_in">kill</span> -9 PID 等价与 <span class="built_in">kill</span> -s SIGKILL PID</span><br><span class="line"> <span class="built_in">kill</span> -1 PID 等价于 <span class="built_in">kill</span> -s SIGHUP PID</span><br></pre></td></tr></table></figure>
<h2 id="java-启动参数整理"><a href="#java-启动参数整理" class="headerlink" title="java 启动参数整理"></a><font color=green>java 启动参数整理</font></h2><h3 id="java启动参数共分为三类："><a href="#java启动参数共分为三类：" class="headerlink" title="java启动参数共分为三类："></a><font color=royalblue>java启动参数共分为三类</font>：</h3><ul>
<li><strong><font color=royalblue>标准参数<code>(-)</code>，所有的<code>JVM</code>实现都<code>必须实现</code>这些<code>参数的功能</code>，而且<code>向后兼容</code>；</font></strong></li>
<li><strong><font color=seagreen>非标准参数<code>(-X)</code>，默认<code>jvm</code>实现这些参数的功能，但是并<code>不保证</code>所有<code>jvm</code>实现都满足，且<code>不保证</code>向后兼容；</font></strong></li>
<li><strong><font color=royalblue>非<code>Stable</code>参数<code>(-XX)</code>，此类参数各个<code>jvm实现</code>会有所不同，将来可能会<code>随时取消</code>，需要慎重使用；</font></strong></li>
</ul>
<h3 id="一．标准参数"><a href="#一．标准参数" class="headerlink" title="一．标准参数"></a><font color=brown>一．标准参数</font></h3><p><img src="https://img-blog.csdnimg.cn/d751e01d32ec4e4caa8a70d006be6ae6.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Nhbmhld3V5YW5n,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<table>
<thead>
<tr>
<th><strong><font color=orange>参数名称</font></strong></th>
<th><strong><font color=amber>描述</font></strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>-client</code></td>
<td>设置<font color=amber>jvm使用client模式</font>，特点是<code>启动速度比较快</code>，但运行时<code>性能</code>和<code>内存管理</code>效率<code>不高</code>，通常用于<code>客户端应用程序</code>或者<code>PC应用开发和调试</code>。</td>
</tr>
<tr>
<td><code>-server</code></td>
<td>设置<font color=yellowgreen>jvm使server模式</font>，特点是<code>启动速度比较慢</code>，但运行时<code>性能和内存管理</code>效率<code>很高</code>，适用于<code>生产环境</code>。在具有<code>64位能力的jdk环境</code>下将<code>默认启用该模式</code>，而<code>忽略-client参数</code>。</td>
</tr>
<tr>
<td><code>-agentlib:libname[=options]</code></td>
<td><font color=camel>用于装载本地lib包</font>；  其中 <code>libname为本地代理库文件名</code>，默认搜索路径为<code>环境变量PATH</code>中的路径，<code>options</code>为传给本地库启动时的参数，多个参数之间用逗号分隔。在 Windows平台上jvm搜索本地库名为<code>libname.dll</code>的文件，在linux上jvm搜索本地库名为<code>libname.so</code>的文件，搜索路径环境变量在不同系统上有所不同，比如Solaries上就默认搜索LD_LIBRARY_PATH。  比如：</td>
</tr>
<tr>
<td><code>-agentlib:hprof</code></td>
<td><font color=tomato>用来获取jvm的运行情况，包括CPU、内存、线程等的运行数据</font>，并可输出到<font color=orange>指定文件</font>中；windows中搜索路径为<code>JRE_HOME/bin/hprof.dll。</code></td>
</tr>
<tr>
<td><code>-agentpath:pathname[=options]</code></td>
<td><font color=blue>按全路径装载本地库</font>，不再搜索<code>PATH</code>中的路径；其他功能和agentlib相同；更多的信息待续，在后续的JVMTI部分会详述。</td>
</tr>
<tr>
<td><code>-classpath classpath  -cp classpath</code></td>
<td><div>  <font color=seagreen>告知<code>jvm</code>搜索目录名、jar文档名、zip文档名，之间用分号;分隔</font>；使用<code>-classpath</code>后<code>jvm</code>将不再使用<code>CLASSPATH</code>中的类搜索路径，如果<code>-classpath</code>和<code>CLASSPATH</code>都没有设置，则jvm使用<code>当前路径(.)</code>作为<code>类搜索路径</code>。  <font color=yellowgreen>jvm搜索类的方式和顺序</font>为：<code>Bootstrap</code>，<code>Extension</code>，<code>User</code>。 <table></td>
</tr>
<tr>
<td><code>Bootstrap</code>中的路径是<code>jvm自带的jar或zip文件</code>，jvm首先搜索这些包文件，用<code>System.getProperty(&quot;sun.boot.class.path&quot;)</code>可得到搜索路径。</td>
<td></td>
</tr>
<tr>
<td><code>Extension</code>是位于<code>JRE_HOME/lib/ext</code>目录下的<code>jar</code>文件，jvm在搜索完Bootstrap后就搜索该目录下的jar文件，用<code>System.getProperty(&quot;java.ext.dirs&quot;)</code>可得到搜索路径。</td>
<td></td>
</tr>
<tr>
<td><code>User</code>搜索顺序为当前路径<code>.、CLASSPATH、-classpath</code>，jvm最后搜索这些目录，用<code>System.getProperty(&quot;java.class.path&quot;)可得到搜索路径。</code></td>
<td></table></div></td>
</tr>
<tr>
<td><code>-Dproperty=value</code></td>
<td><font color=chocolate>设置系统属性名&#x2F;值对</font>，运行在此jvm之上的应用程序可用<code>System.getProperty(&quot;property&quot;)</code>得到<code>value</code>的值。  如果<code>value</code>中有空格，则需要用<code>双引号将该值括起来</code>，如<code>-Dname=&quot;space string&quot;</code>。  该参数通常用于设置<code>系统级全局变量值</code>，如<code>配置文件路径</code>，以便该属性在程序中任何地方都可访问。</td>
</tr>
<tr>
<td><code>-enableassertions[:&lt;package name&gt;&quot;...&quot; 或者 :&lt;classname&gt; ]  -ea[:&lt;package name&gt;&quot;...&quot; 或者 :&lt;class name&gt; ] </code></td>
<td>上述参数就用来<font color=brown>设置jvm是否启动断言机制</font>(从JDK 1.4开始支持)，<code>缺省时jvm关闭断言机制</code>。   用<code>-ea </code>可打开断言机制，不加<packagename>和classname时运行所有包和类中的断言，如果希望只运行某些包或类中的断言，可将包名或类名加到-ea之后。例如要启动包com.wombat.fruitbat中的断言，可用命令java -ea:com.wombat.fruitbat…<Main Class>。</td>
</tr>
<tr>
<td><code>-disableassertions[:&lt;package name&gt;&quot;...&quot; 或者 :&lt;class ; ]  -da[:&lt;package name&gt;&quot;...&quot; 或者 :&lt;class name&gt; ] </code></td>
<td><font color=yellowgreen>用来设置jvm关闭断言处理</font>，packagename和classname的使用方法和-ea相同，jvm默认就是关闭状态。该参数一般用于相同package内某些class不需要断言的场景，比如com.wombat.fruitbat需要断言，但是com.wombat.fruitbat.Brickbat该类不需要，则可以如下运行：  java -ea:com.wombat.fruitbat…-da:com.wombat.fruitbat.Brickbat <MainClass>。 <code>-enablesystemassertions  -esa   激活系统类的断言</code>。 <code>-disablesystemassertions  -dsa   关闭系统类的断言</code>。</td>
</tr>
<tr>
<td><code>-jar</code></td>
<td><font color=purple>指定以<code>jar包</code>的形式执行一个应用程序</font>。  要这样执行一个应用程序，必须让<code>jar</code>包的<code>manifest</code>文件中<code>声明初始加载的Main-class</code>，当然那Main-class必须有public static void main(String[] args)方法。</td>
</tr>
<tr>
<td><code>-javaagent:jarpath[=options]</code></td>
<td><font color=red>指定<code>jvm启动时装入java语言设备代理</code></font>。  <code>Jarpath</code> 文件中的<code>mainfest</code>文件必须有<code>Agent-Class</code>属性。<code>代理类</code>也必须实现公共的静态<code>public static void premain(String agentArgs, Instrumentation inst)方法(和main方法类似)</code>。当<code>jvm</code>初始化时，<code>将按代理类的说明顺序调用premain方法；具体参见 java.lang.instrument软件包的描述。</code></td>
</tr>
<tr>
<td><code>-verbose  -verbose:class</code></td>
<td><font color=brown>输出<code>jvm载入类的相关信息</code></font>，当jvm报告说找不到类或者类冲突时可此进行诊断。</td>
</tr>
<tr>
<td><code>-verbose:gc </code></td>
<td><font color=green>输出每次GC的相关情况。</font></td>
</tr>
<tr>
<td><code>-verbose:jni</code></td>
<td><font color=tomato>输出native方法调用的相关情况，一般用于诊断jni调用错误信息。</font></td>
</tr>
<tr>
<td><code>-version</code></td>
<td><font color=tomato>输出java的版本信息，比如jdk版本、vendor、model。</font></td>
</tr>
<tr>
<td><code>-version:release</code></td>
<td><font color=seagreen>指定class或者jar运行时需要的jdk版本信息</font>；若指定版本未找到，则以能找到的系统默认jdk版本执行；一般情况下，对于jar文件，可以在manifest文件中指定需要的版本信息，而不是在命令行。  release中可以指定单个版本，也可以指定一个列表，中间用空格隔开，且支持复杂组合，比如：  <code>-version:&quot;1.5.0_04 1.5*&amp;1.5.1_02+&quot;</code>  指定class或者jar需要jdk版本为1.5.0_04或者是1.5系列中比1.5.1_02更高的所有版本。</td>
</tr>
<tr>
<td><code>-showversion</code></td>
<td><font color=purple>输出java版本信息(与-version相同)之后，继续输出java的标准参数列表及其描述。</font></td>
</tr>
<tr>
<td><code>-? -help</code></td>
<td><font color=brown>输出java标准参数列表及其描述</font>。</td>
</tr>
</tbody></table>
<h3 id="二．非标准参数"><a href="#二．非标准参数" class="headerlink" title="二．非标准参数"></a><font color=blue>二．非标准参数</font></h3><h4 id="X-输出非标准的参数列表及其描述。"><a href="#X-输出非标准的参数列表及其描述。" class="headerlink" title="-X  输出非标准的参数列表及其描述。"></a><font color=blue>-X  输出非标准的参数列表及其描述。</font></h4><p> 以上的这些参数我们经常会在很多情况下用到多个的组合，比如我们在用<code>JProfiler</code>进行跟踪监控时，需要在被监控<code>java</code>启动参数中加上如下配置：<code>-agentlib:jprofilerti=port=8849 -Xbootclasspath/a:/usr/local/jprofiler5/bin/agent.jar</code>其中就用到两个<code>-agentlib</code>和<code>-X</code>参数，<code>bootclasspath</code>参数的详细信息将会在非标准参数中详细说明。</p>
<p><img src="https://img-blog.csdnimg.cn/a91f5ffb6c2e49949c7cde0aee227514.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Nhbmhld3V5YW5n,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<table>
<thead>
<tr>
<th><strong><font color=orange>参数名称</font></strong></th>
<th><strong><font color=amber>描述</font></strong></th>
</tr>
</thead>
<tbody><tr>
<td>-<code>Xmixed</code></td>
<td>混合模式执行 (默认)</td>
</tr>
<tr>
<td>-<code>Xint</code></td>
<td><font color=plum>设置jvm以解释模式运行，所有的字节码将被直接执行，而不会编译成本地码。</font></td>
</tr>
<tr>
<td>-<code>Xbatch</code></td>
<td><font color=tomato>关闭后台代码编译，强制在前台编译</font>，编译完成之后才能进行代码执行；  默认情况下，jvm在后台进行编译，若没有编译完成，则前台运行代码时以解释模式运行。</td>
</tr>
<tr>
<td>-<code>Xbootclasspath:bootclasspath</code></td>
<td><font color=brown>让jvm从指定路径(可以是分号分隔的目录、jar、或者zip)中加载bootclass，用来替换jdk的rt.jar</font>；若非必要，一般不会用到；</td>
</tr>
<tr>
<td>-<font color=green>Xbootclasspath&#x2F;a:path</font></td>
<td><font color=orange>将指定路径的所有文件追加到默认bootstrap路径中；</font></td>
</tr>
<tr>
<td>-<code>Xbootclasspath/p:path</code></td>
<td><font color=yellowgreen>让jvm优先于bootstrap默认路径加载指定路径的所有文件；</font></td>
</tr>
<tr>
<td>-<code>Xcheck:jni</code></td>
<td><font color=green>对JNI函数进行附加check</font>；此时jvm将校验传递给JNI函数参数的合法性，在本地代码中遇到非法数据时，jmv将报一个致命错误而终止；使用该参数后将造成性能下降，请慎用。</td>
</tr>
<tr>
<td>-<code>Xfuture</code></td>
<td><font color=tomato>让jvm对类文件执行严格的格式检查(默认jvm不进行严格格式检查)</font>，以符合类文件格式规范，推荐开发人员使用该参数。</td>
</tr>
<tr>
<td>-<code>Xnoclassgc</code></td>
<td><font color=blue><font color=red>关闭针对class的gc功能</font>；因为其阻止内存回收，所以可能会导致OutOfMemoryError错误</font>，慎用；</td>
</tr>
<tr>
<td>-<code>Xincgc</code></td>
<td><font color=plum> 开启增量gc(默认为关闭)</font>；这有助于减少长时间GC时应用程序出现的停顿；但由于可能和应用程序并发执行，所以会降低CPU对应用的处理能力。</td>
</tr>
<tr>
<td>-<code>Xdiag</code></td>
<td><font color=chocolate>显示附加诊断消息</font></td>
</tr>
<tr>
<td>-<code>Xloggc:file</code></td>
<td><font color=camel>与-verbose:gc功能类似，只是将每次GC事件的相关情况记录到一个文件中</font>，文件的位置最好在本地，以避免网络的潜在问题。  若与verbose命令同时出现在命令行中，则以-Xloggc为准。</td>
</tr>
<tr>
<td>-<code>Xmsn</code></td>
<td><font color=orange>指定jvm堆的初始大小</font>，默认为物理内存的1&#x2F;64，最小为1M；可以指定单位，比如k、m，若不指定，则默认为字节。</td>
</tr>
<tr>
<td>-<code>Xmxn</code></td>
<td><font color=blue>指定jvm堆的最大值</font>，默认为物理内存的1&#x2F;4或者1G，最小为2M；单位与-Xms一致。</td>
</tr>
<tr>
<td>-<code>Xrs</code></td>
<td><font color=yellowgreen>减少jvm对操作系统信号(signals)的使用</font>，该参数从1.3.1开始有效；  从jdk1.3.0开始，jvm允许程序在关闭之前还可以执行一些代码(比如关闭数据库的连接池)，即使jvm被突然终止；  jvm 关闭工具通过监控控制台的相关事件而满足以上的功能；更确切的说，通知在关闭工具执行之前，先注册控制台的控制handler，然后对 CTRL_C_EVENT, CTRL_CLOSE_EVENT,CTRL_LOGOFF_EVENT, and CTRL_SHUTDOWN_EVENT这几类事件直接返回true。  但如果jvm以服务的形式在后台运行(比如servlet引擎)，他能接收CTRL_LOGOFF_EVENT事件，但此时并不需要初始化关闭程序；为了避免类似冲突的再次出现，从jdk1.3.1开始提供-Xrs参数；当此参数被设置之后，jvm将不接收控制台的控制handler，也就是说他不监控和处理CTRL_C_EVENT, CTRL_CLOSE_EVENT, CTRL_LOGOFF_EVENT, orCTRL_SHUTDOWN_EVENT事件。</td>
</tr>
<tr>
<td>-<code>Xssn</code></td>
<td>设置单个线程栈的大小，一般默认为512k。</td>
</tr>
<tr>
<td>-Xdiag</td>
<td><font color=amber>显示附加诊断消息</font></td>
</tr>
<tr>
<td>-<code>Xbatch</code></td>
<td><font color=brown>禁用后台编译</font></td>
</tr>
<tr>
<td>-<code>Xprof</code></td>
<td><font color=red>输出 cpu 配置文件数据</font>,跟踪正运行的程序，并将跟踪数据在标准输出输出；适合于开发环境调试</td>
</tr>
<tr>
<td>-<code>Xshare:off </code></td>
<td><font color=plum>不尝试使用共享类数据</font></td>
</tr>
<tr>
<td>-<code>Xshare:auto   </code></td>
<td><font color=purple>在可能的情况下使用共享类数据</font> (默认)</td>
</tr>
<tr>
<td>-<code>Xshare:on  </code></td>
<td><font color=orange>要求使用共享类数据</font>, 否则将失败。</td>
</tr>
<tr>
<td>-<code>XshowSettings</code></td>
<td><font color=red>显示所有设置并继续</font></td>
</tr>
<tr>
<td>-<code>XshowSettings:all</code></td>
<td><font color=tomato>显示所有设置并继续</font></td>
</tr>
<tr>
<td>-<code>XshowSettings:vm</code></td>
<td>显示所有与 vm 相关的设置并继续</td>
</tr>
<tr>
<td>-<code>XshowSettings:properties</code></td>
<td>显示所有属性设置并继续</td>
</tr>
<tr>
<td>-<code>XshowSettings:locale</code></td>
<td>显示所有与区域设置相关的设置并继续</td>
</tr>
</tbody></table>
<p>上面这些参数中，比如<code>-Xmsn、-Xmxn</code>……都是我们性能优化中很重要的参数； <code>-Xprof、-Xloggc:file</code>等都是在没有专业跟踪工具情况下排错的好手；</p>
<h3 id="三．非Stable-稳定-参数"><a href="#三．非Stable-稳定-参数" class="headerlink" title="三．非Stable(稳定)参数"></a><font color=plum>三．非Stable(稳定)参数</font></h3><p> 用<code>-XX</code>作为<code>前缀的参数列表在</code>jvm<code>中可能是不健壮的，</code>SUN也不推荐使用<code>，后续可能会在没有通知的情况下就直接取消了；但是由于这些参数中的确有很多是对我们很有用的，比如我们经常会见到的</code>-XX:PermSize、-XX:MaxPermSize<code>等等；  下面我们将就</code>Java HotSpot VM<code>中</code>-XX:<code>的可配置参数列表进行描述； 这些参数可以被</code>松散<code>的</code>聚合成三类&#96;： </p>
<ul>
<li><strong><font color=purple>行为参数(Behavioral Options)</font></strong> ：用于改变jvm的一些基础行为； </li>
<li><strong><font color=seagreen>性能调优(Performance Tuning)</font></strong> ：用于jvm的性能调优； </li>
<li><strong><font color=tomato>调试参数(Debugging Options)</font></strong> ：一般用于打开跟踪、打印、输出等jvm参数，用于显示jvm更加详细的信息；</li>
</ul>
<p>由于sun官方文档中对各参数的描述也都非常少(大多只有一句话)，而且大多涉及OS层面的东西，很难描述清楚，所以以下是挑选了一些我们开发中可能会用得比较多的配置项，</p>
<h4 id="行为参数："><a href="#行为参数：" class="headerlink" title="行为参数："></a><font color=amber>行为参数：</font></h4><table>
<thead>
<tr>
<th>参数及其默认值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>-XX:-<font color=purple>DisableExplicitGC</font></td>
<td>禁止调用System.gc()；但jvm的gc仍然有效</td>
</tr>
<tr>
<td>-XX:+<font color=orange>MaxFDLimit</font></td>
<td>最大化文件描述符的数量限</td>
</tr>
<tr>
<td>-XX:+<font color=seagreen>ScavengeBeforeFullG</font></td>
<td>新生代GC优先于Full GC执</td>
</tr>
<tr>
<td>-XX:+<font color=yellowgreen>UseGCOverheadLimi</font></td>
<td>在抛出OOM之前限制jvm耗费在GC上的时间比</td>
</tr>
<tr>
<td>-XX:-<font color=yellowgreen>UseConcMarkSweepG</font></td>
<td><strong><font color=amber>对老生代采用并发标记交换算法进行GC</font></strong></td>
</tr>
<tr>
<td>-XX:-<font color=purple>UseParallelG</font></td>
<td><strong><font color=seagreen>启用并行GC</font></strong></td>
</tr>
<tr>
<td>-XX:-<font color=amber>UseParallelOldG</font></td>
<td>对Full GC启用并行，当-XX:-UseParallelGC启用时该项自动启</td>
</tr>
<tr>
<td>-XX:-<font color=chocolate>UseSerialG</font></td>
<td><strong><font color=blue>启用串行GC</font></strong></td>
</tr>
<tr>
<td>-XX:+<font color=yellowgreen>UseThreadPrioritie</font></td>
<td>启用本地线程优先</td>
</tr>
</tbody></table>
<p>上面表格中黑体的三个参数代表着jvm中GC执行的三种方式，即<code>串行、并行、并发</code>；</p>
<ul>
<li><code>串行(SerialGC)</code>是jvm的默认GC方式，一般适用于小型应用和单处理器，算法比较简单，GC效率也较高，但可能会给应用带来停顿；</li>
<li><code>并行(ParallelGC)</code>是指GC运行时，对应用程序运行没有影响，GC和app两者的线程在并发执行，这样可以最大限度不影响app的运行；</li>
<li><code>并发(ConcMarkSweepGC)</code>是指多个线程并发执行GC，一般适用于多处理器系统中，可以提高GC的效率，但算法复杂，系统消耗较大；</li>
</ul>
<h4 id="性能调优参数列表："><a href="#性能调优参数列表：" class="headerlink" title="性能调优参数列表："></a><font color=plum>性能调优参数列表</font>：</h4><p><strong><font color=red>日常性能调优中基本上都会用到以下的这几个属性</font></strong></p>
<table>
<thead>
<tr>
<th>参数及其默认值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>-XX:<font color=red>LargePageSizeInBytes&#x3D;4m</font></td>
<td>设置用于Java堆的大页面尺寸</td>
</tr>
<tr>
<td>-XX:<font color=brown>MaxHeapFreeRatio&#x3D;70</font></td>
<td>GC后java堆中空闲量占的最大比例</td>
</tr>
<tr>
<td>-XX:<font color=blue>MaxNewSize&#x3D;size</font></td>
<td><strong><font color=tomato>新生成对象能占用内存的最大值</font></strong></td>
</tr>
<tr>
<td>-XX:<font color=yellowgreen>MaxPermSize&#x3D;64m</font></td>
<td><strong><font color=seagreen>老生代对象能占用内存的最大值</font></strong></td>
</tr>
<tr>
<td>-XX:<font color=red>MinHeapFreeRatio&#x3D;40</font></td>
<td>GC后java堆中空闲量占的最小比例</td>
</tr>
<tr>
<td>-XX:<font color=chocolate>NewRatio&#x3D;2</font></td>
<td>新生代内存容量与老生代内存容量的比例</td>
</tr>
<tr>
<td>-XX:<font color=camel>NewSize&#x3D;2.125m</font></td>
<td><strong><font color=orange>新生代对象生成时占用内存的默认值</font></strong></td>
</tr>
<tr>
<td>-XX:<font color=blue>ReservedCodeCacheSize&#x3D;32m</font></td>
<td>保留代码占用的内存容量</td>
</tr>
<tr>
<td>-XX:<font color=chocolate>ThreadStackSize&#x3D;512</font></td>
<td>设置线程栈大小，若为0则使用系统默认值</td>
</tr>
<tr>
<td>-XX:<font color=red>+UseLargePages</font></td>
<td>使用大页面内存</td>
</tr>
</tbody></table>
<h4 id="调试参数列表："><a href="#调试参数列表：" class="headerlink" title="调试参数列表："></a><font color=yellowgreen>调试参数列表：</font></h4><table>
<thead>
<tr>
<th>参数及其默认值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>-XX:<font color=royalblue>-CITime</font></td>
<td>打印消耗在JIT编译的时间</td>
</tr>
<tr>
<td>-XX:<font color=camel>ErrorFile&#x3D;.&#x2F;hs_err_pid<pid>.log</font></td>
<td>保存错误日志或者数据到文件中</td>
</tr>
<tr>
<td>-XX:<font color=green>-ExtendedDTraceProbes</font></td>
<td>开启solaris特有的dtrace探针</td>
</tr>
<tr>
<td>-XX:<font color=royalblue>HeapDumpPath&#x3D;.&#x2F;java_pid<pid>.hprof</font></td>
<td><strong><font color=orange>指定导出堆信息时的路径或文件名</font></strong></td>
</tr>
<tr>
<td>-XX:<font color=yellowgreen>-HeapDumpOnOutOfMemoryError</font></td>
<td><strong><font color=orange>当首次遭遇OOM时导出此时堆中相关信息</font></strong></td>
</tr>
<tr>
<td>-XX:<font color=amber>OnError&#x3D;”<cmd args>;<cmd args>“</font></td>
<td>出现致命ERROR之后运行自定义命令</td>
</tr>
<tr>
<td>-XX:<font color=blue>OnOutOfMemoryError&#x3D;”<cmd args>;<cmd args>“</font></td>
<td>当首次遭遇OOM时执行自定义命令</td>
</tr>
<tr>
<td>-XX:-<font color=royalblue>PrintClassHistogram</font></td>
<td>遇到Ctrl-Break后打印类实例的柱状信息，与jmap -histo功能相同</td>
</tr>
<tr>
<td>-XX:-<font color=orange>PrintConcurrentLocks</font></td>
<td><strong><font color=green>遇到Ctrl-Break后打印并发锁的相关信息，与jstack -l功能相同</font></strong></td>
</tr>
<tr>
<td>-XX:-<font color=camel>PrintCommandLineFlags</font></td>
<td>打印在命令行中出现过的标记</td>
</tr>
<tr>
<td>-XX:-<font color=royalblue>PrintCompilation</font></td>
<td>当一个方法被编译时打印相关信息</td>
</tr>
<tr>
<td>-XX:-<font color=chocolate>PrintGC</font></td>
<td>每次GC时打印相关信息</td>
</tr>
<tr>
<td>-XX:-<font color=blue>PrintGC Details</font></td>
<td>每次GC时打印详细信息</td>
</tr>
<tr>
<td>-XX:-<font color=seagreen>PrintGCTimeStamps</font></td>
<td>打印每次GC的时间戳</td>
</tr>
<tr>
<td>-XX:-<font color=orange>TraceClassLoading</font></td>
<td>跟踪类的加载信息</td>
</tr>
<tr>
<td>-XX:-<font color=green>TraceClassLoadingPreorder</font></td>
<td>跟踪被引用到的所有类的加载信息</td>
</tr>
<tr>
<td>-XX:-<font color=brown>TraceClassResolution</font></td>
<td>跟踪常量池</td>
</tr>
<tr>
<td>-XX:-<font color=yellowgreen>TraceClassUnloading</font></td>
<td>跟踪类的卸载信息</td>
</tr>
<tr>
<td>-XX:-<font color=yellowgreen>TraceLoaderConstraints</font></td>
<td>跟踪类加载器约束的相关信息</td>
</tr>
</tbody></table>
</div><div class="article-licensing box"><div class="licensing-title"><p>关于项目中启动脚本编写的一些笔记整理</p><p><a href="https://liruilongs.github.io/2021/08/18/Java/关于项目中启动脚本编写的一些笔记整理/">https://liruilongs.github.io/2021/08/18/Java/关于项目中启动脚本编写的一些笔记整理/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><a href="https://liruilongs.github.io"><p>山河已无恙</p></a></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2021-08-18</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2023-06-21</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="icon" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a><a class="icon" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="recommend-area"><div class="recommend-post"><span class="is-size-6 has-text-grey has-mr-7"># 相关文章</span><br><span>  1.<a class="is-size-6" href="/2021/07/30/Linux/%E5%85%B3%E4%BA%8E%20Linux%E4%B8%AD%20shell%E7%AD%89%E7%9F%A5%E8%AF%86%E7%9A%84%E4%B8%80%E4%BA%9B%E7%AC%94%E8%AE%B0/" target="_blank">关于 linux中 shell等知识的一些笔记</a><br></span></div><div class="recommend-post"><span class="is-size-6 has-text-grey has-mr-7"># 推荐文章</span><br><span>  1.<a class="is-size-6" href="/2021/08/27/K8s/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E3%80%8AKubernetes%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97-%E4%BB%8EDocker%E5%88%B0Kubernetes%E5%AE%9E%E8%B7%B5%E5%85%A8%E6%8E%A5%E8%A7%A6%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" target="_blank">《Kubernetes权威指南:从Docker到Kubernetes实践全接触》读书笔记</a><br></span><span>  2.<a class="is-size-6" href="/2024/10/10/Git/Git-%E6%8F%90%E4%BA%A4%E4%BB%A3%E7%A0%81-reference-broken-%E9%97%AE%E9%A2%98%E5%A4%84%E7%90%86/" target="_blank">Git 提交代码 reference broken 问题处理</a><br></span><span>  3.<a class="is-size-6" href="/2022/11/19/Git/%E5%85%B3%E4%BA%8E-Git-%E9%87%8D%E5%86%99%E5%8E%86%E5%8F%B2%E7%9A%84%E4%B8%80%E4%BA%9B%E7%AC%94%E8%AE%B0/" target="_blank">关于 Git 重写历史的一些笔记</a><br></span><span>  4.<a class="is-size-6" href="/2022/08/02/Git/%E5%85%B3%E4%BA%8EGit%E5%88%86%E6%94%AF%E5%8F%98%E5%9F%BA%E6%93%8D%E4%BD%9C%E7%9A%84%E4%B8%80%E4%BA%9B%E7%AC%94%E8%AE%B0/" target="_blank">关于Git分支变基操作的一些笔记</a><br></span><span>  5.<a class="is-size-6" href="/2022/07/26/Git/%E5%85%B3%E4%BA%8EGit%E5%88%86%E6%94%AF%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%9A%84%E4%B8%80%E4%BA%9B%E7%AC%94%E8%AE%B0/" target="_blank">关于Git分支基础知识的一些笔记</a><br></span><span>  6.<a class="is-size-6" href="/2022/08/02/Git/%E5%85%B3%E4%BA%8EGit%E5%88%86%E6%94%AF%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%9A%84%E4%B8%80%E4%BA%9B%E7%AC%94%E8%AE%B0/" target="_blank">关于Git分支工作流的一些笔记</a><br></span></div></div><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/social-share.js/1.0.16/css/share.min.css"><div class="social-share"></div><script src="https://cdnjs.loli.net/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="/img/alipay%EF%BF%A5.png" alt="支付宝"></span></a><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/img/wechat%EF%BF%A5.png" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2021/08/18/%E5%8D%8E%E4%B8%BA%E4%BA%91/%E5%8D%8E%E4%B8%BAHCIP%20R&amp;S%20%E8%80%83%E8%AF%95%E7%AC%94%E8%AE%B0/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">华为HCIP R&amp;S 考试笔记</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2021/08/10/Linux/%E5%85%B3%E4%BA%8E%20Linux%E4%B8%ADGit%E7%AD%89%E7%9F%A5%E8%AF%86%E7%9A%84%E4%B8%80%E4%BA%9B%E7%AC%94%E8%AE%B0/"><span class="level-item">关于 Linux中Git等知识的一些笔记</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--><div class="card"><div class="card-content"><div class="title is-5">评论</div><div id="comment-container"></div><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/gitalk/1.6.0/gitalk.css"><script> $.getScript('/js/gitalk.min.js', function () { 
            var gitalk = new Gitalk({
            language:'zh-CN',
            id: '834fbfae647e0df380c0738d8d58b111',
            repo: 'blog_comment',
            owner: 'LIRUILONGS',
            clientID: '9fdc9739266d48d5f62e',
            clientSecret: 'c1cc33697d099a2197650ec9dadcb16bd4904655',
            admin: ["LIRUILONGS"],
            createIssueManually: true,
            distractionFreeMode: true,
            perPage: 10,
            pagerDirection: 'last',
            proxy: 'https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token',
            
            enableHotKey: true,
            isLocked: false
        })
        gitalk.render('comment-container')});</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="is-flex is-mobile" href="#写在前面"><span class="mr-2">1</span><span>写在前面</span></a></li><li><a class="is-flex is-mobile" href="#小项目启动脚本"><span class="mr-2">2</span><span>小项目启动脚本</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#定时任务类型的小项目"><span class="mr-2">2.1</span><span>定时任务类型的小项目</span></a></li><li><a class="is-flex is-mobile" href="#项目分开写-start-sh"><span class="mr-2">2.2</span><span>项目分开写 start.sh</span></a></li><li><a class="is-flex is-mobile" href="#项目分开写-stop-sh"><span class="mr-2">2.3</span><span>项目分开写  stop.sh</span></a></li></ul></li><li><a class="is-flex is-mobile" href="#springboot-项目启动脚本-没有使用-jar-方式，"><span class="mr-2">3</span><span>springboot 项目启动脚本 ,没有使用-jar 方式，</span></a><ul class="menu-list"><ul class="menu-list"><li><a class="is-flex is-mobile" href="#run-sh"><span class="mr-2">3.1.1</span><span>run.sh</span></a></li></ul></ul></li><li><a class="is-flex is-mobile" href="#springboot-项目-容器类启动脚本-使用-jar方式"><span class="mr-2">4</span><span>springboot 项目 容器类启动脚本,使用 -jar方式</span></a><ul class="menu-list"><ul class="menu-list"><li><a class="is-flex is-mobile" href="#Dockerfile"><span class="mr-2">4.1.1</span><span>Dockerfile</span></a></li><li><a class="is-flex is-mobile" href="#我们在使用-kill-命令的时候，-可以传入-信号编号，也可以传入信号名"><span class="mr-2">4.1.2</span><span>我们在使用 kill 命令的时候， 可以传入 信号编号，也可以传入信号名</span></a></li></ul></ul></li><li><a class="is-flex is-mobile" href="#java-启动参数整理"><span class="mr-2">5</span><span>java 启动参数整理</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#java启动参数共分为三类："><span class="mr-2">5.1</span><span>java启动参数共分为三类：</span></a></li><li><a class="is-flex is-mobile" href="#一．标准参数"><span class="mr-2">5.2</span><span>一．标准参数</span></a></li><li><a class="is-flex is-mobile" href="#二．非标准参数"><span class="mr-2">5.3</span><span>二．非标准参数</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#X-输出非标准的参数列表及其描述。"><span class="mr-2">5.3.1</span><span>-X  输出非标准的参数列表及其描述。</span></a></li></ul></li><li><a class="is-flex is-mobile" href="#三．非Stable-稳定-参数"><span class="mr-2">5.4</span><span>三．非Stable(稳定)参数</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#行为参数："><span class="mr-2">5.4.1</span><span>行为参数：</span></a></li><li><a class="is-flex is-mobile" href="#性能调优参数列表："><span class="mr-2">5.4.2</span><span>性能调优参数列表：</span></a></li><li><a class="is-flex is-mobile" href="#调试参数列表："><span class="mr-2">5.4.3</span><span>调试参数列表：</span></a></li></ul></li></ul></li></ul></div></div><style>.menu-list > li > a.is-active + .menu-list { display: block; }.menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="profile"><div class="card-content"><nav class=""><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7.jpg" alt="山河已无恙"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">山河已无恙</p><p class="is-size-6 is-block">爱自己，是终生浪漫的开始</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>中国·呼和浩特</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">442</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">144</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">191</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://mp.weixin.qq.com/s?__biz=MzkyNjIxNTYwMw==&amp;mid=2247496480&amp;idx=1&amp;sn=a9971fed3962ef2a1aeda1f0bda65f86&amp;chksm=c2380ffcf54f86eaba8daac6caca72a70f38e61a8d25dc2a66d3a17b87c02530e326dcaea14b#rd" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/LIRUILONGS"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="CSDN" href="https://liruilong.blog.csdn.net/"><i class="fa fa-code"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Email" href="mailto:1224965096@qq.com"><i class="fa fa-envelope"></i></a></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://liruilong.blog.csdn.net/?t=1&amp;type=blog" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">CSDN</span></span><span class="level-right"><span class="level-item tag">liruilong.blog.csdn.net</span></span></a></li><li><a class="level is-mobile" href="https://www.cnblogs.com/liruilong/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">博客园</span></span><span class="level-right"><span class="level-item tag">www.cnblogs.com</span></span></a></li><li><a class="level is-mobile" href="https://github.com/LIRUILONGS" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Githup</span></span><span class="level-right"><span class="level-item tag">github.com</span></span></a></li><li><a class="level is-mobile" href="https://gitee.com/liruilonger" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">码云</span></span><span class="level-right"><span class="level-item tag">gitee.com</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">最新评论</h3><span class="body_hot_comment">加载中，最新评论有1分钟缓存...</span></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-05-12T11:03:27.000Z">2025-05-12</time></p><p class="title"><a href="/2025/05/12/%E5%BE%85%E5%8F%91%E5%B8%83/%E8%85%BE%E8%AE%AFAI%E6%99%BA%E8%83%BD%E7%BC%96%E7%A8%8B%E4%BC%99%E4%BC%B4-CodeBuddy-%E5%B0%9D%E9%B2%9C%EF%BC%8C%E5%B8%A6%E4%BD%A0%E8%AE%A4%E8%AF%86%E4%B8%AD%E5%9B%BD%E7%89%88-Cursor/">腾讯云代码助手 CodeBuddy 尝鲜，带你认识中国版 Cursor</a></p><p class="categories"><a href="/categories/test3/">test3</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-04-17T23:32:10.000Z">2025-04-18</time></p><p class="title"><a href="/2025/04/18/%E5%BE%85%E5%8F%91%E5%B8%83/%E8%AE%A4%E8%AF%86%20Linux%20%E5%86%85%E5%AD%98%E6%9E%84%E6%88%90%EF%BC%9ALinux%20%E5%86%85%E5%AD%98%E8%B0%83%E4%BC%98%E4%B9%8B%E9%A1%B5%E8%A1%A8%E3%80%81TLB%E3%80%81%E5%A4%A7%E9%A1%B5%E8%AE%A4%E7%9F%A5/">认识 Linux 内存构成：Linux 内存调优之页表、TLB、缺页异常、大页认知</a></p><p class="categories"><a href="/categories/Linux/">Linux</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-04-13T14:50:54.000Z">2025-04-13</time></p><p class="title"><a href="/2025/04/13/%E5%BE%85%E5%8F%91%E5%B8%83/%E8%B0%B7%E6%AD%8C68%E9%A1%B5%E7%99%BD%E7%9A%AE%E4%B9%A6%E8%A7%A3%E5%AF%86%EF%BC%9A%E6%8F%90%E7%A4%BA%E5%B7%A5%E7%A8%8B%E5%A6%82%E4%BD%95%E9%87%8D%E5%A1%91AI%E4%BA%A4%E4%BA%92%E9%80%BB%E8%BE%91/">谷歌68页白皮书解密：提示工程如何重塑AI交互逻辑</a></p><p class="categories"><a href="/categories/LLM/">LLM</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-04-11T11:38:12.000Z">2025-04-11</time></p><p class="title"><a href="/2025/04/11/%E5%BE%85%E5%8F%91%E5%B8%83/Linux%20%E7%B3%BB%E7%BB%9F%E5%86%85%E5%AD%98%E7%9B%91%E6%8E%A7%EF%BC%9ALinux%20%E5%86%85%E5%AD%98%E8%B0%83%E4%BC%98%E4%B9%8B%E7%B3%BB%E7%BB%9F%E5%86%85%E5%AD%98%E5%85%A8%E9%9D%A2%E7%9B%91%E6%8E%A7/">Linux 系统内存监控：Linux 内存调优之系统内存全面监控</a></p><p class="categories"><a href="/categories/Linux/">Linux</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-04-11T11:38:12.000Z">2025-04-11</time></p><p class="title"><a href="/2025/04/11/%E5%BE%85%E5%8F%91%E5%B8%83/Linux-%E8%BF%9B%E7%A8%8B%E5%86%85%E5%AD%98%E7%9B%91%E6%8E%A7%EF%BC%9ALinux-%E5%86%85%E5%AD%98%E8%B0%83%E4%BC%98%E4%B9%8B%E8%BF%9B%E7%A8%8B%E5%86%85%E5%AD%98%E6%B7%B1%E5%BA%A6%E7%9B%91%E6%8E%A7/">Linux 进程内存监控：Linux 内存调优之进程内存深度监控</a></p><p class="categories"><a href="/categories/Linux/">Linux</a></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/AIGC/"><span class="level-start"><span class="level-item">AIGC</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/AdaFace/"><span class="level-start"><span class="level-item">AdaFace</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Ajax/"><span class="level-start"><span class="level-item">Ajax</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Ansible/"><span class="level-start"><span class="level-item">Ansible</span></span><span class="level-end"><span class="level-item tag">23</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/AppCube/"><span class="level-start"><span class="level-item">AppCube</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/BPF/"><span class="level-start"><span class="level-item">BPF</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Bind9/"><span class="level-start"><span class="level-item">Bind9</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/CI-CD/"><span class="level-start"><span class="level-item">CI/CD</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/CSS/"><span class="level-start"><span class="level-item">CSS</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Ceph/"><span class="level-start"><span class="level-item">Ceph</span></span><span class="level-end"><span class="level-item tag">22</span></span></a></li><a class="level is-mobile is-marginless" href="/categories/"><span class="level-start"><span class="level-item">查看全部&gt;&gt;</span></span></a></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2025/05/"><span class="level-start"><span class="level-item">五月 2025</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2025/04/"><span class="level-start"><span class="level-item">四月 2025</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2025/03/"><span class="level-start"><span class="level-item">三月 2025</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2025/02/"><span class="level-start"><span class="level-item">二月 2025</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2025/01/"><span class="level-start"><span class="level-item">一月 2025</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><a class="level is-mobile is-marginless" href="/archives/"><span class="level-start"><span class="level-item">查看全部&gt;&gt;</span></span></a></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Kubernetes/"><span class="tag">Kubernetes</span><span class="tag is-grey-lightest">98</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux/"><span class="tag">Linux</span><span class="tag is-grey-lightest">57</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Ansible/"><span class="tag">Ansible</span><span class="tag is-grey-lightest">25</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Ceph/"><span class="tag">Ceph</span><span class="tag is-grey-lightest">22</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag is-grey-lightest">15</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Docker/"><span class="tag">Docker</span><span class="tag is-grey-lightest">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Git/"><span class="tag">Git</span><span class="tag is-grey-lightest">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JAVA/"><span class="tag">JAVA</span><span class="tag is-grey-lightest">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8D%8E%E4%B8%BA%E4%BA%91/"><span class="tag">华为云</span><span class="tag is-grey-lightest">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BPF/"><span class="tag">BPF</span><span class="tag is-grey-lightest">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CPU/"><span class="tag">CPU</span><span class="tag is-grey-lightest">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Mysql/"><span class="tag">Mysql</span><span class="tag is-grey-lightest">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Go/"><span class="tag">Go</span><span class="tag is-grey-lightest">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LLM/"><span class="tag">LLM</span><span class="tag is-grey-lightest">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/OpenShift/"><span class="tag">OpenShift</span><span class="tag is-grey-lightest">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%A8%8B%E5%BA%8F%E4%BA%BA%E7%94%9F/"><span class="tag">程序人生</span><span class="tag is-grey-lightest">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/DNS/"><span class="tag">DNS</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/OKD/"><span class="tag">OKD</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%91%84%E5%BD%B1%E6%9B%9D%E5%85%89/"><span class="tag">摄影曝光</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/selenium/"><span class="tag">selenium</span><span class="tag is-grey-lightest">4</span></a></div></div><div class="field is-grouped is-grouped-multiline"><a class="tags has-addons" href="/tags/"><span class="tag">查看全部&gt;&gt;</span></a></div></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div><!--!--><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.png" alt="山河已无恙" height="28"></a><p class="size-small"><span>&copy; 2025 山河已无恙</span>  Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a> &amp; <a href="https://github.com/removeif/hexo-theme-amazing" target="_blank">Amazing</a> <br><span>© <a href="http://www.beian.miit.gov.cn/" target="_blank">备案中</a><br></span><span>© 版权说明：[本网站所有内容均收集于互联网或自己创作,<br />&nbsp;&nbsp;&nbsp;&nbsp;方便于网友与自己学习交流，如有侵权，请<a href="/message" target="_blank">留言</a>，立即处理]<br /></span><span><span id="statistic-times">loading...</span><script>function createTime(time) {
            var n = new Date(time);
            now.setTime(now.getTime() + 250),
                days = (now - n) / 1e3 / 60 / 60 / 24,
                dnum = Math.floor(days),
                hours = (now - n) / 1e3 / 60 / 60 - 24 * dnum,
                hnum = Math.floor(hours),
            1 == String(hnum).length && (hnum = "0" + hnum),
                minutes = (now - n) / 1e3 / 60 - 1440 * dnum - 60 * hnum,
                mnum = Math.floor(minutes),
            1 == String(mnum).length && (mnum = "0" + mnum),
                seconds = (now - n) / 1e3 - 86400 * dnum - 3600 * hnum - 60 * mnum,
                snum = Math.round(seconds),
            1 == String(snum).length && (snum = "0" + snum),
                document.getElementById("statistic-times").innerHTML = "❤️本站自 <strong>"+time.split(" ")[0].replace(/\//g,".")+"</strong> 已运行 <strong>" + dnum + "</strong> 天 <strong>" + hnum + "</strong> 小时 <strong>" + mnum + "</strong> 分 <strong>" + snum + "</strong> 秒！❤️";
        }var now = new Date();setInterval("createTime('2021/6/26 21:27:00')", 250,"");</script><br></span><div class="size-small"><span>❤️感谢 <strong><span id="busuanzi_value_site_uv">99+</span></strong> 小伙伴的 <strong><span id="busuanzi_value_site_pv">99+</span></strong> 次光临！❤️</span></div></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/removeif/hexo-theme-amazing"><i class="fab fa-github"></i></a></p></div><div class="sideMusic"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="/js/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script><meting-js style="width: auto;height: 2000px;" server="netease" type="playlist" id="2364053447" theme="#2980b9" loop="all" autoplay="false" order="list" storageName="aplayer-setting" lrctype="0" list-max-height="400px" fixed="true"></meting-js></div></div></div></div></footer><script src="https://cdnjs.loli.net/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" async></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><!--!--><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><script src="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.8/js/lightgallery.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/KaTeX/0.11.1/katex.min.css"><script src="https://cdnjs.loli.net/ajax/libs/KaTeX/0.11.1/katex.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/KaTeX/0.11.1/contrib/auto-render.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/KaTeX/0.11.1/contrib/mhchem.js" defer></script><script>window.addEventListener("load", function() {
            document.querySelectorAll('[role="article"] > .content').forEach(function(element) {
                renderMathInElement(element);
            });
        });</script><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdnjs.loli.net/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><div id="outdated"><h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly.&amp;npsb;<a id="btnUpdateBrowser" target="_blank" rel="noopener" href="http://outdatedbrowser.com/">Update my browser now </a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">×</a></p></div><script src="https://cdnjs.loli.net/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js" defer></script><script>window.addEventListener("load", function () {
            outdatedBrowser({
                bgColor: '#f25648',
                color: '#ffffff',
                lowerThan: 'object-fit' // display on IE11 or below
            });
        });</script><!--!--><script src="/js/main.js" defer></script><script>$.getScript('/js/comment-issue-data.js',function(){loadIssueData('9fdc9739266d48d5f62e','c1cc33697d099a2197650ec9dadcb16bd4904655','LIRUILONGS','blog_comment',false);})</script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.js"></script><script type="text/javascript">var pjax = new Pjax({
            elements: "a",//代表点击链接就更新
            selectors: [  //代表要更新的节点
                ".section",
                "title"
            ],
            cache: true,
            cacheBust:false
        })

        function loadBusuanzi(){
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js", function () {});
        }

        function loadMathJax() { //加载mathjax
            $.getScript("//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML", function () {
                MathJax.Hub.Config({ tex2jax: { inlineMath: [['$', '$'], ['\(', '\)']] } });
                var math = document.getElementsByClassName("entry-content")[0];
                MathJax.Hub.Queue(["Typeset", MathJax.Hub, math]);
            });
        };

        // 开始 PJAX 执行的函数
        document.addEventListener('pjax:send', function () {
        });
        
        // PJAX 完成之后执行的函数，可以和上面的重载放在一起
        document.addEventListener('pjax:complete', function () {
            $(".section").css({opacity:1});
            if(true){
                $.getScript('/js/comment-issue-data.js',function(){loadIssueData('9fdc9739266d48d5f62e','c1cc33697d099a2197650ec9dadcb16bd4904655','LIRUILONGS','blog_comment',false);});
            }
            if(false){
                loadMathJax();
            }
            loadMainJs(jQuery, window.moment, window.ClipboardJS, window.IcarusThemeSettings);
            loadBackTop();
            loadBusuanzi();
            if(typeof loadBanner == 'function'){
                loadBanner();
            }
        });</script></body></html>